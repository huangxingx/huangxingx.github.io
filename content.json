{"meta":{"title":"huangxingx","subtitle":"Follow Your Heart.","description":null,"author":"huangxingx","url":"https://huangxingx.github.io","root":"/"},"pages":[],"posts":[{"title":"JavaåŒäº²å§”æ´¾æœºåˆ¶åŠç”¨æ³•","slug":"java/javaåŒäº²å§”æ´¾æœºåˆ¶åŠç”¨æ³•","date":"2022-11-02T16:00:00.000Z","updated":"2022-11-03T03:24:00.607Z","comments":true,"path":"2022/11/03/java/javaåŒäº²å§”æ´¾æœºåˆ¶åŠç”¨æ³•/","link":"","permalink":"https://huangxingx.github.io/2022/11/03/java/java%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6%E5%8F%8A%E7%94%A8%E6%B3%95/","excerpt":"","text":"JavaåŒäº²å§”æ´¾æœºåˆ¶åŠç”¨æ³•ä¸€ã€JVMç±»åŠ è½½è¿‡ç¨‹æ•´ä¸ªç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬å¦‚ä¸‹7ä¸ªé˜¶æ®µ åŠ è½½(loading)ä¹Ÿç§°ä¸ºè£…è½½ éªŒè¯ã€å‡†å¤‡ã€è§£æ3ä¸ªéƒ¨åˆ†ç»Ÿç§°ä¸ºé“¾æ¥(Linking) åˆå§‹åŒ– ä½¿ç”¨ é”€æ¯ äºŒã€ç±»åŠ è½½å™¨ä»‹ç»JVMä¸­æœ‰å†…ç½®äº†ä¸‰ä¸ªåˆå§‹çš„ç±»åŠ è½½å™¨ã€‚ **BootstrapClassLoader(å¼•å¯¼ç±»ã€å¯åŠ¨ç±»åŠ è½½å™¨)**ï¼Œé¡¶å±‚ç±»åŠ è½½å™¨ï¼ŒC++å®ç°ã€‚åŠ è½½%JAVA_HOME%libç›®å½•ä¸‹jaråŒ…å’Œç±»æˆ–è€…æˆ–è¢« -Xbootclasspathå‚æ•°æŒ‡å®šçš„è·¯å¾„ä¸­çš„æ‰€æœ‰ç±»ï¼ŒåŠ è½½java.*ã€‚ ExtensionClassLoader(æ‰©å±•ç±»åŠ è½½å™¨) ï¼šè´Ÿè´£åŠ è½½ç›®å½• %JRE_HOME%/lib/ext ç›®å½•ä¸‹çš„jaråŒ…å’Œç±»ï¼Œæˆ–è¢« java.ext.dirs ç³»ç»Ÿå˜é‡æ‰€æŒ‡å®šçš„è·¯å¾„ä¸‹çš„jaråŒ…ã€‚ AppClassLoader(åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨) :åŠ è½½å½“å‰åº”ç”¨classpathä¸‹çš„æ‰€æœ‰jaråŒ…å’Œç±»ï¼ˆåœ¨springåŠ è½½ä¸­èµ·åˆ°äº†é‡è¦ä½œç”¨ï¼‰ã€‚ ä¸‰ã€åŒäº²å§”æ´¾æ¨¡å‹ä¸€ä¸ªç±»åŠ è½½çš„æ—¶å€™å…ˆäº¤ç”±çˆ¶ç±»åŠ è½½å™¨å»åŠ è½½ï¼Œå¦‚æœçˆ¶ç±»åŠ è½½å™¨ä¹Ÿå­˜åœ¨çˆ¶ç±»åŠ è½½å™¨ï¼Œç»§ç»­äº¤ç”±çˆ¶ç±»åŠ è½½ï¼Œä»¥æ­¤é€’å½’ï¼Œå¦‚æœçˆ¶ç±»åŠ è½½æ— æ³•åŠ è½½å†ç”±è‡ªå·±å»åŠ è½½ã€‚ å¦‚æœæƒ³æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªç±»åŠ è½½å™¨ç»§æ‰¿java.lang.ClassLoaderï¼Œé‡å†™loadClassæ–¹æ³•ï¼Œä¸äº¤ç”±çˆ¶ç±»å»åŠ è½½ã€‚ å¦‚æœåªæ˜¯æƒ³è‡ªå®šä¹‰åŠ è½½classçš„æ–¹æ³•ï¼Œæ¯”å¦‚è¯»å–äºŒè¿›åˆ¶æµåè¿›è¡Œè§£å¯†ç­‰ã€‚åªéœ€è¦é‡å†™findClasså°±è¡Œäº†ã€‚ loadClassæ–¹æ³•è´Ÿè´£åŠ è½½æµç¨‹ï¼ŒfindClassæ–¹æ³•è´Ÿè´£å…·ä½“åŠ è½½ç»†èŠ‚ã€‚ å››ã€åŒäº²å§”æ´¾æ¨¡å¼çš„ç‰¹ç‚¹ é¿å…é‡å¤åŠ è½½classï¼Œä¿è¯æ•°æ®å®‰å…¨ã€‚ ä¿æŠ¤æ ¸å¿ƒclassæ— æ³•ä¿®æ”¹ã€‚ ä¸åŒåŠ è½½å™¨åŠ è½½åŒä¸€ä¸ªclassä¸æ˜¯åŒä¸€ä¸ªclasså¯¹è±¡ï¼Œä¿è¯classæ‰§è¡Œå®‰å…¨ã€‚","categories":[{"name":"java","slug":"java","permalink":"https://huangxingx.github.io/categories/java/"}],"tags":[{"name":"java","slug":"java","permalink":"https://huangxingx.github.io/tags/java/"}]},{"title":"Arthas","slug":"java/arthas","date":"2022-11-02T16:00:00.000Z","updated":"2022-11-03T11:58:30.052Z","comments":true,"path":"2022/11/03/java/arthas/","link":"","permalink":"https://huangxingx.github.io/2022/11/03/java/arthas/","excerpt":"","text":"Arthaså¿«é€Ÿå…¥é—¨æ–‡æ¡£åœ°å€ï¼šhttps://arthas.aliyun.com/ ä¸‹è½½å¹¶å¯åŠ¨arthas curl -O https://arthas.aliyun.com/arthas-boot.jar java -jar arthas-boot.jar ä½¿ç”¨as.sh Arthas æ”¯æŒåœ¨ Linux/Unix/Mac ç­‰å¹³å°ä¸Šä¸€é”®å®‰è£…ï¼Œè¯·å¤åˆ¶ä»¥ä¸‹å†…å®¹ï¼Œå¹¶ç²˜è´´åˆ°å‘½ä»¤è¡Œä¸­ï¼Œæ•² å›è½¦ æ‰§è¡Œå³å¯ï¼š curl -L https://arthas.aliyun.com/install.sh | sh å¸¸ç”¨å‘½ä»¤loggeræ›´æ–° logger lever logger --name ROOT --level debug jadåç¼–è¯‘æŒ‡å®šå·²åŠ è½½ç±»çš„æºç  ä½¿ç”¨å‚è€ƒ https://arthas.aliyun.com/doc/jad.html å‚æ•°è¯´æ˜ å‚æ•°åç§° å‚æ•°è¯´æ˜ class-pattern ç±»åè¡¨è¾¾å¼åŒ¹é… [c:] ç±»æ‰€å± ClassLoader çš„ hashcode [classLoaderClass:] æŒ‡å®šæ‰§è¡Œè¡¨è¾¾å¼çš„ ClassLoader çš„ class name [E] å¼€å¯æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œé»˜è®¤ä¸ºé€šé…ç¬¦åŒ¹é… ttæ–¹æ³•æ‰§è¡Œæ•°æ®çš„æ—¶ç©ºéš§é“ï¼Œè®°å½•ä¸‹æŒ‡å®šæ–¹æ³•æ¯æ¬¡è°ƒç”¨çš„å…¥å‚å’Œè¿”å›ä¿¡æ¯ï¼Œå¹¶èƒ½å¯¹è¿™äº›ä¸åŒçš„æ—¶é—´ä¸‹è°ƒç”¨è¿›è¡Œè§‚æµ‹ tt -t demo.MathGame primeFactors è¡¨æ ¼å­—æ®µè¯´æ˜ è¡¨æ ¼å­—æ®µ å­—æ®µè§£é‡Š INDEX æ—¶é—´ç‰‡æ®µè®°å½•ç¼–å·ï¼Œæ¯ä¸€ä¸ªç¼–å·ä»£è¡¨ç€ä¸€æ¬¡è°ƒç”¨ï¼Œåç»­ tt è¿˜æœ‰å¾ˆå¤šå‘½ä»¤éƒ½æ˜¯åŸºäºæ­¤ç¼–å·æŒ‡å®šè®°å½•æ“ä½œï¼Œéå¸¸é‡è¦ã€‚ TIMESTAMP æ–¹æ³•æ‰§è¡Œçš„æœ¬æœºæ—¶é—´ï¼Œè®°å½•äº†è¿™ä¸ªæ—¶é—´ç‰‡æ®µæ‰€å‘ç”Ÿçš„æœ¬æœºæ—¶é—´ COST(ms) æ–¹æ³•æ‰§è¡Œçš„è€—æ—¶ IS-RET æ–¹æ³•æ˜¯å¦ä»¥æ­£å¸¸è¿”å›çš„å½¢å¼ç»“æŸ IS-EXP æ–¹æ³•æ˜¯å¦ä»¥æŠ›å¼‚å¸¸çš„å½¢å¼ç»“æŸ OBJECT æ‰§è¡Œå¯¹è±¡çš„hashCode()ï¼Œæ³¨æ„ï¼Œæ›¾ç»æœ‰äººè¯¯è®¤ä¸ºæ˜¯å¯¹è±¡åœ¨ JVM ä¸­çš„å†…å­˜åœ°å€ï¼Œä½†å¾ˆé—æ†¾ä»–ä¸æ˜¯ã€‚ä½†ä»–èƒ½å¸®åŠ©ä½ ç®€å•çš„æ ‡è®°å½“å‰æ‰§è¡Œæ–¹æ³•çš„ç±»å®ä½“ CLASS æ‰§è¡Œçš„ç±»å METHOD æ‰§è¡Œçš„æ–¹æ³•å tracetrace å‘½ä»¤èƒ½ä¸»åŠ¨æœç´¢ class-patternï¼method-pattern å¯¹åº”çš„æ–¹æ³•è°ƒç”¨è·¯å¾„ï¼Œæ¸²æŸ“å’Œç»Ÿè®¡æ•´ä¸ªè°ƒç”¨é“¾è·¯ä¸Šçš„æ‰€æœ‰æ€§èƒ½å¼€é”€å’Œè¿½è¸ªè°ƒç”¨é“¾è·¯ã€‚ å‚æ•°è¯´æ˜ å‚æ•°åç§° å‚æ•°è¯´æ˜ class-pattern ç±»åè¡¨è¾¾å¼åŒ¹é… method-pattern æ–¹æ³•åè¡¨è¾¾å¼åŒ¹é… condition-express æ¡ä»¶è¡¨è¾¾å¼ [E] å¼€å¯æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œé»˜è®¤ä¸ºé€šé…ç¬¦åŒ¹é… [n:] å‘½ä»¤æ‰§è¡Œæ¬¡æ•° #cost æ–¹æ³•æ‰§è¡Œè€—æ—¶ trace demo.MathGame run -n 10 &#39;#cost &gt; 10&#39; watchè®©ä½ èƒ½æ–¹ä¾¿çš„è§‚å¯Ÿåˆ°æŒ‡å®šå‡½æ•°çš„è°ƒç”¨æƒ…å†µã€‚èƒ½è§‚å¯Ÿåˆ°çš„èŒƒå›´ä¸ºï¼šè¿”å›å€¼ã€æŠ›å‡ºå¼‚å¸¸ã€å…¥å‚ï¼Œé€šè¿‡ç¼–å†™ OGNL è¡¨è¾¾å¼è¿›è¡Œå¯¹åº”å˜é‡çš„æŸ¥çœ‹ã€‚ å‚æ•°è¯´æ˜ å‚æ•°åç§° å‚æ•°è¯´æ˜ class-pattern ç±»åè¡¨è¾¾å¼åŒ¹é… method-pattern å‡½æ•°åè¡¨è¾¾å¼åŒ¹é… express è§‚å¯Ÿè¡¨è¾¾å¼ï¼Œé»˜è®¤å€¼ï¼š&#123;params, target, returnObj&#125; condition-express æ¡ä»¶è¡¨è¾¾å¼ [b] åœ¨å‡½æ•°è°ƒç”¨ä¹‹å‰è§‚å¯Ÿ [e] åœ¨å‡½æ•°å¼‚å¸¸ä¹‹åè§‚å¯Ÿ [s] åœ¨å‡½æ•°è¿”å›ä¹‹åè§‚å¯Ÿ [f] åœ¨å‡½æ•°ç»“æŸä¹‹å(æ­£å¸¸è¿”å›å’Œå¼‚å¸¸è¿”å›)è§‚å¯Ÿ [E] å¼€å¯æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œé»˜è®¤ä¸ºé€šé…ç¬¦åŒ¹é… [x:] æŒ‡å®šè¾“å‡ºç»“æœçš„å±æ€§éå†æ·±åº¦ï¼Œé»˜è®¤ä¸º 1ï¼Œæœ€å¤§å€¼æ˜¯ 4 watch demo.MathGame primeFactors -x 2 dashboardå½“è¿è¡Œåœ¨ Ali-tomcat æ—¶ï¼Œä¼šæ˜¾ç¤ºå½“å‰ tomcat çš„å®æ—¶ä¿¡æ¯ï¼Œå¦‚ HTTP è¯·æ±‚çš„ qps, rt, é”™è¯¯æ•°, çº¿ç¨‹æ± ä¿¡æ¯ç­‰ç­‰ã€‚ å‚æ•°è¯´æ˜ å‚æ•°åç§° å‚æ•°è¯´æ˜ [i:] åˆ·æ–°å®æ—¶æ•°æ®çš„æ—¶é—´é—´éš” (ms)ï¼Œé»˜è®¤ 5000ms [n:] åˆ·æ–°å®æ—¶æ•°æ®çš„æ¬¡æ•°","categories":[{"name":"java","slug":"java","permalink":"https://huangxingx.github.io/categories/java/"}],"tags":[{"name":"java","slug":"java","permalink":"https://huangxingx.github.io/tags/java/"}]},{"title":"git config","slug":"git/git-config","date":"2022-11-01T07:43:04.000Z","updated":"2022-11-01T02:58:42.349Z","comments":true,"path":"2022/11/01/git/git-config/","link":"","permalink":"https://huangxingx.github.io/2022/11/01/git/git-config/","excerpt":"","text":"git configå®˜æ–¹æ–‡æ¡£åœ°å€ï¼šhttps://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%88%9D%E6%AC%A1%E8%BF%90%E8%A1%8C-Git-%E5%89%8D%E7%9A%84%E9%85%8D%E7%BD%AEè‡ªå®šä¹‰ Git - é…ç½® Git: https://git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-%E9%85%8D%E7%BD%AE-Git ç”¨æˆ·ä¿¡æ¯å®‰è£…å®Œ Git ä¹‹åï¼Œè¦åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯è®¾ç½®ä½ çš„ç”¨æˆ·åå’Œé‚®ä»¶åœ°å€ã€‚ è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼Œå› ä¸ºæ¯ä¸€ä¸ª Git æäº¤éƒ½ä¼šä½¿ç”¨è¿™äº›ä¿¡æ¯ï¼Œå®ƒä»¬ä¼šå†™å…¥åˆ°ä½ çš„æ¯ä¸€æ¬¡æäº¤ä¸­ï¼Œä¸å¯æ›´æ”¹ï¼š $ git config --global user.name &quot;Joemuhuang&quot; $ git config --global user.email &quot;Joemuhuang@tencent.com` æŸ¥çœ‹ä¸åŒçº§åˆ«çš„é…ç½®æ–‡ä»¶#æŸ¥çœ‹ç³»ç»Ÿconfig git config --system --list #æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼ˆglobalï¼‰é…ç½® git config --global --list #æŸ¥çœ‹å½“å‰ä»“åº“é…ç½®ä¿¡æ¯ git config --local --list æ£€æŸ¥é…ç½®ä¿¡æ¯git config --list ç”Ÿæˆ sshkeyssh-keygen -t rsa -C &quot;youxiang@tencent.com&quot; éªŒè¯å’Œä¿®æ”¹ssh -T git@github.com","categories":[{"name":"git","slug":"git","permalink":"https://huangxingx.github.io/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://huangxingx.github.io/tags/git/"}]},{"title":"docker å¸¸ç”¨å‘½ä»¤","slug":"docker/docker-å¸¸ç”¨å‘½ä»¤","date":"2022-11-01T07:43:04.000Z","updated":"2022-11-01T03:00:04.096Z","comments":true,"path":"2022/11/01/docker/docker-å¸¸ç”¨å‘½ä»¤/","link":"","permalink":"https://huangxingx.github.io/2022/11/01/docker/docker-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","excerpt":"","text":"docker å¸¸ç”¨å‘½ä»¤é•œåƒå¯¼å…¥å¯¼å‡ºå¯¼å‡ºdocker save imageid &gt; filename.tar imagesname ä¸¾ä¾‹ docker save 4e8c7ea9f913 &gt; pulsar-manager_0.2.0.tar apachepulsar/pulsar-manager å¯¼å…¥docker load [OPTIONS] OPTIONS è¯´æ˜ï¼š â€“input , -i : æŒ‡å®šå¯¼å…¥çš„æ–‡ä»¶ï¼Œä»£æ›¿ STDINã€‚â€“quiet , -q : ç²¾ç®€è¾“å‡ºä¿¡æ¯ã€‚","categories":[{"name":"docker","slug":"docker","permalink":"https://huangxingx.github.io/categories/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://huangxingx.github.io/tags/docker/"}]},{"title":"git ç»Ÿè®¡å‘½ä»¤","slug":"git/git-ç»Ÿè®¡å‘½ä»¤","date":"2022-11-01T07:43:04.000Z","updated":"2022-11-01T02:55:47.605Z","comments":true,"path":"2022/11/01/git/git-ç»Ÿè®¡å‘½ä»¤/","link":"","permalink":"https://huangxingx.github.io/2022/11/01/git/git-%E7%BB%9F%E8%AE%A1%E5%91%BD%E4%BB%A4/","excerpt":"","text":"Git ç»Ÿè®¡å‘½ä»¤ç»Ÿè®¡æŸäººçš„ä»£ç æäº¤é‡ï¼ŒåŒ…æ‹¬å¢åŠ ï¼Œåˆ é™¤git log --author=&quot;$(git config --get user.name)&quot; --pretty=tformat: --numstat | gawk &#39;&#123; add += $1 ; subs += $2 ; loc += $1 - $2 &#125; END &#123; printf &quot;added lines: %s removed lines : %s total lines: %s\\n&quot;,add,subs,loc &#125;&#39; ä»“åº“æäº¤è€…æ’åå‰ 5ï¼ˆå¦‚æœçœ‹å…¨éƒ¨ï¼Œå»æ‰ head ç®¡é“å³å¯ï¼‰git log --pretty=&#39;%aN&#39; | sort | uniq -c | sort -k1 -n -r | head -n 5 ä»“åº“æäº¤è€…ï¼ˆé‚®ç®±ï¼‰æ’åå‰ 5ï¼šè¿™ä¸ªç»Ÿè®¡å¯èƒ½ä¸ä¼šå¤ªå‡†ï¼Œå› ä¸ºå¾ˆå¤šäººæœ‰ä¸åŒçš„é‚®ç®±ï¼Œä½†ä¼šä½¿ç”¨ç›¸åŒçš„åå­—git log --pretty=format:%ae | gawk -- &#39;&#123; ++c[$0]; &#125; END &#123; for(cc in c) printf &quot;%5d %s\\n&quot;,c[cc],cc; &#125;&#39; | sort -u -n -r | head -n 5 è´¡çŒ®è€…ç»Ÿè®¡ï¼šgit log --pretty=&#39;%aN&#39; | sort -u | wc -l æäº¤æ•°ç»Ÿè®¡ï¼šgit log --oneline | wc -l æ·»åŠ æˆ–ä¿®æ”¹çš„ä»£ç è¡Œæ•°ï¼šgit log --stat|perl -ne &#39;END &#123; print $c &#125; $c += $1 if /(\\d+) insertions/&#39; git log å‚æ•°è¯´æ˜ï¼š--author æŒ‡å®šä½œè€… --stat æ˜¾ç¤ºæ¯æ¬¡æ›´æ–°çš„æ–‡ä»¶ä¿®æ”¹ç»Ÿè®¡ä¿¡æ¯ï¼Œä¼šåˆ—å‡ºå…·ä½“æ–‡ä»¶åˆ—è¡¨ --shortstat ç»Ÿè®¡æ¯ä¸ªcommit çš„æ–‡ä»¶ä¿®æ”¹è¡Œæ•°ï¼ŒåŒ…æ‹¬å¢åŠ ï¼Œåˆ é™¤ï¼Œä½†ä¸åˆ—å‡ºæ–‡ä»¶åˆ—è¡¨ï¼š --numstat ç»Ÿè®¡æ¯ä¸ªcommit çš„æ–‡ä»¶ä¿®æ”¹è¡Œæ•°ï¼ŒåŒ…æ‹¬å¢åŠ ï¼Œåˆ é™¤ï¼Œå¹¶åˆ—å‡ºæ–‡ä»¶åˆ—è¡¨ï¼š -p é€‰é¡¹å±•å¼€æ˜¾ç¤ºæ¯æ¬¡æäº¤çš„å†…å®¹å·®å¼‚ï¼Œç”¨ -2 åˆ™ä»…æ˜¾ç¤ºæœ€è¿‘çš„ä¸¤æ¬¡æ›´æ–° ä¾‹å¦‚ï¼šgit log -p -2 --name-only ä»…åœ¨æäº¤ä¿¡æ¯åæ˜¾ç¤ºå·²ä¿®æ”¹çš„æ–‡ä»¶æ¸…å• --name-status æ˜¾ç¤ºæ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤çš„æ–‡ä»¶æ¸…å• --abbrev-commit ä»…æ˜¾ç¤º SHA-1 çš„å‰å‡ ä¸ªå­—ç¬¦ï¼Œè€Œéæ‰€æœ‰çš„ 40 ä¸ªå­—ç¬¦ --relative-date ä½¿ç”¨è¾ƒçŸ­çš„ç›¸å¯¹æ—¶é—´æ˜¾ç¤ºï¼ˆæ¯”å¦‚ï¼Œâ€œ2 weeks agoâ€ï¼‰ --graph æ˜¾ç¤º ASCII å›¾å½¢è¡¨ç¤ºçš„åˆ†æ”¯åˆå¹¶å†å² --pretty ä½¿ç”¨å…¶ä»–æ ¼å¼æ˜¾ç¤ºå†å²æäº¤ä¿¡æ¯ã€‚å¯ç”¨çš„é€‰é¡¹åŒ…æ‹¬ onelineï¼Œshortï¼Œfullï¼Œfuller å’Œ formatï¼ˆåè·ŸæŒ‡å®šæ ¼å¼ï¼‰ ä¾‹å¦‚ï¼š git log --pretty=oneline ; git log --pretty=short ; git log --pretty=full ; git log --pretty=fuller --pretty=tformat: å¯ä»¥å®šåˆ¶è¦æ˜¾ç¤ºçš„è®°å½•æ ¼å¼ï¼Œè¿™æ ·çš„è¾“å‡ºä¾¿äºåæœŸç¼–ç¨‹æå–åˆ†æ ä¾‹å¦‚ï¼šgit log --pretty=format:&quot;&quot;%h - %an, %ar : %s&quot;&quot; ä¸‹é¢åˆ—å‡ºäº†å¸¸ç”¨çš„æ ¼å¼å ä½ç¬¦å†™æ³•åŠå…¶ä»£è¡¨çš„æ„ä¹‰ã€‚ é€‰é¡¹ è¯´æ˜ %H æäº¤å¯¹è±¡ï¼ˆcommitï¼‰çš„å®Œæ•´å“ˆå¸Œå­—ä¸² %h æäº¤å¯¹è±¡çš„ç®€çŸ­å“ˆå¸Œå­—ä¸² %T æ ‘å¯¹è±¡ï¼ˆtreeï¼‰çš„å®Œæ•´å“ˆå¸Œå­—ä¸² %t æ ‘å¯¹è±¡çš„ç®€çŸ­å“ˆå¸Œå­—ä¸² %P çˆ¶å¯¹è±¡ï¼ˆparentï¼‰çš„å®Œæ•´å“ˆå¸Œå­—ä¸² %p çˆ¶å¯¹è±¡çš„ç®€çŸ­å“ˆå¸Œå­—ä¸² %an ä½œè€…ï¼ˆauthorï¼‰çš„åå­— %ae ä½œè€…çš„ç”µå­é‚®ä»¶åœ°å€ %ad ä½œè€…ä¿®è®¢æ—¥æœŸï¼ˆå¯ä»¥ç”¨ -date= é€‰é¡¹å®šåˆ¶æ ¼å¼ï¼‰ %ar ä½œè€…ä¿®è®¢æ—¥æœŸï¼ŒæŒ‰å¤šä¹…ä»¥å‰çš„æ–¹å¼æ˜¾ç¤º %cn æäº¤è€…(committer)çš„åå­— %ce æäº¤è€…çš„ç”µå­é‚®ä»¶åœ°å€ %cd æäº¤æ—¥æœŸ %cr æäº¤æ—¥æœŸï¼ŒæŒ‰å¤šä¹…ä»¥å‰çš„æ–¹å¼æ˜¾ç¤º %s æäº¤è¯´æ˜ --since é™åˆ¶æ˜¾ç¤ºè¾“å‡ºçš„èŒƒå›´ï¼Œ ä¾‹å¦‚ï¼š git log --since=2.weeks æ˜¾ç¤ºæœ€è¿‘ä¸¤å‘¨çš„æäº¤ é€‰é¡¹ è¯´æ˜ -(n) ä»…æ˜¾ç¤ºæœ€è¿‘çš„ n æ¡æäº¤ --since, --after ä»…æ˜¾ç¤ºæŒ‡å®šæ—¶é—´ä¹‹åçš„æäº¤ã€‚ --until, --before ä»…æ˜¾ç¤ºæŒ‡å®šæ—¶é—´ä¹‹å‰çš„æäº¤ã€‚ --author ä»…æ˜¾ç¤ºæŒ‡å®šä½œè€…ç›¸å…³çš„æäº¤ã€‚ --committer ä»…æ˜¾ç¤ºæŒ‡å®šæäº¤è€…ç›¸å…³çš„æäº¤ã€‚ ä¸€äº›ä¾‹å­ï¼š git log --until=1.minute.ago // ä¸€åˆ†é’Ÿä¹‹å‰çš„æ‰€æœ‰ log git log --since=1.day.ago //ä¸€å¤©ä¹‹å†…çš„log git log --since=1.hour.ago //ä¸€ä¸ªå°æ—¶ä¹‹å†…çš„ log git log --since=`.month.ago --until=2.weeks.ago //ä¸€ä¸ªæœˆä¹‹å‰åˆ°åŠä¸ªæœˆä¹‹å‰çš„log git log --since ==2013-08.01 --until=2013-09-07 //æŸä¸ªæ—¶é—´æ®µçš„ log git blameçœ‹çœ‹æŸä¸€ä¸ªæ–‡ä»¶çš„ç›¸å…³å†å²è®°å½•ä¾‹å¦‚ï¼š git blame index.html --date short","categories":[{"name":"git","slug":"git","permalink":"https://huangxingx.github.io/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://huangxingx.github.io/tags/git/"}]},{"title":"gin éªŒè¯å™¨","slug":"golang/gin éªŒè¯å™¨","date":"2022-11-01T07:43:04.000Z","updated":"2022-11-01T03:05:14.547Z","comments":true,"path":"2022/11/01/golang/gin éªŒè¯å™¨/","link":"","permalink":"https://huangxingx.github.io/2022/11/01/golang/gin%20%E9%AA%8C%E8%AF%81%E5%99%A8/","excerpt":"","text":"[toc] å‰è¨€ginçš„éªŒè¯å™¨åº•å±‚ä½¿ç”¨çš„æ˜¯ validator åº“å®ç°çš„ï¼Œæ•…ginéªŒè¯å™¨å¯ä»¥ä½¿ç”¨validatoråº“ä¸­çš„æ‰€æœ‰åŠŸèƒ½ æ‰€æœ‰æ ‡ç­¾ ç¿»è¯‘å™¨ è‡ªå®šä¹‰æ ¡éªŒå™¨ å…¶ä»–ï¼ˆä¸ä¸€ä¸€åˆ—ä¸¾ï¼‰ ä¸åŒçš„æ˜¯ginä½¿ç”¨çš„Tag ä¸º bindingï¼Œè€Œvalidatoråº“ä½¿ç”¨çš„æ˜¯ validateï¼›ginä¸­åœ¨åˆå§‹åŒ–validateæ—¶é€šè¿‡validate.SetTagName(â€œbindingâ€)è®¾ç½®æ ‡ç­¾ func (v *defaultValidator) lazyinit() &#123; v.once.Do(func() &#123; v.validate = validator.New() v.validate.SetTagName(&quot;binding&quot;) &#125;) &#125; æœ¬æ–‡ä¸­ gin ç‰ˆæœ¬ä¸º v1.6.3, validatorç‰ˆæœ¬ä¸º v10 gin validator validator åº“å­—æ®µgin ä½¿ç”¨æ—¶æŠŠ validate tag æ”¹ä¸º binding å³å¯ å­—æ®µ æè¿° ä¾‹å­ required å¿…å¡« Fieldæˆ–Struct validate:â€requiredâ€ omitempty ç©ºæ—¶å¿½ç•¥ Fieldæˆ–Struct validate:â€omitemptyâ€ len é•¿åº¦ Field validate:â€len=0â€ eq ç­‰äº Field validate:â€eq=0â€ gt å¤§äº Field validate:â€gt=0â€ gte å¤§äºç­‰äº Field validate:â€gte=0â€ lt å°äº Field validate:â€lt=0â€ lte å°äºç­‰äº Field validate:â€lte=0â€ eqfield åŒä¸€ç»“æ„ä½“å­—æ®µç›¸ç­‰ Field validate:â€eqfield=Field2â€ nefield åŒä¸€ç»“æ„ä½“å­—æ®µä¸ç›¸ç­‰ Field validate:â€nefield=Field2â€ gtfield å¤§äºåŒä¸€ç»“æ„ä½“å­—æ®µ Field validate:â€gtfield=Field2â€ gtefield å¤§äºç­‰äºåŒä¸€ç»“æ„ä½“å­—æ®µ Field validate:â€gtefield=Field2â€ ltfield å°äºåŒä¸€ç»“æ„ä½“å­—æ®µ Field validate:â€ltfield=Field2â€ ltefield å°äºç­‰äºåŒä¸€ç»“æ„ä½“å­—æ®µ Field validate:â€ltefield=Field2â€ eqcsfield è·¨ä¸åŒç»“æ„ä½“å­—æ®µç›¸ç­‰ Struct1.Field validate:â€eqcsfield=Struct2.Field2â€ necsfield è·¨ä¸åŒç»“æ„ä½“å­—æ®µä¸ç›¸ç­‰ Struct1.Field validate:â€necsfield=Struct2.Field2â€ gtcsfield å¤§äºè·¨ä¸åŒç»“æ„ä½“å­—æ®µ Struct1.Field validate:â€gtcsfield=Struct2.Field2â€ gtecsfield å¤§äºç­‰äºè·¨ä¸åŒç»“æ„ä½“å­—æ®µ Struct1.Field validate:â€gtecsfield=Struct2.Field2â€ ltcsfield å°äºè·¨ä¸åŒç»“æ„ä½“å­—æ®µ Struct1.Field validate:â€ltcsfield=Struct2.Field2â€ ltecsfield å°äºç­‰äºè·¨ä¸åŒç»“æ„ä½“å­—æ®µ Struct1.Field validate:â€ltecsfield=Struct2.Field2â€ min æœ€å¤§å€¼ Field validate:â€min=1â€ max æœ€å°å€¼ Field validate:â€max=2â€ structonly ä»…éªŒè¯ç»“æ„ä½“ï¼Œä¸éªŒè¯ä»»ä½•ç»“æ„ä½“å­—æ®µ Struct validate:â€structonlyâ€ nostructlevel ä¸è¿è¡Œä»»ä½•ç»“æ„çº§åˆ«çš„éªŒè¯ Struct validate:â€nostructlevelâ€ dive å‘ä¸‹å»¶ä¼¸éªŒè¯ï¼Œå¤šå±‚å‘ä¸‹éœ€è¦å¤šä¸ªdiveæ ‡è®° [][]string validate:â€gt=0,dive,len=1,dive,requiredâ€ dive Keys&amp; EndKeys ä¸diveåŒæ—¶ä½¿ç”¨ï¼Œç”¨äºå¯¹mapå¯¹è±¡çš„é”®çš„å’Œå€¼çš„éªŒè¯ï¼Œkeysä¸ºé”®ï¼Œendkeysä¸ºå€¼ map[string]string validate :â€gt=0,dive,keys,eq=1 required_with å…¶ä»–å­—æ®µå…¶ä¸­ä¸€ä¸ªä¸ä¸ºç©ºä¸”å½“å‰å­—æ®µä¸ä¸ºç©º Field validate:â€required_with=Field1 Field2â€ required_with_all å…¶ä»–æ‰€æœ‰å­—æ®µä¸ä¸ºç©ºä¸”å½“å‰å­—æ®µä¸ä¸ºç©º Field validate:â€required_with_all=Field1 Field2â€ required_without å…¶ä»–å­—æ®µå…¶ä¸­ä¸€ä¸ªä¸ºç©ºä¸”å½“å‰å­—æ®µä¸ä¸ºç©º Field `validate:â€required_without=Field1 Field2â€ required_without_all å…¶ä»–æ‰€æœ‰å­—æ®µä¸ºç©ºä¸”å½“å‰å­—æ®µä¸ä¸ºç©º Field validate:â€required_without_all=Field1 Field2â€ isdefault æ˜¯é»˜è®¤å€¼ Field validate:â€isdefault=0â€ oneof å…¶ä¸­ä¹‹ä¸€ Field validate:â€oneof=5 7 9â€ containsfield å­—æ®µåŒ…å«å¦ä¸€ä¸ªå­—æ®µ Field validate:â€containsfield=Field2â€ excludesfield å­—æ®µä¸åŒ…å«å¦ä¸€ä¸ªå­—æ®µ Field validate:â€excludesfield=Field2â€ unique æ˜¯å¦å”¯ä¸€ï¼Œé€šå¸¸ç”¨äºåˆ‡ç‰‡æˆ–ç»“æ„ä½“ Field validate:â€uniqueâ€ alphanum å­—ç¬¦ä¸²å€¼æ˜¯å¦åªåŒ…å« ASCII å­—æ¯æ•°å­—å­—ç¬¦ Field validate:â€alphanumâ€ alphaunicode å­—ç¬¦ä¸²å€¼æ˜¯å¦åªåŒ…å« unicode å­—ç¬¦ Field validate:â€alphaunicodeâ€ alphanumunicode å­—ç¬¦ä¸²å€¼æ˜¯å¦åªåŒ…å« unicode å­—æ¯æ•°å­—å­—ç¬¦ Field validate:â€alphanumunicodeâ€ numeric å­—ç¬¦ä¸²å€¼æ˜¯å¦åŒ…å«åŸºæœ¬çš„æ•°å€¼ Field validate:â€numericâ€ hexadecimal å­—ç¬¦ä¸²å€¼æ˜¯å¦åŒ…å«æœ‰æ•ˆçš„åå…­è¿›åˆ¶ Field validate:â€hexadecimalâ€ hexcolor å­—ç¬¦ä¸²å€¼æ˜¯å¦åŒ…å«æœ‰æ•ˆçš„åå…­è¿›åˆ¶é¢œè‰² Field validate:â€hexcolorâ€ lowercase ç¬¦ä¸²å€¼æ˜¯å¦åªåŒ…å«å°å†™å­—ç¬¦ Field validate:â€lowercaseâ€ uppercase ç¬¦ä¸²å€¼æ˜¯å¦åªåŒ…å«å¤§å†™å­—ç¬¦ Field validate:â€uppercaseâ€ email å­—ç¬¦ä¸²å€¼åŒ…å«ä¸€ä¸ªæœ‰æ•ˆçš„ç”µå­é‚®ä»¶ Field validate:â€emailâ€ json å­—ç¬¦ä¸²å€¼æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ JSON Field validate:â€jsonâ€ file ç¬¦ä¸²å€¼æ˜¯å¦åŒ…å«æœ‰æ•ˆçš„æ–‡ä»¶è·¯å¾„ï¼Œä»¥åŠè¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨äºè®¡ç®—æœºä¸Š Field validate:â€fileâ€ url ç¬¦ä¸²å€¼æ˜¯å¦åŒ…å«æœ‰æ•ˆçš„ url Field validate:â€urlâ€ uri ç¬¦ä¸²å€¼æ˜¯å¦åŒ…å«æœ‰æ•ˆçš„ uri Field validate:â€uriâ€ base64 å­—ç¬¦ä¸²å€¼æ˜¯å¦åŒ…å«æœ‰æ•ˆçš„ base64å€¼ Field validate:â€base64â€ contains å­—ç¬¦ä¸²å€¼åŒ…å«å­å­—ç¬¦ä¸²å€¼ Field validate:â€contains=@â€ containsany å­—ç¬¦ä¸²å€¼åŒ…å«å­å­—ç¬¦ä¸²å€¼ä¸­çš„ä»»ä½•å­—ç¬¦ Field validate:â€containsany=abcâ€ containsrune å­—ç¬¦ä¸²å€¼åŒ…å«æä¾›çš„ç‰¹æ®Šç¬¦å·å€¼ Field validate:â€containsrune=â˜¢â€ excludes å­—ç¬¦ä¸²å€¼ä¸åŒ…å«å­å­—ç¬¦ä¸²å€¼ Field validate:â€excludes=@â€ excludesall å­—ç¬¦ä¸²å€¼ä¸åŒ…å«ä»»ä½•å­å­—ç¬¦ä¸²å€¼ Field validate:â€excludesall=abcâ€ excludesrune å­—ç¬¦ä¸²å€¼ä¸åŒ…å«æä¾›çš„ç‰¹æ®Šç¬¦å·å€¼ Field validate:â€containsrune=â˜¢â€ startswith å­—ç¬¦ä¸²ä»¥æä¾›çš„å­—ç¬¦ä¸²å€¼å¼€å§‹ Field validate:â€startswith=abcâ€ endswith å­—ç¬¦ä¸²ä»¥æä¾›çš„å­—ç¬¦ä¸²å€¼ç»“æŸ Field validate:â€endswith=abcâ€ ip å­—ç¬¦ä¸²å€¼æ˜¯å¦åŒ…å«æœ‰æ•ˆçš„ IP åœ°å€ Field validate:â€ipâ€ ipv4 å­—ç¬¦ä¸²å€¼æ˜¯å¦åŒ…å«æœ‰æ•ˆçš„ ipv4åœ°å€ Field validate:â€ipv4â€ datetime å­—ç¬¦ä¸²å€¼æ˜¯å¦åŒ…å«æœ‰æ•ˆçš„ æ—¥æœŸ Field validate:â€datetimeâ€ å¸¸ç”¨éªŒè¯Tagtype Test struct &#123; ID int `binding:&quot;required&quot;` //æ•°å­—ç¡®ä¿ä¸ä¸º0 Name string `binding:&quot;required,min=1,max=8&quot;` //å­—ç¬¦ä¸²ç¡®ä¿ä¸ä¸º&quot;&quot;ï¼Œä¸”é•¿åº¦ &gt;=1 &amp;&amp; &lt;=8 ï¼ˆmin=1,max=8ç­‰äºgt=0,lt=9ï¼‰ Value string `binding:&quot;required,gte=1,lte=8&quot;` //å­—ç¬¦ä¸²ç¡®ä¿ä¸ä¸º&quot;&quot;ï¼Œä¸”é•¿åº¦ &gt;=1 &amp;&amp; &lt;=8 Status int `binding:&quot;min=1,max=10&quot;` //æœ€å°ä¸º0ï¼Œæœ€å¤§ä¸º10ï¼ˆmin=0,max=10ç­‰äºgt=0,lt=11ï¼‰ PhoneNumber string `binding:&quot;required,len=11&quot;` //ä¸ä¸º&quot;&quot;ä¸”é•¿åº¦ä¸º11 Time string `binding:&quot;datetime=2006-01-02&quot;` //å¿…é¡»å¦‚2006-01-02çš„datetimeæ ¼å¼ Color string `binding:&quot;oneof=red green&quot;` //æ˜¯èƒ½æ˜¯redæˆ–è€…green Size int `binding:&quot;oneof=37 39 41&quot;` //æ˜¯èƒ½æ˜¯37æˆ–è€…39æˆ–è€…41 Email string `binding:&quot;email&quot;` //å¿…é¡»é‚®ä»¶æ ¼å¼ JSON string `binding:&quot;json&quot;` //å¿…é¡»jsonæ ¼å¼ URL string `binding:&quot;url&quot;` //å¿…é¡»urlæ ¼å¼ UUID string `binding:&quot;uuid&quot;` //å¿…é¡»uuidæ ¼å¼ &#125; è‡ªå®šä¹‰éªŒè¯å™¨1package main import ( &quot;fmt&quot; &quot;net/http&quot; &quot;time&quot; &quot;github.com/go-playground/validator/v10&quot; &quot;github.com/gin-gonic/gin&quot; &quot;github.com/gin-gonic/gin/binding&quot; ) // Booking contains binded and validated data. type Booking struct &#123; CheckIn time.Time `form:&quot;check_in&quot; binding:&quot;required,bookabledate&quot; time_format:&quot;2006-01-02&quot;` CheckOut time.Time `form:&quot;check_out&quot; binding:&quot;required,gtfield=CheckIn&quot; time_format:&quot;2006-01-02&quot;` &#125; //validator v9ä»¥ä¸Šå†™æ³• func bookableDate(fl validator.FieldLevel) bool &#123; if date, ok := fl.Field().Interface().(time.Time); ok &#123; today := time.Now() fmt.Println(&quot;date:&quot;, date) if date.Unix() &gt; today.Unix() &#123; fmt.Println(&quot;date unix ï¼š&quot;, date.Unix()) return true &#125; &#125; return false &#125; //validator v8å†™æ³• //func bookableDate( // v *validator.Validate, topStruct reflect.Value, currentStructOrField reflect.Value, // field reflect.Value, fieldType reflect.Type, fieldKind reflect.Kind, param string, //) bool &#123; // if date, ok := field.Interface().(time.Time); ok &#123; // today := time.Now() // if date.Unix()&gt;today.Unix()&#123; // return true // &#125; // &#125; // return false //&#125; func main() &#123; route := gin.Default() if v, ok := binding.Validator.Engine().(*validator.Validate); ok &#123; _ = v.RegisterValidation(&quot;bookabledate&quot;, bookableDate) &#125; route.GET(&quot;/bookable&quot;, getBookable) route.Run() &#125; func getBookable(c *gin.Context) &#123; var b Booking if err := c.ShouldBindWith(&amp;b, binding.Query); err != nil &#123; c.JSON(http.StatusBadRequest, gin.H&#123;&quot;error&quot;: err.Error()&#125;) &#125; else &#123; c.JSON(http.StatusOK, gin.H&#123;&quot;message&quot;: &quot;ok&quot;, &quot;booking&quot;: b&#125;) &#125; &#125; éªŒè¯å™¨è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯1åŸæœ‰çš„é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š &#123; &quot;message&quot;: &quot;Key: &#39;LoginRequest.Mobile&#39; Error:Field validation for &#39;Mobile&#39; failed on the &#39;required&#39; tag\\nKey: &#39;LoginRequest.Code&#39; Error:Field validation for &#39;Code&#39; failed on the &#39;required&#39; tag&quot; &#125; è¿™æ ·çš„æç¤ºä¿¡æ¯ä¸æ˜¯å¾ˆå‹å¥½, åœ¨ validator æ–‡æ¡£ä¸­ä¹Ÿè¯´æ˜äº†è¿™ä¸ªä¿¡æ¯åªæ˜¯ç”¨åœ¨å¼€å‘æ—¶è¿›è¡Œè°ƒè¯•ç”¨çš„. é‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆè¿”å›è‡ªå®šä¹‰çš„éªŒè¯æç¤ºå‘¢. å‚è€ƒ validator æ–‡æ¡£, æˆ‘æ˜¯è¿™æ ·æ¥å®ç°çš„. import ( &quot;gopkg.in/go-playground/validator.v8&quot; ) // ç»‘å®šæ¨¡å‹ type LoginRequest struct &#123; Mobile string `form:&quot;mobile&quot; json:&quot;mobile&quot; binding:&quot;required&quot;` Code string `form:&quot;code&quot; json:&quot;code&quot; binding:&quot;required&quot;` &#125; // ç»‘å®šæ¨¡å‹è·å–éªŒè¯é”™è¯¯çš„æ–¹æ³• func (r *LoginRequest) GetError (err validator.ValidationErrors) string &#123; // è¿™é‡Œçš„ &quot;LoginRequest.Mobile&quot; ç´¢å¼•å¯¹åº”çš„æ˜¯æ¨¡å‹çš„åç§°å’Œå­—æ®µ if val, exist := err[&quot;LoginRequest.Mobile&quot;]; exist &#123; if val.Field == &quot;Mobile&quot; &#123; switch val.Tag&#123; case &quot;required&quot;: return &quot;è¯·è¾“å…¥æ‰‹æœºå·ç &quot; &#125; &#125; &#125; if val, exist := err[&quot;LoginRequest.Code&quot;]; exist &#123; if val.Field == &quot;Code&quot; &#123; switch val.Tag&#123; case &quot;required&quot;: return &quot;è¯·è¾“å…¥éªŒè¯ç &quot; &#125; &#125; &#125; return &quot;å‚æ•°é”™è¯¯&quot; &#125; å¦‚ä½•ä½¿ç”¨æ¨¡å‹, ä»¥ç™»å½•æ–¹æ³•ä¸ºä¾‹ import ( &quot;github.com/gin-gonic/gin&quot; &quot;net/http&quot; &quot;gopkg.in/go-playground/validator.v8&quot; ) func Login(c *gin.Context) &#123; var loginRequest LoginRequest if err := c.ShouldBind(&amp;loginRequest); err == nil &#123; // å‚æ•°æ¥æ”¶æ­£ç¡®, è¿›è¡Œç™»å½•æ“ä½œ c.JSON(http.StatusOK, loginRequest) &#125;else&#123; // éªŒè¯é”™è¯¯ c.JSON(http.StatusUnprocessableEntity, gin.H&#123; &quot;message&quot;: loginRequest.GetError(err.(validator.ValidationErrors)), // æ³¨æ„è¿™é‡Œè¦å°† err è¿›è¡Œè½¬æ¢ &#125;) &#125; &#125; éªŒè¯å™¨è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯2ç›®å½•ç»“æ„ . â”œâ”€â”€ main.go â””â”€â”€ valid â””â”€â”€ valid.go valid.valid.go package valid import ( &quot;fmt&quot; &quot;regexp&quot; &quot;strings&quot; &quot;github.com/gin-gonic/gin/binding&quot; &quot;github.com/go-playground/locales/zh&quot; ut &quot;github.com/go-playground/universal-translator&quot; &quot;github.com/go-playground/validator/v10&quot; zh_translations &quot;github.com/go-playground/validator/v10/translations/zh&quot; ) var v *validator.Validate var Trans ut.Translator // åˆå§‹åŒ–ç¿»è¯‘å™¨ func InitTrans() (err error) &#123; //ä¿®æ”¹ginæ¡†æ¶ä¸­çš„Validatorå±æ€§ï¼Œå®ç°è‡ªå®šåˆ¶ if v, ok := binding.Validator.Engine().(*validator.Validate); ok &#123; //v.RegisterTagNameFunc(func(fld reflect.StructField) string &#123; // return fld.Tag.Get(&quot;comment&quot;) //field.Tag.Get(&quot;json&quot;) //&#125;) v.RegisterValidation(&quot;checkMobile&quot;, checkMobile) zhT := zh.New() //ä¸­æ–‡ç¿»è¯‘å™¨ // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¤‡ç”¨ï¼ˆfallbackï¼‰çš„è¯­è¨€ç¯å¢ƒ // åé¢çš„å‚æ•°æ˜¯åº”è¯¥æ”¯æŒçš„è¯­è¨€ç¯å¢ƒï¼ˆæ”¯æŒå¤šä¸ªï¼‰ // uni := ut.New(zhT, zhT) ä¹Ÿæ˜¯å¯ä»¥çš„ uni := ut.New(zhT, zhT) var ok bool // ä¹Ÿå¯ä»¥ä½¿ç”¨ uni.FindTranslator(...) ä¼ å…¥å¤šä¸ªlocaleè¿›è¡ŒæŸ¥æ‰¾ Trans, ok = uni.GetTranslator(&quot;zh&quot;) if !ok &#123; return fmt.Errorf(&quot;uni.GetTranslator(%s) failed&quot;, &quot;zh&quot;) &#125; zh_translations.RegisterDefaultTranslations(v, Trans) // æ·»åŠ é¢å¤–ç¿»è¯‘ _ = v.RegisterTranslation(&quot;checkMobile&quot;, Trans, func(ut ut.Translator) error &#123; return ut.Add(&quot;checkMobile&quot;, &quot;&#123;0&#125; ç”µè¯é”™è¯¯!&quot;, true) &#125;, func(ut ut.Translator, fe validator.FieldError) string &#123; t, _ := ut.T(&quot;checkMobile&quot;, fe.Field()) return t &#125;) &#125; return &#125; func checkMobile(fl validator.FieldLevel) bool &#123; ok, _ := regexp.MatchString(`^1[3-9][0-9]&#123;9&#125;$`, fl.Field().String()) return ok &#125; func ParseErr(errs validator.ValidationErrors) string &#123; var errList []string for _, e := range errs &#123; // can translate each error one at a time. errList = append(errList, e.Translate(Trans)) //errList = append(errList, e.Field()) &#125; return strings.Join(errList, &quot;|&quot;) &#125; main.go package main import ( &quot;net/http&quot; &quot;github.com/gin-gonic/gin&quot; &quot;github.com/go-playground/validator/v10&quot; &quot;my-test/gin-validator/valid&quot; ) func main() &#123; route := gin.Default() _ = valid.InitTrans() route.POST(&quot;/valid&quot;, validHandler) route.Run() &#125; type req struct &#123; Name string `json:&quot;name&quot; binding:&quot;required&quot;` Mobile string `json:&quot;mobile&quot; binding:&quot;checkMobile&quot;` Age int `json:&quot;mobile&quot; binding:&quot;gt=12,lt=100&quot; comment:&quot;å¹´é¾„å¤§äº12ï¼Œå°äº100&quot;` &#125; func validHandler(c *gin.Context) &#123; req := req&#123;&#125; err := c.ShouldBindJSON(&amp;req) if err != nil &#123; errmsg := err.Error() if e, ok := err.(validator.ValidationErrors); ok &#123; errmsg = valid.ParseErr(e) &#125; c.JSON(http.StatusOK, gin.H&#123; &quot;error&quot;: errmsg, &#125;) return &#125; c.JSON(http.StatusOK, &quot;Success&quot;) &#125; å‚è€ƒæ–‡æ¡£ gin - validator å‚æ•°æ ¡éªŒ ginæ¡†æ¶è‡ªå®šä¹‰éªŒè¯é”™è¯¯æç¤ºä¿¡æ¯ Golangä½¿ç”¨validatorè¿›è¡Œæ•°æ®æ ¡éªŒåŠè‡ªå®šä¹‰ç¿»è¯‘å™¨ validator Go doc","categories":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/categories/golang/"}],"tags":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/tags/golang/"},{"name":"gin","slug":"gin","permalink":"https://huangxingx.github.io/tags/gin/"}]},{"title":"golang å‡½æ•°è°ƒç”¨é“¾","slug":"golang/golang å‡½æ•°è°ƒç”¨é“¾","date":"2022-11-01T07:43:04.000Z","updated":"2022-11-01T03:06:02.582Z","comments":true,"path":"2022/11/01/golang/golang å‡½æ•°è°ƒç”¨é“¾/","link":"","permalink":"https://huangxingx.github.io/2022/11/01/golang/golang%20%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E9%93%BE/","excerpt":"","text":"[TOC] åˆ©ç”¨ defer å®ç°å‡½æ•°å‡ºå…¥å£çš„è·Ÿè¸ªè·Ÿè¸ªå‡½æ•°è°ƒç”¨ï¼Œæˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯è·Ÿè¸ªå‡½æ•°çš„å‡ºå…¥å£ï¼Œè€Œå®Œæˆè¿™ä¸€ä»»åŠ¡ï¼Œå½“ä»ä¸è®©çš„å°±æ˜¯åˆ©ç”¨defer func trace() func() &#123; pc, _, _, ok := runtime.Caller(1) if !ok &#123; panic(&quot;not found caller&quot;) &#125; fn := runtime.FuncForPC(pc) name := fn.Name() fmt.Printf(&quot;enter: %s\\n&quot;, name) return func() &#123; fmt.Printf(&quot;exit: %s\\n&quot;, name) &#125; &#125; func A1() &#123; defer trace()() B1() &#125; func B1() &#123; defer trace()() C1() &#125; func C1() &#123; defer trace()() D() &#125; func D() &#123; defer trace()() &#125; func main() &#123; A1() &#125; æˆ‘ä»¬çœ‹åˆ°ï¼šä»¥ A1 å®ç°ä¸ºä¾‹ï¼Œå½“æ‰§è¡Œæµæ¥å¸¦ defer è¯­å¥æ—¶ï¼Œé¦–å…ˆä¼šå¯¹ defer åé¢çš„è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ã€‚trace å‡½æ•°ä¼šæ‰§è¡Œï¼Œè¾“å‡ºå‡½æ•°å…¥å£ä¿¡æ¯ï¼Œå¹¶è¿”å›ä¸€ä¸ª â€œæ‰“å°å‡ºå£ä¿¡æ¯â€ çš„åŒ¿åå‡½æ•°ã€‚è¯¥å‡½æ•°åœ¨æ­¤å¹¶ä¸ä¼šæ‰§è¡Œï¼Œè€Œæ˜¯è¢«æ³¨å†Œåˆ°å‡½æ•° A1 çš„ defer å‡½æ•°æ ˆä¸­ï¼Œå¾… A1 å‡½æ•°æ‰§è¡Œç»“æŸåæ‰ä¼šè¢«å¼¹å‡ºæ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯åœ¨ A1 ç»“æŸåï¼Œä¼šæœ‰ä¸€æ¡å‡½æ•°çš„å‡ºå£ä¿¡æ¯è¢«è¾“å‡º $go build $./functrace-demo enter: main.A1 enter: main.B1 enter: main.C1 enter: main.D exit: main.D exit: main.C1 exit: main.B1 exit: main.A1","categories":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/categories/golang/"}],"tags":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/tags/golang/"}]},{"title":"golang æ­£åˆ™è¡¨è¾¾å¼å¸¸ç”¨","slug":"golang/golang æ­£åˆ™è¡¨è¾¾å¼å¸¸ç”¨","date":"2022-11-01T07:43:04.000Z","updated":"2022-11-01T03:06:50.461Z","comments":true,"path":"2022/11/01/golang/golang æ­£åˆ™è¡¨è¾¾å¼å¸¸ç”¨/","link":"","permalink":"https://huangxingx.github.io/2022/11/01/golang/golang%20%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%B8%B8%E7%94%A8/","excerpt":"","text":"regex_const.gopackage check import ( &quot;regexp&quot; )s const ( // ä¸­å›½å¤§é™†æ‰‹æœºå·ç æ­£åˆ™åŒ¹é…, ä¸æ˜¯é‚£ä¹ˆå¤ªç²¾ç»† // åªè¦æ˜¯ 13,14,15,17,18,19 å¼€å¤´çš„ 11 ä½æ•°å­—å°±è®¤ä¸ºæ˜¯ä¸­å›½æ‰‹æœºå· chinaMobilePattern = `^1[0-9]&#123;10&#125;$` // ç”¨æˆ·æ˜µç§°çš„æ­£åˆ™åŒ¹é…, åˆæ³•çš„å­—ç¬¦æœ‰ 0-9, A-Z, a-z, _, æ±‰å­— // å­—ç¬¦ &#39;_&#39; åªèƒ½å‡ºç°åœ¨ä¸­é—´ä¸”ä¸èƒ½é‡å¤, å¦‚ &quot;__&quot; nicknamePattern = `^[a-z0-9A-Z\\p&#123;Han&#125;]+(_[a-z0-9A-Z\\p&#123;Han&#125;]+)*?$` // ç”¨æˆ·åçš„æ­£åˆ™åŒ¹é…, åˆæ³•çš„å­—ç¬¦æœ‰ 0-9, A-Z, a-z, _ // ç¬¬ä¸€ä¸ªå­—æ¯ä¸èƒ½ä¸º _, 0-9 // æœ€åä¸€ä¸ªå­—æ¯ä¸èƒ½ä¸º _, ä¸” _ ä¸èƒ½è¿ç»­ usernamePattern = `^[a-zA-Z][a-z0-9A-Z]*(_[a-z0-9A-Z]+)*?$` // ç”µå­é‚®ç®±çš„æ­£åˆ™åŒ¹é…, è€ƒè™‘åˆ°å„ä¸ªç½‘ç«™çš„ mail è¦æ±‚ä¸ä¸€æ ·, è¿™é‡ŒåŒ¹é…æ¯”è¾ƒå®½æ¾ // é‚®ç®±ç”¨æˆ·åå¯ä»¥åŒ…å« 0-9, A-Z, a-z, -, _, . // å¼€å¤´å­—æ¯ä¸èƒ½æ˜¯ -, _, . // ç»“å°¾å­—æ¯ä¸èƒ½æ˜¯ -, _, . // -, _, . è¿™ä¸‰ä¸ªè¿æ¥å­—æ¯ä»»æ„ä¸¤ä¸ªä¸èƒ½è¿ç»­, å¦‚ä¸èƒ½å‡ºç° --, __, .., -_, -., _. // é‚®ç®±çš„åŸŸåå¯ä»¥åŒ…å« 0-9, A-Z, a-z, - // è¿æ¥å­—ç¬¦ - åªèƒ½å‡ºç°åœ¨ä¸­é—´, ä¸èƒ½è¿ç»­, å¦‚ä¸èƒ½ -- // æ”¯æŒå¤šçº§åŸŸå, x@y.z, x@y.z.w, x@x.y.z.w.e mailPattern = `^[a-z0-9A-Z]+([_\\-\\.][a-z0-9A-Z]+)*?@[a-z0-9A-Z]+([\\-\\.][a-z0-9A-Z]+)*?\\.[a-zA-Z]&#123;2,&#125;$` chineseNamePattern = &quot;^\\\\p&#123;Han&#125;+(\\u00B7\\\\p&#123;Han&#125;+)*?$&quot; chineseNameExPattern = &quot;^\\\\p&#123;Han&#125;+([\\u00B7\\u2022\\u2027\\u30FB\\u002E\\u0387\\u16EB\\u2219\\u22C5\\uFF65\\u05BC]\\\\p&#123;Han&#125;+)*?$&quot; ) var ( chinaMobileRegexp = regexp.MustCompile(chinaMobilePattern) nicknameRegexp = regexp.MustCompile(nicknamePattern) usernameRegexp = regexp.MustCompile(usernamePattern) mailRegexp = regexp.MustCompile(mailPattern) chineseNameRegexp = regexp.MustCompile(chineseNamePattern) chineseNameExRegexp = regexp.MustCompile(chineseNameExPattern) ) // æ£€éªŒæ˜¯å¦ä¸ºåˆæ³•çš„ä¸­å›½æ‰‹æœºå·, ä¸æ˜¯é‚£ä¹ˆå¤ªç²¾ç»† // åªè¦æ˜¯ 13,14,15,18 å¼€å¤´çš„ 11 ä½æ•°å­—å°±è®¤ä¸ºæ˜¯ä¸­å›½æ‰‹æœºå· func IsChinaMobile(b []byte) bool &#123; if len(b) != 11 &#123; return false &#125; return chinaMobileRegexp.Match(b) &#125; // åŒ func IsChinaMobile(b []byte) bool func IsChinaMobileString(s string) bool &#123; if len(s) != 11 &#123; return false &#125; return chinaMobileRegexp.MatchString(s) &#125; // æ£€éªŒæ˜¯å¦ä¸ºåˆæ³•çš„æ˜µç§°, åˆæ³•çš„å­—ç¬¦æœ‰ 0-9, A-Z, a-z, _, æ±‰å­— // å­—ç¬¦ &#39;_&#39; åªèƒ½å‡ºç°åœ¨ä¸­é—´ä¸”ä¸èƒ½é‡å¤, å¦‚ &quot;__&quot; func IsNickname(b []byte) bool &#123; if len(b) == 0 &#123; return false &#125; return nicknameRegexp.Match(b) &#125; // åŒ func IsNickname(b []byte) bool func IsNicknameString(s string) bool &#123; if len(s) == 0 &#123; return false &#125; return nicknameRegexp.MatchString(s) &#125; // æ£€éªŒæ˜¯å¦ä¸ºåˆæ³•çš„ç”¨æˆ·å, åˆæ³•çš„å­—ç¬¦æœ‰ 0-9, A-Z, a-z, _ // ç¬¬ä¸€ä¸ªå­—æ¯ä¸èƒ½ä¸º _, 0-9 // æœ€åä¸€ä¸ªå­—æ¯ä¸èƒ½ä¸º _, ä¸” _ ä¸èƒ½è¿ç»­ func IsUserName(b []byte) bool &#123; if len(b) == 0 &#123; return false &#125; return usernameRegexp.Match(b) &#125; // åŒ func IsName(b []byte) bool func IsUserNameString(s string) bool &#123; if len(s) == 0 &#123; return false &#125; return usernameRegexp.MatchString(s) &#125; // æ£€éªŒæ˜¯å¦ä¸ºåˆæ³•çš„ç”µå­é‚®ç®±, è€ƒè™‘åˆ°å„ä¸ªç½‘ç«™çš„ mail è¦æ±‚ä¸ä¸€æ ·, è¿™é‡ŒåŒ¹é…æ¯”è¾ƒå®½æ¾ // é‚®ç®±ç”¨æˆ·åå¯ä»¥åŒ…å« 0-9, A-Z, a-z, -, _, . // å¼€å¤´å­—æ¯ä¸èƒ½æ˜¯ -, _, . // ç»“å°¾å­—æ¯ä¸èƒ½æ˜¯ -, _, . // -, _, . è¿™ä¸‰ä¸ªè¿æ¥å­—æ¯ä»»æ„ä¸¤ä¸ªä¸èƒ½è¿ç»­, å¦‚ä¸èƒ½å‡ºç° --, __, .., -_, -., _. // é‚®ç®±çš„åŸŸåå¯ä»¥åŒ…å« 0-9, A-Z, a-z, - // è¿æ¥å­—ç¬¦ - åªèƒ½å‡ºç°åœ¨ä¸­é—´, ä¸èƒ½è¿ç»­, å¦‚ä¸èƒ½ -- // æ”¯æŒå¤šçº§åŸŸå, x@y.z, x@y.z.w, x@x.y.z.w.e func IsMail(b []byte) bool &#123; if len(b) &lt; 6 &#123; // x@x.xx return false &#125; return mailRegexp.Match(b) &#125; // åŒ func IsMail(b []byte) bool func IsMailString(s string) bool &#123; if len(s) &lt; 6 &#123; // x@x.xx return false &#125; return mailRegexp.MatchString(s) &#125; // IsChineseName æ£€éªŒæ˜¯å¦ä¸ºæœ‰æ•ˆçš„ä¸­æ–‡å§“å(æ¯”å¦‚ å¼ ä¸‰, æå››, å¼ ä¸‰Â·æå››) func IsChineseName(b []byte) bool &#123; return chineseNameRegexp.Match(b) &#125; // åŒ IsChineseName(b []byte) bool func IsChineseNameString(s string) bool &#123; return chineseNameRegexp.MatchString(s) &#125; // IsChineseNameEx æ£€éªŒæ˜¯å¦ä¸ºæœ‰æ•ˆçš„ä¸­æ–‡å§“å(æ¯”å¦‚ å¼ ä¸‰, æå››, å¼ ä¸‰Â·æå››), // ä¸»è¦åŠŸèƒ½å’Œ IsChineseName ç›¸åŒ, ä½†æ˜¯å¦‚æœå§“åä¸­åŒ…å«ä¸è§„èŒƒçš„é—´éš”ç¬¦, ä¼šè‡ªåŠ¨ä¿®æ­£ä¸ºæ­£ç¡®çš„é—´éš”ç¬¦ &#39;\\u00B7&#39;, å¹¶è¿”å›æ­£ç¡®çš„ç»“æœ. func IsChineseNameEx(b []byte) ([]byte, bool) &#123; if chineseNameRegexp.Match(b) &#123; return b, true &#125; if !chineseNameExRegexp.Match(b) &#123; return b, false &#125; list := []rune(string(b)) for i := 0; i &lt; len(list); i++ &#123; switch list[i] &#123; case &#39;\\u2022&#39;, &#39;\\u2027&#39;, &#39;\\u30FB&#39;, &#39;\\u002E&#39;, &#39;\\u0387&#39;, &#39;\\u16EB&#39;, &#39;\\u2219&#39;, &#39;\\u22C5&#39;, &#39;\\uFF65&#39;, &#39;\\u05BC&#39;: list[i] = &#39;\\u00B7&#39; &#125; &#125; return []byte(string(list)), true &#125; // åŒ IsChineseNameEx(b []byte) ([]byte, bool) func IsChineseNameStringEx(s string) (string, bool) &#123; if chineseNameRegexp.MatchString(s) &#123; return s, true &#125; if !chineseNameExRegexp.MatchString(s) &#123; return s, false &#125; list := []rune(s) for i := 0; i &lt; len(list); i++ &#123; switch list[i] &#123; case &#39;\\u2022&#39;, &#39;\\u2027&#39;, &#39;\\u30FB&#39;, &#39;\\u002E&#39;, &#39;\\u0387&#39;, &#39;\\u16EB&#39;, &#39;\\u2219&#39;, &#39;\\u22C5&#39;, &#39;\\uFF65&#39;, &#39;\\u05BC&#39;: list[i] = &#39;\\u00B7&#39; &#125; &#125; return string(list), true &#125;","categories":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/categories/golang/"}],"tags":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/tags/golang/"},{"name":"regex","slug":"regex","permalink":"https://huangxingx.github.io/tags/regex/"}]},{"title":"mac zsh ç»ˆç«¯","slug":"mac/mac-item2-ç»ˆç«¯","date":"2022-11-01T07:43:04.000Z","updated":"2022-11-01T03:09:50.072Z","comments":true,"path":"2022/11/01/mac/mac-item2-ç»ˆç«¯/","link":"","permalink":"https://huangxingx.github.io/2022/11/01/mac/mac-item2-%E7%BB%88%E7%AB%AF/","excerpt":"","text":"mac zsh ç»ˆç«¯åˆ©ç”¨iTerm2+oh-my-zsh+Draculaä¸»é¢˜æ‰“é€ æˆ‘çš„Macç»ˆç«¯åˆ©å™¨å‚è€ƒæ–‡ç« ï¼šhttps://blog.csdn.net/daiyuhe/article/details/88667875æ•ˆæœå›¾ item2å®˜ç½‘ï¼šhttps://www.iterm2.com/index.html oh-my-zshé…ç½®å®‰è£…oh-my-zshsh -c &quot;$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot; åœ¨oh-my-zshä¸­å¯ç”¨æ’ä»¶plugins=( git zsh-autosuggestions zsh-syntax-highlighting mvn )","categories":[{"name":"mac","slug":"mac","permalink":"https://huangxingx.github.io/categories/mac/"}],"tags":[{"name":"mac","slug":"mac","permalink":"https://huangxingx.github.io/tags/mac/"}]},{"title":"ssh","slug":"linux/ssh","date":"2022-11-01T07:43:04.000Z","updated":"2022-11-01T03:00:59.190Z","comments":true,"path":"2022/11/01/linux/ssh/","link":"","permalink":"https://huangxingx.github.io/2022/11/01/linux/ssh/","excerpt":"","text":"sshç”Ÿæˆå…¬é’¥ssh-keygen -t rsa -t æŒ‡å®šç®—æ³•-f æŒ‡å®šç”Ÿæˆç§˜é’¥è·¯å¾„-N æŒ‡å®šå¯†ç  æ‹·è´å…¬é’¥cd ~/.ssh scp id_rsa.pub root@B:/root/.ssh/authorized_keys #æ­¤å‘½ä»¤åœ¨Aæœºå™¨æ‰§è¡Œï¼Œç›®çš„å°†å…¬é’¥å‘é€è‡³Bæœºå™¨ scp id_rsa.pub root@A:/root/.ssh/authorized_keys #æ­¤å‘½ä»¤åœ¨Bæœºå™¨æ‰§è¡Œï¼Œç›®çš„å°†å…¬é’¥å‘é€è‡³Bæœºå™¨ å°†ä½ çš„SSHå…¬é’¥å¤åˆ¶åˆ°è¿œç¨‹ä¸»æœºï¼Œå¼€å¯æ— å¯†ç ç™»å½• â€“ ç®€å•çš„æ–¹æ³• ssh-copy-id username@hostname å¦‚æœå‘ç°è®¾ç½®å…å¯†ç™»é™†ï¼Œè¿˜éœ€è¦è¾“å…¥å¯†ç ï¼Œé‚£ä¹ˆæ£€æŸ¥ä¸€ä¸‹/root .ssh authorized_keysç›®å½•å’Œæ–‡ä»¶çš„æƒé™ã€‚ chmod 600 authorized_keys chmod 700 .ssh å¦‚æœauthorized_keysæ–‡ä»¶ã€ğ»ğ‘‚ğ‘€ğ¸/.ssh ç›®å½•æˆ–HOMEç›®å½•è®©æœ¬ç”¨æˆ·ä¹‹å¤–çš„ç”¨æˆ·æœ‰å†™æƒé™ï¼Œé‚£ä¹ˆ sshd éƒ½ä¼šæ‹’ç»ä½¿ç”¨ ~/.ssh/authorized_keys æ–‡ä»¶ä¸­çš„keyæ¥è¿›è¡Œè®¤è¯çš„ã€‚","categories":[{"name":"linux","slug":"linux","permalink":"https://huangxingx.github.io/categories/linux/"}],"tags":[{"name":"ssh","slug":"ssh","permalink":"https://huangxingx.github.io/tags/ssh/"},{"name":"linux","slug":"linux","permalink":"https://huangxingx.github.io/tags/linux/"}]},{"title":"maven template","slug":"java/maven-template","date":"2021-11-01T16:00:00.000Z","updated":"2022-11-02T08:32:04.176Z","comments":true,"path":"2021/11/02/java/maven-template/","link":"","permalink":"https://huangxingx.github.io/2021/11/02/java/maven-template/","excerpt":"","text":"&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.6.11&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;groupId&gt;com.example&lt;/groupId&gt; &lt;artifactId&gt;spring-openfeign-demo&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;name&gt;spring-openfeign-demo&lt;/name&gt; &lt;description&gt;spring-openfeign-demo&lt;/description&gt; &lt;properties&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;type&gt;pom&lt;/type&gt; &lt;version&gt;2021.0.0&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;!-- mybatis-plus --&gt; &lt;dependency&gt; &lt;groupId&gt;com.baomidou&lt;/groupId&gt; &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt; &lt;version&gt;$&#123;mybatis-plus.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- redisson --&gt; &lt;dependency&gt; &lt;groupId&gt;org.redisson&lt;/groupId&gt; &lt;artifactId&gt;redisson-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;$&#123;redisson.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- &lt;dependency&gt;--&gt; &lt;!-- &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;--&gt; &lt;!-- &lt;artifactId&gt;spring-cloud-starter-consul-discovery&lt;/artifactId&gt;--&gt; &lt;!-- &lt;/dependency&gt;--&gt; &lt;dependency&gt; &lt;groupId&gt;cn.hutool&lt;/groupId&gt; &lt;artifactId&gt;hutool-all&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt; &lt;artifactId&gt;logback-classic&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt; &lt;artifactId&gt;logback-core&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;repositories&gt; &lt;repository&gt; &lt;id&gt;central&lt;/id&gt; &lt;name&gt;aliyun maven&lt;/name&gt; &lt;url&gt;https://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt; &lt;layout&gt;default&lt;/layout&gt; &lt;!-- æ˜¯å¦å¼€å¯å‘å¸ƒç‰ˆæ„ä»¶ä¸‹è½½ --&gt; &lt;releases&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/releases&gt; &lt;!-- æ˜¯å¦å¼€å¯å¿«ç…§ç‰ˆæ„ä»¶ä¸‹è½½ --&gt; &lt;snapshots&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/snapshots&gt; &lt;/repository&gt; &lt;/repositories&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt; &lt;/project&gt;","categories":[{"name":"java","slug":"java","permalink":"https://huangxingx.github.io/categories/java/"}],"tags":[{"name":"java","slug":"java","permalink":"https://huangxingx.github.io/tags/java/"},{"name":"maven","slug":"maven","permalink":"https://huangxingx.github.io/tags/maven/"}]},{"title":"java mapstruct è¯¦è§£","slug":"java/java-mapstruct-è¯¦è§£","date":"2021-10-25T01:58:50.000Z","updated":"2022-11-02T08:31:55.892Z","comments":true,"path":"2021/10/25/java/java-mapstruct-è¯¦è§£/","link":"","permalink":"https://huangxingx.github.io/2021/10/25/java/java-mapstruct-%E8%AF%A6%E8%A7%A3/","excerpt":"","text":"å®˜ç½‘ï¼šhttps://mapstruct.org/ GitHub: https://github.com/mapstruct/mapstruct å…³äº BeanUtilå¹³æ—¶æˆ‘ç»å¸¸ä½¿ç”¨Hutoolä¸­çš„BeanUtilç±»æ¥å®ç°å¯¹è±¡è½¬æ¢ï¼Œç”¨å¤šäº†ä¹‹åå°±å‘ç°æœ‰äº›ç¼ºç‚¹ï¼š å¯¹è±¡å±æ€§æ˜ å°„ä½¿ç”¨åå°„æ¥å®ç°ï¼Œæ€§èƒ½æ¯”è¾ƒä½ï¼› å¯¹äºä¸åŒåç§°æˆ–ä¸åŒç±»å‹çš„å±æ€§æ— æ³•è½¬æ¢ï¼Œè¿˜å¾—å•ç‹¬å†™Getterã€Setteræ–¹æ³•ï¼› å¯¹äºåµŒå¥—çš„å­å¯¹è±¡ä¹Ÿéœ€è¦è½¬æ¢çš„æƒ…å†µï¼Œä¹Ÿå¾—è‡ªè¡Œå¤„ç†ï¼› é›†åˆå¯¹è±¡è½¬æ¢æ—¶ï¼Œå¾—ä½¿ç”¨å¾ªç¯ï¼Œä¸€ä¸ªä¸ªæ‹·è´ã€‚ å¯¹äºè¿™äº›ä¸è¶³ï¼ŒMapStructéƒ½èƒ½è§£å†³ï¼Œä¸æ„§ä¸ºä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„å¯¹è±¡æ˜ å°„å·¥å…·ï¼ IDEAæ’ä»¶æ”¯æŒ é¡¹ç›®é›†æˆåœ¨SpingBootä¸­é›†æˆMapStructéå¸¸ç®€å•ï¼Œä»…ç»­æ·»åŠ å¦‚ä¸‹ä¸¤ä¸ªä¾èµ–å³å¯ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯1.4.2.Finalç‰ˆæœ¬ &lt;dependency&gt; &lt;!--MapStructç›¸å…³ä¾èµ–--&gt; &lt;dependency&gt; &lt;groupId&gt;org.mapstruct&lt;/groupId&gt; &lt;artifactId&gt;mapstruct&lt;/artifactId&gt; &lt;version&gt;$&#123;mapstruct.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mapstruct&lt;/groupId&gt; &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt; &lt;version&gt;$&#123;mapstruct.version&#125;&lt;/version&gt; &lt;scope&gt;compile&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies","categories":[{"name":"java","slug":"java","permalink":"https://huangxingx.github.io/categories/java/"}],"tags":[{"name":"java","slug":"java","permalink":"https://huangxingx.github.io/tags/java/"},{"name":"mapstruct","slug":"mapstruct","permalink":"https://huangxingx.github.io/tags/mapstruct/"},{"name":"plugins","slug":"plugins","permalink":"https://huangxingx.github.io/tags/plugins/"}]},{"title":"golang å¹¶å‘èµ‹å€¼å®‰å…¨æ€§","slug":"golang/golang-å¹¶å‘èµ‹å€¼å®‰å…¨æ€§","date":"2021-09-30T11:10:48.000Z","updated":"2022-11-01T02:42:47.276Z","comments":true,"path":"2021/09/30/golang/golang-å¹¶å‘èµ‹å€¼å®‰å…¨æ€§/","link":"","permalink":"https://huangxingx.github.io/2021/09/30/golang/golang-%E5%B9%B6%E5%8F%91%E8%B5%8B%E5%80%BC%E5%AE%89%E5%85%A8%E6%80%A7/","excerpt":"","text":"Go å¤šåç¨‹å¹¶å‘çš„åœºæ™¯æ— å¤„ä¸åœ¨ï¼Œå¹¶å‘å¯¹åŒä¸€å˜é‡çš„èµ‹å€¼ä¹Ÿæ˜¯ç»å¸¸é‡åˆ°ã€‚æœ¬æ–‡å°è¯•æ¢è®¨äº† Go ä¸­æ‰€æœ‰ç±»å‹å¹¶å‘èµ‹å€¼çš„å®‰å…¨æ€§ã€‚ ç”±ä¸€æ¡æœºå™¨æŒ‡ä»¤å®Œæˆèµ‹å€¼çš„ç±»å‹å¹¶å‘èµ‹å€¼æ˜¯å®‰å…¨çš„ï¼Œè¿™äº›ç±»å‹æœ‰ï¼šå­—èŠ‚å‹ï¼Œå¸ƒå°”å‹ã€æ•´å‹ã€æµ®ç‚¹å‹ã€å­—ç¬¦å‹ã€æŒ‡é’ˆã€å‡½æ•°ã€‚ æ•°ç»„ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ç»„æˆï¼Œå¤§éƒ¨åˆ†æƒ…å†µå¹¶å‘ä¸å®‰å…¨ã€‚æ³¨æ„ï¼šå½“ä½å®½ä¸å¤§äº 64 ä½ä¸”æ˜¯ 2 çš„æ•´æ•°æ¬¡å¹‚ï¼ˆ8ï¼Œ16ï¼Œ32ï¼Œ64ï¼‰ï¼Œé‚£ä¹ˆå…¶å¹¶å‘èµ‹å€¼æ˜¯å®‰å…¨çš„ã€‚ struct æˆ–åº•å±‚æ˜¯ struct çš„ç±»å‹å¹¶å‘èµ‹å€¼å¤§éƒ¨åˆ†æƒ…å†µå¹¶å‘ä¸å®‰å…¨ï¼Œè¿™äº›ç±»å‹æœ‰ï¼šå¤æ•°ã€å­—ç¬¦ä¸²ã€ æ•°ç»„ã€åˆ‡ç‰‡ã€å­—å…¸ã€é€šé“ã€æ¥å£ã€‚æ³¨æ„ï¼šå½“ struct èµ‹å€¼æ—¶é€€åŒ–ä¸ºå•ä¸ªå­—æ®µç”±ä¸€ä¸ªæœºå™¨æŒ‡ä»¤å®Œæˆèµ‹å€¼æ—¶ï¼Œå¹¶å‘èµ‹å€¼åˆæ˜¯å®‰å…¨çš„ã€‚è¿™ç§æƒ…å†µæœ‰ï¼š å®éƒ¨æˆ–è™šéƒ¨ç›¸åŒçš„å¤æ•°çš„å¹¶å‘èµ‹å€¼ï¼›ç­‰é•¿å­—ç¬¦ä¸²çš„å¹¶å‘èµ‹å€¼ï¼›åŒé•¿åº¦åŒå®¹é‡åˆ‡ç‰‡çš„å¹¶å‘èµ‹å€¼ï¼›åŒä¸€ç§å…·ä½“ç±»å‹ä¸åŒå€¼å¹¶å‘èµ‹ç»™æ¥å£ã€‚","categories":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/categories/golang/"}],"tags":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/tags/golang/"},{"name":"concurrent","slug":"concurrent","permalink":"https://huangxingx.github.io/tags/concurrent/"}]},{"title":"sync.Pool å¯¹è±¡æ± ä½¿ç”¨é—®é¢˜è®°å½•","slug":"golang/sync-Pool-å¯¹è±¡æ± ä½¿ç”¨é—®é¢˜è®°å½•","date":"2021-09-30T03:07:11.000Z","updated":"2022-10-31T09:40:57.113Z","comments":true,"path":"2021/09/30/golang/sync-Pool-å¯¹è±¡æ± ä½¿ç”¨é—®é¢˜è®°å½•/","link":"","permalink":"https://huangxingx.github.io/2021/09/30/golang/sync-Pool-%E5%AF%B9%E8%B1%A1%E6%B1%A0%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/","excerpt":"","text":"sync.Pool å¯¹è±¡é‡ç½®é—®é¢˜ æ–¹å¼1: get -&gt; operate-obj -&gt; reset -&gt; put é—®é¢˜ï¼šget çš„å¯¹è±¡åœ¨æ“ä½œæ—¶å¯èƒ½æ²¡æœ‰è¢«reset åˆ° æ–¹å¼2: get -&gt; reset -&gt; operate-obj -&gt; put è·å–å¯¹è±¡åï¼Œå…ˆ reset åœ¨ä½¿ç”¨æ˜¯æ²¡æœ‰é—®é¢˜çš„ gin å°±æ˜¯è¿™æ ·ä½¿ç”¨çš„ func (engine *Engine) ServeHTTP(w http.ResponseWriter, req *http.Request) &#123; c := engine.pool.Get().(*Context) c.writermem.reset(w) c.Request = req c.reset() // å…ˆreset engine.handleHTTPRequest(c) // å†ä½¿ç”¨ engine.pool.Put(c) // ä½¿ç”¨ä¹‹åç›´æ¥ put &#125; cat test_syncpool.go package test import ( &quot;strconv&quot; &quot;sync&quot; &quot;testing&quot; ) type A struct &#123; Name string &#125; func (a *A) putValue(i int) &#123; a.Name = &quot;A+&quot; + strconv.Itoa(i) &#125; func (a *A) reset() &#123; a.Name = &quot;&quot; &#125; func Benchmark_A(b *testing.B) &#123; pool := &amp;sync.Pool&#123; New: func() interface&#123;&#125; &#123; return new(A) &#125;, &#125; pool2 := &amp;sync.Pool&#123; New: func() interface&#123;&#125; &#123; return new(A) &#125;, &#125; waitGroup := sync.WaitGroup&#123;&#125; waitGroup.Add(1) go func() &#123; defer waitGroup.Done() for i := 0; i &lt; b.N; i++ &#123; a := pool.Get().(*A) //a.reset() // æ–¹å¼2 æ²¡æœ‰é—®é¢˜ if a.Name != &quot;&quot; &#123; panic(&quot;name not empty&quot;) &#125; a.putValue(i) // a.Name = &quot;A+&quot; + strconv.Itoa(i) if a.Name == &quot;&quot; &#123; panic(&quot;name is empty&quot;) &#125; a.reset() // æ–¹å¼1 æœ‰é—®é¢˜çš„æ–¹å¼ pool.Put(a) &#125; &#125;() waitGroup.Add(1) go func() &#123; defer waitGroup.Done() for i := 0; i &lt; b.N; i++ &#123; a := pool.Get().(*A) a.reset() if a.Name != &quot;&quot; &#123; panic(&quot;name not empty&quot;) &#125; a.putValue(i) if a.Name == &quot;&quot; &#123; panic(&quot;name not empty&quot;) &#125; pool.Put(a) &#125; &#125;() waitGroup.Wait() &#125; ä¿®æ”¹ç‚¹ func (pool *taskPool) get() *Task &#123; task := pool.bp.Get().(*Task) task.Reset() return task &#125; func (pool *taskPool) put(obj *Task) &#123; pool.bp.Put(obj) &#125; æ‰§è¡Œç”¨ä¾‹ BenchmarkTimeWheel âœ go-timewheel (master) âœ— go test -v -bench . -test.bench=&#39;TimeWheel$&#39; -test.run ^$ goos: darwin goarch: amd64 pkg: github.com/rfyiamcool/go-timewheel cpu: Intel(R) Core(TM) i7-9750H CPU @ 2.60GHz BenchmarkAdd-12 1990670 1090 ns/op BenchmarkTimeWheel/wheel-N-1m-12 1000000 1049 ns/op BenchmarkTimeWheel/wheel-N-5m-12 1223064 1061 ns/op BenchmarkTimeWheel/wheel-N-10m-12 1000000 1253 ns/op PASS ok github.com/rfyiamcool/go-timewheel 100.504s é—®é¢˜ç‚¹ task.callback æœ‰å€¼ï¼Œä½†æ˜¯ task.callback == nil åˆ†æ”¯å´æ‰§è¡Œäº†ï¼Œæ–­ç‚¹åœ¨ task.callback() æ—¶å»æ‰§è¡Œ task.callback ç¡®å®æ˜¯æœ‰å€¼çš„ Task.stop = true","categories":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/categories/golang/"}],"tags":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/tags/golang/"},{"name":"concurrent","slug":"concurrent","permalink":"https://huangxingx.github.io/tags/concurrent/"},{"name":"sync.Pool","slug":"sync-Pool","permalink":"https://huangxingx.github.io/tags/sync-Pool/"}]},{"title":"æ—¶é—´è½®","slug":"ç®—æ³•/æ—¶é—´è½®","date":"2021-09-30T01:45:10.000Z","updated":"2022-10-31T09:40:57.114Z","comments":true,"path":"2021/09/30/ç®—æ³•/æ—¶é—´è½®/","link":"","permalink":"https://huangxingx.github.io/2021/09/30/%E7%AE%97%E6%B3%95/%E6%97%B6%E9%97%B4%E8%BD%AE/","excerpt":"","text":"æ—¶é—´è½® Timewheelkafka æ—¶é—´è½®çš„å®ç°Kafka Timer å®ç°æºç  Kafka çš„å±‚çº§æ—¶é—´è½®å®ç°ä¸­ï¼Œåˆ©ç”¨äº† Java å†…ç½®çš„ DelayQueue ç»“æ„ï¼Œå°†æ¯ä¸€å±‚æ—¶é—´è½®ä¸­æ‰€æœ‰ â€œåŒ…å«æœ‰å®šæ—¶ä»»åŠ¡çš„ bucketâ€ éƒ½åŠ å…¥åˆ°åŒä¸€ä¸ª DelayQueue ä¸­ï¼Œç„¶å ç­‰åˆ°æœ‰ bucket åˆ°æœŸåå†é©±åŠ¨æ—¶é’Ÿå¾€å‰èµ°ï¼Œå¹¶é€ä¸ªå¤„ç†è¯¥ bucket ä¸­çš„å®šæ—¶ä»»åŠ¡ å¾€å±‚çº§æ—¶é—´è½®ä¸­æ·»åŠ ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ task1 åï¼Œä¼šå°†è¯¥ä»»åŠ¡æ‰€å±çš„ bucket2 çš„åˆ°æœŸæ—¶é—´è®¾ç½®ä¸º task1 çš„åˆ°æœŸæ—¶é—´ expirationï¼ˆ= å½“å‰æ—¶é—´ currentTime + å®šæ—¶ä»»åŠ¡åˆ°æœŸé—´éš” durationï¼‰ï¼Œå¹¶å°†è¿™ä¸ª bucket2 æ·»åŠ ï¼ˆOfferï¼‰åˆ° DelayQueue ä¸­ã€‚ DelayQueueï¼ˆå†…éƒ¨æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼‰ä¼šç­‰å¾… â€œåˆ°æœŸæ—¶é—´æœ€æ—©ï¼ˆearliestï¼‰çš„ bucketâ€ åˆ°æœŸï¼Œå›¾ä¸­ç­‰åˆ°çš„æ˜¯æ’åœ¨é˜Ÿé¦–çš„ bucket2ï¼Œäºæ˜¯ç»ç”± poll è¿”å›å¹¶åˆ é™¤è¿™ä¸ª bucket2ï¼›éšåï¼Œæ—¶é—´è½®ä¼šå°†å½“å‰æ—¶é—´ currentTime å¾€å‰ç§»åŠ¨åˆ° bucket2 çš„ expiration æ‰€æŒ‡å‘çš„æ—¶é—´ï¼ˆå›¾ä¸­æ˜¯ 1ms æ‰€åœ¨çš„ä½ç½®ï¼‰ï¼›æœ€åï¼Œbucket2 ä¸­åŒ…å«çš„ task1 ä¼šè¢«åˆ é™¤å¹¶æ‰§è¡Œã€‚ Golang timewheel å®ç°å‚è€ƒ Kafka æ—¶é—´è½®å®ç°çš„ golang ç‰ˆæœ¬timewheel : https://github.com/RussellLuo/timingwheel.git PriorityQueue â€”â€” ä» NSQ å€Ÿç”¨è¿‡æ¥çš„ ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆåŸºäºæœ€å°å †å®ç°ï¼‰ã€‚ DelayQueue â€”â€” Offerï¼ˆæ·»åŠ  bucketï¼‰å’Œ Pollï¼ˆè·å–å¹¶åˆ é™¤ bucketï¼‰çš„è¿ä½œæ–¹å¼ï¼Œè·Ÿ Golang Timer è¿è¡Œæ—¶ä¸­ addtimerLocked å’Œ timerproc çš„è¿ä½œæ–¹å¼å¦‚å‡ºä¸€è¾™ï¼Œå› æ­¤å‚è€ƒäº†å…¶ä¸­çš„å®ç°æ–¹å¼ï¼ˆå‚è€ƒ åŸç†ä»‹ç»ï¼‰ã€‚ åŸºäº Timer çš„ç‰ˆæœ¬go-timewhee : https://github.com/rfyiamcool/go-timewheel å‚è€ƒï¼š å±‚çº§æ—¶é—´è½®çš„ Golang å®ç°","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://huangxingx.github.io/categories/%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://huangxingx.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"timewheels","slug":"timewheels","permalink":"https://huangxingx.github.io/tags/timewheels/"}]},{"title":"golang å®ç°è®¡ç®—å™¨","slug":"golang/golang-å®ç°è®¡ç®—å™¨","date":"2021-09-24T08:58:16.000Z","updated":"2022-10-31T09:40:57.108Z","comments":true,"path":"2021/09/24/golang/golang-å®ç°è®¡ç®—å™¨/","link":"","permalink":"https://huangxingx.github.io/2021/09/24/golang/golang-%E5%AE%9E%E7%8E%B0%E8%AE%A1%E7%AE%97%E5%99%A8/","excerpt":"","text":"golang å®ç°ä¸€ä¸ªè®¡ç®—çš„åŠŸèƒ½ï¼Œå¹¶æ”¯æŒæ‹¬å·è®¡ç®— githubåœ°å€ï¼šhttps://github.com/huangxingx/go-utils.git å®ç°é‡ç‚¹ï¼šåç¼€è¡¨è¾¾å¼ä¸€èˆ¬çš„è¡¨è¾¾å¼éƒ½æ˜¯ä¸­ç¼€è¡¨è¾¾å¼ï¼Œæ“ä½œç¬¦åœ¨ä¸¤ä¸ªæ“ä½œé¡¹ä¹‹é—´ã€‚è€Œåç¼€è¡¨è¾¾å¼çš„æ“ä½œç¬¦åœ¨ä¸¤ä¸ªæ“ä½œé¡¹åé¢ åç¼€è¡¨è¾¾å¼çš„å®ç°åˆ©ç”¨æ ˆ stack å’Œé˜Ÿåˆ— queue å®ç°åç¼€è¡¨è¾¾å¼ æµç¨‹ï¼š å…ˆæŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºåˆ—è¡¨ æ¯”å¦‚ â€œ1+2+3*4â€ è½¬æ¢ä¸º [â€œ1â€, â€œ+â€, â€œ2â€, â€œ+â€, â€œ3â€, â€œ*â€, â€œ4â€] ä¸Šé¢çš„å­—ç¬¦ä¸²åˆ—è¡¨è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼ éå†åç¼€è¡¨è¾¾å¼è¿›è¡Œè®¡ç®— computer.go package go_utils import &quot;strconv&quot; // Computer è®¡ç®—åç¼€è¡¨è¾¾å¼ func Computer(expression string) float64 &#123; mpnExpression := parse2mpn(expression) rpnExpression := parse2rpn(mpnExpression) resultStack := NewStack() for _, v := range rpnExpression &#123; switch v &#123; case &quot;+&quot;, &quot;-&quot;, &quot;*&quot;, &quot;/&quot;: v1, _ := resultStack.Pop().(float64) v2, _ := resultStack.Pop().(float64) switch v &#123; case &quot;+&quot;: resultStack.Push(v1 + v2) case &quot;-&quot;: resultStack.Push(v2 - v1) case &quot;*&quot;: resultStack.Push(v2 * v1) case &quot;/&quot;: resultStack.Push(v2 / v1) &#125; default: float, err := strconv.ParseFloat(v, 64) if err != nil &#123; panic(err) &#125; resultStack.Push(float) &#125; &#125; return resultStack.Pop().(float64) &#125; // è§£æä¸­ç¼€è¡¨è¾¾å¼æ•°ç»„ func parse2mpn(express string) []string &#123; //compile, _ := regexp.Compile(&quot;[\\\\d\\\\+\\\\-\\\\*\\\\/\\\\(\\\\)]&quot;) //return compile.FindAllString(express, -1) result := make([]string, 0) s := &quot;&quot; for i, v := range express &#123; if v == 32 &#123; continue &#125; if v &gt; 47 &amp;&amp; v &lt; 59 || v == 46 &#123; s += string(v) if i == len(express)-1 &#123; result = append(result, s) &#125; &#125; else &#123; // +-*/ ( ) if s != &quot;&quot; &#123; result = append(result, s) s = &quot;&quot; &#125; result = append(result, string(v)) &#125; &#125; return result &#125; // parse2rpn è§£æä¸­ç¼€è¡¨è¾¾å¼-&gt; åç¼€è¡¨è¾¾å¼ func parse2rpn(express []string) []string &#123; stact := NewStack() rpnList := make([]string, 0, len(express)) var s string for i := 0; i &lt; len(express); i++ &#123; s = express[i] switch s &#123; case &quot;+&quot;, &quot;-&quot;: for &#123; if stact.IsEmpty() || stact.Peek().(string) == &quot;(&quot; &#123; stact.Push(s) break &#125; else &#123; rpnList = append(rpnList, stact.Pop().(string)) &#125; &#125; case &quot;*&quot;, &quot;/&quot;: for &#123; if stact.IsEmpty() || (stact.Peek().(string) != &quot;*&quot; &amp;&amp; stact.Peek().(string) != &quot;/&quot;) &#123; stact.Push(s) break &#125; else &#123; rpnList = append(rpnList, stact.Pop().(string)) &#125; &#125; case &quot;(&quot;: stact.Push(s) case &quot;)&quot;: for stact.Peek().(string) != &quot;(&quot; &#123; rpnList = append(rpnList, stact.Pop().(string)) &#125; stact.Pop() default: rpnList = append(rpnList, s) &#125; &#125; for stact.Size() &gt; 0 &#123; rpnList = append(rpnList, stact.Pop().(string)) &#125; return rpnList &#125;","categories":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/categories/golang/"}],"tags":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/tags/golang/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://huangxingx.github.io/tags/%E7%AE%97%E6%B3%95/"}]},{"title":"çŠ¶æ€æœº","slug":"å…¶ä»–/çŠ¶æ€æœº","date":"2021-09-23T09:49:33.000Z","updated":"2022-11-01T02:41:03.859Z","comments":true,"path":"2021/09/23/å…¶ä»–/çŠ¶æ€æœº/","link":"","permalink":"https://huangxingx.github.io/2021/09/23/%E5%85%B6%E4%BB%96/%E7%8A%B6%E6%80%81%E6%9C%BA/","excerpt":"","text":"çŠ¶æ€æ¨¡å¼æ¦‚å¿µæœ‰é™çŠ¶æ€æœºï¼ˆFinite State Machineï¼‰ï¼šæœ‰é™ä¸ªçŠ¶æ€ä»¥åŠåœ¨è¿™äº›çŠ¶æ€ä¹‹é—´çš„è½¬ç§»å’ŒåŠ¨ä½œç­‰è¡Œä¸ºçš„æ•°å­¦è®¡ç®—æ¨¡å‹ã€‚æœ‰ 3 ä¸ªç»„æˆéƒ¨åˆ†ï¼šçŠ¶æ€ï¼ˆStateï¼‰ã€äº‹ä»¶ï¼ˆEventï¼‰ã€åŠ¨ä½œï¼ˆActionï¼‰ï¼Œäº‹ä»¶è§¦å‘çŠ¶æ€çš„è½¬ç§»åŠåŠ¨ä½œçš„æ‰§è¡Œã€‚ çŠ¶æ€æ¨¡å¼ï¼š ç”¨æ¥å®ç°çŠ¶æ€æœºçš„è®¾è®¡æ¨¡å¼ï¼Œå¸¸ç”¨åœ¨å·¥ä½œæµå¼•æ“ã€å·¥å•ç­‰æ¶‰åŠåˆ°å¾ˆå¤šçŠ¶æ€çš„åœºæ™¯ã€‚ ä½œç”¨çŠ¶æ€æ¨¡å¼èƒ½è§£è€¦çŠ¶æ€å’ŒçŠ¶æ€è½¬ç§»ï¼ˆäº‹ä»¶ï¼‰ï¼Œè®©æ•´ä¸ªçŠ¶æ€æœºç³»ç»Ÿé€»è¾‘èƒ½åŠ æ¸…æ™°ã€‚ todo ä»£ç ç¤ºä¾‹ï¼ˆè®¢å•çŠ¶æ€è½¬æ¢ï¼‰ çŠ¶æ€è½¬æ¢å›¾","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://huangxingx.github.io/categories/%E5%85%B6%E4%BB%96/"}],"tags":[]},{"title":"golang ants åç¨‹æ± ","slug":"golang/golang-ants-åç¨‹æ± ","date":"2021-09-18T08:07:50.000Z","updated":"2022-10-31T09:40:57.107Z","comments":true,"path":"2021/09/18/golang/golang-ants-åç¨‹æ± /","link":"","permalink":"https://huangxingx.github.io/2021/09/18/golang/golang-ants-%E5%8D%8F%E7%A8%8B%E6%B1%A0/","excerpt":"","text":"ants ç±»å›¾","categories":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/categories/golang/"}],"tags":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/tags/golang/"},{"name":"ants","slug":"ants","permalink":"https://huangxingx.github.io/tags/ants/"},{"name":"goroutine","slug":"goroutine","permalink":"https://huangxingx.github.io/tags/goroutine/"}]},{"title":"jetbrains æ’ä»¶æ¨è","slug":"å…¶ä»–/jetbrains-æ’ä»¶æ¨è","date":"2021-09-18T06:07:20.000Z","updated":"2022-11-01T03:10:44.745Z","comments":true,"path":"2021/09/18/å…¶ä»–/jetbrains-æ’ä»¶æ¨è/","link":"","permalink":"https://huangxingx.github.io/2021/09/18/%E5%85%B6%E4%BB%96/jetbrains-%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/","excerpt":"","text":"PlantUML integrationæ’ä»¶åœ°å€ï¼š https://plugins.jetbrains.com/plugin/7017-plantuml-integration PlantUML diagramming tool integration. Now better and faster, with code navigation and highlighting. CamelCaseæ’ä»¶åœ°å€ï¼š https://plugins.jetbrains.com/plugin/7160-camelcase Switch easily between kebab-case, SNAKE_CASE, PascalCase, camelCase, snake_case or space case. See Edit menu or use â‡§ + âŒ¥ + U / Shift + Alt + U. Allows to disable some conversions or change their order in the preferences. GitToolBoxæ’ä»¶åœ°å€ï¼šhttps://plugins.jetbrains.com/plugin/7499-gittoolbox Extends Git Integration with additional features Status display, auto fetch, inline blame annotation, commit dialog completion, behind notifications and moreâ€¦ For more see Manual TranslationTranslation plugin for IntelliJ based IDEs.","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://huangxingx.github.io/categories/%E5%85%B6%E4%BB%96/"}],"tags":[{"name":"plugins","slug":"plugins","permalink":"https://huangxingx.github.io/tags/plugins/"},{"name":"jetbrains","slug":"jetbrains","permalink":"https://huangxingx.github.io/tags/jetbrains/"}]},{"title":"mysql æ…¢æ—¥å¿—æŸ¥è¯¢åˆ†æ","slug":"mysql/mysql-æ…¢æ—¥å¿—æŸ¥è¯¢åˆ†æ","date":"2021-09-17T01:58:36.000Z","updated":"2022-10-31T09:40:57.112Z","comments":true,"path":"2021/09/17/mysql/mysql-æ…¢æ—¥å¿—æŸ¥è¯¢åˆ†æ/","link":"","permalink":"https://huangxingx.github.io/2021/09/17/mysql/mysql-%E6%85%A2%E6%97%A5%E5%BF%97%E6%9F%A5%E8%AF%A2%E5%88%86%E6%9E%90/","excerpt":"","text":"æ…¢æŸ¥è¯¢æ—¥å¿—ç›¸å…³å‚æ•° slow_query_log ï¼šæ˜¯å¦å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œ1è¡¨ç¤ºå¼€å¯ï¼Œ0è¡¨ç¤ºå…³é—­ã€‚ log-slow-queries ï¼šæ—§ç‰ˆï¼ˆ5.6ä»¥ä¸‹ç‰ˆæœ¬ï¼‰MySQLæ•°æ®åº“æ…¢æŸ¥è¯¢æ—¥å¿—å­˜å‚¨è·¯å¾„ã€‚å¯ä»¥ä¸è®¾ç½®è¯¥å‚æ•°ï¼Œç³»ç»Ÿåˆ™ä¼šé»˜è®¤ç»™ä¸€ä¸ªç¼ºçœçš„æ–‡ä»¶host_name-slow.log slow-query-log-fileï¼šæ–°ç‰ˆï¼ˆ5.6åŠä»¥ä¸Šç‰ˆæœ¬ï¼‰MySQLæ•°æ®åº“æ…¢æŸ¥è¯¢æ—¥å¿—å­˜å‚¨è·¯å¾„ã€‚å¯ä»¥ä¸è®¾ç½®è¯¥å‚æ•°ï¼Œç³»ç»Ÿåˆ™ä¼šé»˜è®¤ç»™ä¸€ä¸ªç¼ºçœçš„æ–‡ä»¶host_name-slow.log long_query_time ï¼šæ…¢æŸ¥è¯¢é˜ˆå€¼ï¼Œå½“æŸ¥è¯¢æ—¶é—´å¤šäºè®¾å®šçš„é˜ˆå€¼æ—¶ï¼Œè®°å½•æ—¥å¿—ã€‚ log_queries_not_using_indexesï¼šæœªä½¿ç”¨ç´¢å¼•çš„æŸ¥è¯¢ä¹Ÿè¢«è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—ä¸­ï¼ˆå¯é€‰é¡¹ï¼‰ã€‚ log_outputï¼šæ—¥å¿—å­˜å‚¨æ–¹å¼ã€‚log_output=â€™FILEâ€™è¡¨ç¤ºå°†æ—¥å¿—å­˜å…¥æ–‡ä»¶ï¼Œé»˜è®¤å€¼æ˜¯â€™FILEâ€™ã€‚log_output=â€™TABLEâ€™è¡¨ç¤ºå°†æ—¥å¿—å­˜å…¥æ•°æ®åº“ï¼Œè¿™æ ·æ—¥å¿—ä¿¡æ¯å°±ä¼šè¢«å†™å…¥åˆ°mysql.slow_logè¡¨ä¸­ã€‚MySQLæ•°æ®åº“æ”¯æŒåŒæ—¶ä¸¤ç§æ—¥å¿—å­˜å‚¨æ–¹å¼ï¼Œé…ç½®çš„æ—¶å€™ä»¥é€—å·éš”å¼€å³å¯ï¼Œå¦‚ï¼šlog_output=â€™FILE,TABLEâ€™ã€‚æ—¥å¿—è®°å½•åˆ°ç³»ç»Ÿçš„ä¸“ç”¨æ—¥å¿—è¡¨ä¸­ï¼Œè¦æ¯”è®°å½•åˆ°æ–‡ä»¶è€—è´¹æ›´å¤šçš„ç³»ç»Ÿèµ„æºï¼Œå› æ­¤å¯¹äºéœ€è¦å¯ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œåˆéœ€è¦èƒ½å¤Ÿè·å¾—æ›´é«˜çš„ç³»ç»Ÿæ€§èƒ½ï¼Œé‚£ä¹ˆå»ºè®®ä¼˜å…ˆè®°å½•åˆ°æ–‡ä»¶ã€‚ æ—¥å¿—åˆ†æå·¥å…·****mysqldumpslowåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¦‚æœè¦æ‰‹å·¥åˆ†ææ—¥å¿—ï¼ŒæŸ¥æ‰¾ã€åˆ†æSQLï¼Œæ˜¾ç„¶æ˜¯ä¸ªä½“åŠ›æ´»ï¼ŒMySQLæä¾›äº†æ—¥å¿—åˆ†æå·¥å…·mysqldumpslow æŸ¥çœ‹mysqldumpslowçš„å¸®åŠ©ä¿¡æ¯ï¼š [root@DB-Server ~]# mysqldumpslow --help Usage: mysqldumpslow [ OPTS... ] [ LOGS... ] Parse and summarize the MySQL slow query log. Options are --verbose verbose --debug debug --help write this text to standard output -v verbose -d debug -s ORDER what to sort by (al, at, ar, c, l, r, t), &#39;at&#39; is default al: average lock time ar: average rows sent at: average query time c: count l: lock time r: rows sent t: query time -r reverse the sort order (largest last instead of first) -t NUM just show the top n queries -a don&#39;t abstract all numbers to N and strings to &#39;S&#39; -n NUM abstract numbers with at least n digits within names -g PATTERN grep: only consider stmts that include this string -h HOSTNAME hostname of db server for *-slow.log filename (can be wildcard), default is &#39;*&#39;, i.e. match all -i NAME name of server instance (if using mysql.server startup script) -l don&#39;t subtract lock time from total time -s, æ˜¯è¡¨ç¤ºæŒ‰ç…§ä½•ç§æ–¹å¼æ’åºï¼Œ c: è®¿é—®è®¡æ•° l: é”å®šæ—¶é—´ r: è¿”å›è®°å½• t: æŸ¥è¯¢æ—¶é—´ al:å¹³å‡é”å®šæ—¶é—´ ar:å¹³å‡è¿”å›è®°å½•æ•° at:å¹³å‡æŸ¥è¯¢æ—¶é—´ -t, æ˜¯top nçš„æ„æ€ï¼Œå³ä¸ºè¿”å›å‰é¢å¤šå°‘æ¡çš„æ•°æ®ï¼› -g, åè¾¹å¯ä»¥å†™ä¸€ä¸ªæ­£åˆ™åŒ¹é…æ¨¡å¼ï¼Œå¤§å°å†™ä¸æ•æ„Ÿçš„ï¼› æ¯”å¦‚ å¾—åˆ°è¿”å›è®°å½•é›†æœ€å¤šçš„10ä¸ªSQLã€‚ mysqldumpslow -s r -t 10 /database/mysql/mysql06_slow.log å¾—åˆ°è®¿é—®æ¬¡æ•°æœ€å¤šçš„10ä¸ªSQL mysqldumpslow -s c -t 10 /database/mysql/mysql06_slow.log å¾—åˆ°æŒ‰ç…§æ—¶é—´æ’åºçš„å‰10æ¡é‡Œé¢å«æœ‰å·¦è¿æ¥çš„æŸ¥è¯¢è¯­å¥ã€‚ mysqldumpslow -s t -t 10 -g â€œleft joinâ€ /database/mysql/mysql06_slow.log å¦å¤–å»ºè®®åœ¨ä½¿ç”¨è¿™äº›å‘½ä»¤æ—¶ç»“åˆ | å’Œmore ä½¿ç”¨ ï¼Œå¦åˆ™æœ‰å¯èƒ½å‡ºç°åˆ·å±çš„æƒ…å†µã€‚ mysqldumpslow -s r -t 20 /mysqldata/mysql/mysql06-slow.log | more","categories":[{"name":"mysql","slug":"mysql","permalink":"https://huangxingx.github.io/categories/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://huangxingx.github.io/tags/mysql/"},{"name":"æ…¢æ—¥å¿—","slug":"æ…¢æ—¥å¿—","permalink":"https://huangxingx.github.io/tags/%E6%85%A2%E6%97%A5%E5%BF%97/"}]},{"title":"SQLä¸­çš„inä¸not inã€existsä¸not existsçš„åŒºåˆ«ä»¥åŠæ€§èƒ½åˆ†æ","slug":"mysql/SQLä¸­çš„inä¸not-inã€existsä¸not-existsçš„åŒºåˆ«ä»¥åŠæ€§èƒ½åˆ†æ","date":"2021-09-14T14:55:15.000Z","updated":"2022-11-01T02:43:31.312Z","comments":true,"path":"2021/09/14/mysql/SQLä¸­çš„inä¸not-inã€existsä¸not-existsçš„åŒºåˆ«ä»¥åŠæ€§èƒ½åˆ†æ/","link":"","permalink":"https://huangxingx.github.io/2021/09/14/mysql/SQL%E4%B8%AD%E7%9A%84in%E4%B8%8Enot-in%E3%80%81exists%E4%B8%8Enot-exists%E7%9A%84%E5%8C%BA%E5%88%AB%E4%BB%A5%E5%8F%8A%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/","excerpt":"","text":"1ã€inå’Œexistsinæ˜¯æŠŠå¤–è¡¨å’Œå†…è¡¨ä½œhashè¿æ¥ï¼Œè€Œexistsæ˜¯å¯¹å¤–è¡¨ä½œloopå¾ªç¯ï¼Œæ¯æ¬¡loopå¾ªç¯å†å¯¹å†…è¡¨è¿›è¡ŒæŸ¥è¯¢ï¼Œä¸€ç›´ä»¥æ¥è®¤ä¸ºexistsæ¯”inæ•ˆç‡é«˜çš„è¯´æ³•æ˜¯ä¸å‡†ç¡®çš„ã€‚ å¦‚æœæŸ¥è¯¢çš„ä¸¤ä¸ªè¡¨å¤§å°ç›¸å½“ï¼Œé‚£ä¹ˆç”¨inå’Œexistså·®åˆ«ä¸å¤§ï¼›å¦‚æœä¸¤ä¸ªè¡¨ä¸­ä¸€ä¸ªè¾ƒå°ä¸€ä¸ªè¾ƒå¤§ï¼Œåˆ™å­æŸ¥è¯¢è¡¨å¤§çš„ç”¨existsï¼Œå­æŸ¥è¯¢è¡¨å°çš„ç”¨inï¼› 2ã€not in å’Œnot existsnot in é€»è¾‘ä¸Šä¸å®Œå…¨ç­‰åŒäºnot existsï¼Œå¦‚æœä½ è¯¯ç”¨äº†not inï¼Œå°å¿ƒä½ çš„ç¨‹åºå­˜åœ¨è‡´å‘½çš„BUGï¼Œè¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š create table #t1(c1 int,c2 int); create table #t2(c1 int,c2 int); insert into #t1 values(1,2); insert into #t1 values(1,3); insert into #t2 values(1,2); insert into #t2 values(1,null); select * from #t1 where c2 not in(select c2 from #t2); --&gt;æ‰§è¡Œç»“æœï¼šæ—  select * from #t1 where not exists(select 1 from #t2 where #t2.c2=#t1.c2) --&gt;æ‰§è¡Œç»“æœï¼š1 3 æ­£å¦‚æ‰€çœ‹åˆ°çš„ï¼Œnot inå‡ºç°äº†ä¸æœŸæœ›çš„ç»“æœé›†ï¼Œå­˜åœ¨é€»è¾‘é”™è¯¯ã€‚å¦‚æœçœ‹ä¸€ä¸‹ä¸Šè¿°ä¸¤ä¸ªselect è¯­å¥çš„æ‰§è¡Œè®¡åˆ’ï¼Œä¹Ÿä¼šä¸åŒï¼Œåè€…ä½¿ç”¨äº†hash_ajï¼Œæ‰€ä»¥ï¼Œè¯·å°½é‡ä¸è¦ä½¿ç”¨not in(å®ƒä¼šè°ƒç”¨å­æŸ¥è¯¢)ï¼Œè€Œå°½é‡ä½¿ç”¨not existsï¼ˆå®ƒä¼šè°ƒç”¨å…³è”å­æŸ¥è¯¢ï¼‰ã€‚ å¦‚æœå­æŸ¥è¯¢ä¸­è¿”å›çš„ä»»æ„ä¸€æ¡è®°å½•å«æœ‰ç©ºå€¼ï¼Œåˆ™æŸ¥è¯¢å°†ä¸è¿”å›ä»»ä½•è®°å½•ã€‚å¦‚æœå­æŸ¥è¯¢å­—æ®µæœ‰éç©ºé™åˆ¶ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨not inï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡æç¤ºè®©å®ƒç”¨hasg_ajæˆ–merge_ajè¿æ¥ã€‚ å¦‚æœæŸ¥è¯¢è¯­å¥ä½¿ç”¨äº†not inï¼Œé‚£ä¹ˆå¯¹å†…å¤–è¡¨éƒ½è¿›è¡Œå…¨è¡¨æ‰«æï¼Œæ²¡æœ‰ç”¨åˆ°ç´¢å¼•ï¼›è€Œnot existsçš„å­æŸ¥è¯¢ä¾ç„¶èƒ½ç”¨åˆ°è¡¨ä¸Šçš„ç´¢å¼•ã€‚æ‰€ä»¥æ— è®ºå“ªä¸ªè¡¨å¤§ï¼Œç”¨not existséƒ½æ¯”not in è¦å¿«ã€‚ 3ã€in ä¸ = çš„åŒºåˆ«select name from student where name in(&#39;zhang&#39;,&#39;wang&#39;,&#39;zhao&#39;); ä¸ select name from student where name=&#39;zhang&#39; or name=&#39;wang&#39; or name=&#39;zhao&#39; çš„ç»“æœæ˜¯ç›¸åŒçš„ã€‚ å…¶ä»–åˆ†æå¯¹äºin å’Œ existsçš„æ€§èƒ½åŒºåˆ«: å¦‚æœå­æŸ¥è¯¢å¾—å‡ºçš„ç»“æœé›†è®°å½•è¾ƒå°‘ï¼Œä¸»æŸ¥è¯¢ä¸­çš„è¡¨è¾ƒå¤§ä¸”åˆæœ‰ç´¢å¼•æ—¶åº”è¯¥ç”¨in,åä¹‹å¦‚æœå¤–å±‚çš„ä¸»æŸ¥è¯¢è®°å½•è¾ƒå°‘ï¼Œå­æŸ¥è¯¢ä¸­çš„è¡¨å¤§ï¼Œåˆæœ‰ç´¢å¼•æ—¶ä½¿ç”¨existsã€‚ å…¶å®æˆ‘ä»¬åŒºåˆ†inå’Œexistsä¸»è¦æ˜¯é€ æˆäº†é©±åŠ¨é¡ºåºçš„æ”¹å˜ï¼ˆè¿™æ˜¯æ€§èƒ½å˜åŒ–çš„å…³é”®ï¼‰ï¼Œå¦‚æœæ˜¯existsï¼Œé‚£ä¹ˆä»¥å¤–å±‚è¡¨ä¸ºé©±åŠ¨è¡¨ï¼Œå…ˆè¢«è®¿é—®ï¼Œå¦‚æœæ˜¯INï¼Œé‚£ä¹ˆå…ˆæ‰§è¡Œå­æŸ¥è¯¢ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šä»¥é©±åŠ¨è¡¨çš„å¿«é€Ÿè¿”å›ä¸ºç›®æ ‡ï¼Œé‚£ä¹ˆå°±ä¼šè€ƒè™‘åˆ°ç´¢å¼•åŠç»“æœé›†çš„å…³ç³»äº† å¯¹äºnot in å’Œ not existsçš„æ€§èƒ½åŒºåˆ«ï¼š not in åªæœ‰å½“å­æŸ¥è¯¢ä¸­ï¼Œselect å…³é”®å­—åçš„å­—æ®µæœ‰not nullçº¦æŸæˆ–è€…æœ‰è¿™ç§æš—ç¤ºæ—¶ç”¨not in,å¦å¤–å¦‚æœä¸»æŸ¥è¯¢ä¸­è¡¨å¤§ï¼Œå­æŸ¥è¯¢ä¸­çš„è¡¨å°ä½†æ˜¯è®°å½•å¤šï¼Œåˆ™åº”å½“ä½¿ç”¨not in,å¹¶ä½¿ç”¨anti hash join. å¦‚æœä¸»æŸ¥è¯¢è¡¨ä¸­è®°å½•å°‘ï¼Œå­æŸ¥è¯¢è¡¨ä¸­è®°å½•å¤šï¼Œå¹¶æœ‰ç´¢å¼•ï¼Œå¯ä»¥ä½¿ç”¨not exists,å¦å¤–not inæœ€å¥½ä¹Ÿå¯ä»¥ç”¨/*+ HASH_AJ */æˆ–è€…å¤–è¿æ¥+is null NOT IN åœ¨åŸºäºæˆæœ¬çš„åº”ç”¨ä¸­è¾ƒå¥½","categories":[{"name":"mysql","slug":"mysql","permalink":"https://huangxingx.github.io/categories/mysql/"}],"tags":[{"name":"sql","slug":"sql","permalink":"https://huangxingx.github.io/tags/sql/"},{"name":"æ€§èƒ½","slug":"æ€§èƒ½","permalink":"https://huangxingx.github.io/tags/%E6%80%A7%E8%83%BD/"}]},{"title":"springboot äº‹åŠ¡","slug":"java/springboot-äº‹åŠ¡","date":"2021-09-13T12:18:56.000Z","updated":"2022-11-01T02:43:19.954Z","comments":true,"path":"2021/09/13/java/springboot-äº‹åŠ¡/","link":"","permalink":"https://huangxingx.github.io/2021/09/13/java/springboot-%E4%BA%8B%E5%8A%A1/","excerpt":"","text":"[toc] @Transactional æ³¨è§£çš„å±æ€§ä»‹ç»value å’Œ transactionManager å±æ€§å®ƒä»¬ä¸¤ä¸ªæ˜¯ä¸€æ ·çš„æ„æ€ã€‚å½“é…ç½®äº†å¤šä¸ªäº‹åŠ¡ç®¡ç†å™¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¯¥å±æ€§æŒ‡å®šé€‰æ‹©å“ªä¸ªäº‹åŠ¡ç®¡ç†å™¨ã€‚ propagation å±æ€§äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºï¼Œé»˜è®¤å€¼ä¸º Propagation.REQUIREDã€‚ REQUIRED æ”¯æŒäº‹åŠ¡ï¼Œå¦‚æœä¸šåŠ¡æ–¹æ³•æ‰§è¡Œæ—¶åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œåˆ™åŠ å…¥å½“å‰äº‹åŠ¡ï¼Œå¦åˆ™åˆ™é‡æ–°å¼€å§‹ä¸€ä¸ªäº‹åŠ¡ã€‚ REQUIRES_NEW æ”¯æŒäº‹åŠ¡ã€‚æ¯æ¬¡éƒ½æ˜¯åˆ›å»ºä¸€ä¸ªæ–°äº‹ç‰©ï¼Œå¦‚æœå½“å‰å·²ç»åœ¨äº‹åŠ¡ä¸­äº†ï¼Œä¼šæŒ‚èµ·å½“å‰äº‹åŠ¡ã€‚ NESTED æ”¯æŒäº‹åŠ¡ã€‚å¦‚æœå½“å‰å·²ç»åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­äº†ï¼Œåˆ™åµŒå¥—åœ¨å·²æœ‰çš„äº‹åŠ¡ä¸­ä½œä¸ºä¸€ä¸ªå­äº‹åŠ¡ã€‚å¦‚æœå½“å‰æ²¡åœ¨äº‹åŠ¡ä¸­åˆ™å¼€å¯ä¸€ä¸ªäº‹åŠ¡ã€‚ SUPPORTS æ”¯æŒäº‹åŠ¡ã€‚å½“å‰æœ‰äº‹åŠ¡å°±åŠ å…¥å½“å‰äº‹åŠ¡ã€‚å½“å‰æ²¡æœ‰äº‹åŠ¡å°±ç®—äº†ï¼Œä¸ä¼šå¼€å¯ä¸€ä¸ªäº‹ç‰©ã€‚ MANDATORY æ”¯æŒäº‹åŠ¡ï¼Œå¦‚æœä¸šåŠ¡æ–¹æ³•æ‰§è¡Œæ—¶å·²ç»åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œåˆ™åŠ å…¥å½“å‰äº‹åŠ¡ã€‚å¦åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚ NOT_SUPPORTED ä¸æ”¯æŒäº‹åŠ¡ï¼Œå¦‚æœä¸šåŠ¡æ–¹æ³•æ‰§è¡Œæ—¶å·²ç»åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œåˆ™æŒ‚èµ·å½“å‰äº‹åŠ¡ï¼Œç­‰æ–¹æ³•æ‰§è¡Œå®Œæ¯•åï¼Œäº‹åŠ¡æ¢å¤è¿›è¡Œã€‚ NEVER ä¸æ”¯æŒäº‹åŠ¡ã€‚å¦‚æœå½“å‰å·²ç»åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­äº†ï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚æ•°æ®å›æ»šã€‚ isolation å±æ€§äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œé»˜è®¤å€¼ä¸º Isolation.DEFAULTã€‚ Isolation.DEFAULT ä½¿ç”¨åº•å±‚æ•°æ®åº“é»˜è®¤çš„éš”ç¦»çº§åˆ«ã€‚ Isolation.READ_UNCOMMITTED Isolation.READ_COMMITTED Isolation.REPEATABLE_READ Isolation.SERIALIZABLE timeout å±æ€§äº‹åŠ¡çš„è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤å€¼ä¸º-1ã€‚å¦‚æœè¶…è¿‡è¯¥æ—¶é—´é™åˆ¶ä½†äº‹åŠ¡è¿˜æ²¡æœ‰å®Œæˆï¼Œåˆ™è‡ªåŠ¨å›æ»šäº‹åŠ¡ã€‚ readOnly å±æ€§æŒ‡å®šäº‹åŠ¡æ˜¯å¦ä¸ºåªè¯»äº‹åŠ¡ï¼Œé»˜è®¤å€¼ä¸º falseï¼›ä¸ºäº†å¿½ç•¥é‚£äº›ä¸éœ€è¦äº‹åŠ¡çš„æ–¹æ³•ï¼Œæ¯”å¦‚è¯»å–æ•°æ®ï¼Œå¯ä»¥è®¾ç½® read-only ä¸º trueã€‚ rollbackFor å±æ€§ç”¨äºæŒ‡å®šèƒ½å¤Ÿè§¦å‘äº‹åŠ¡å›æ»šçš„å¼‚å¸¸ç±»å‹ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªå¼‚å¸¸ç±»å‹ã€‚ noRollbackFor å±æ€§æŠ›å‡ºæŒ‡å®šçš„å¼‚å¸¸ç±»å‹ï¼Œä¸å›æ»šäº‹åŠ¡ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå¤šä¸ªå¼‚å¸¸ç±»å‹ã€‚ äº‹åŠ¡ä¸ç”Ÿæ•ˆçš„æƒ…å†µ1. æ•°æ®åº“ä¸æ”¯æŒäº‹ç‰©mysql ä¸­ MyISAM æ˜¯ä¸æ”¯æŒäº‹ç‰©çš„ã€‚ 2. ç±»å†…éƒ¨è®¿é—®ç®€å•æ¥è®²å°±æ˜¯æŒ‡éç›´æ¥è®¿é—®å¸¦æ³¨è§£æ ‡è®°çš„æ–¹æ³• Bï¼Œè€Œæ˜¯é€šè¿‡ç±»æ™®é€šæ–¹æ³• Aï¼Œç„¶åç”± A è®¿é—® B 3. ç§æœ‰æ–¹æ³•åœ¨ç§æœ‰æ–¹æ³•ä¸Šï¼Œæ·»åŠ @Transactionalæ³¨è§£ä¹Ÿä¸ä¼šç”Ÿæ•ˆï¼Œç§æœ‰æ–¹æ³•å¤–éƒ¨ä¸èƒ½è®¿é—®ï¼Œæ‰€ä»¥åªèƒ½å†…éƒ¨è®¿é—®ã€‚ 4. å¼‚å¸¸ä¸åŒ¹é…@Transactionalæ³¨è§£é»˜è®¤å¤„ç†è¿è¡Œæ—¶å¼‚å¸¸ï¼Œå³åªæœ‰æŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸æ—¶ï¼Œæ‰ä¼šè§¦å‘äº‹åŠ¡å›æ»šï¼Œå¦åˆ™å¹¶ä¸ä¼š 5. å¤šçº¿ç¨‹è¿™ä¸ªåœºæ™¯å¯èƒ½å¹¶ä¸å¤šè§ï¼Œåœ¨æ ‡è®°äº‹åŠ¡çš„æ–¹æ³•å†…éƒ¨ï¼Œå¦èµ·å­çº¿ç¨‹æ‰§è¡Œ db æ“ä½œï¼Œæ­¤æ—¶äº‹åŠ¡åŒæ ·ä¸ä¼šç”Ÿæ•ˆ 6. ä¼ æ’­å±æ€§è®¾ç½®å¼‚å¸¸æœ‰äº›ä¼ æ’­å±æ€§æ˜¯ä¸æ”¯æŒäº‹ç‰©çš„ï¼Œè§ä¸Šæ–‡ä¸­å‘¢","categories":[{"name":"java","slug":"java","permalink":"https://huangxingx.github.io/categories/java/"}],"tags":[{"name":"java","slug":"java","permalink":"https://huangxingx.github.io/tags/java/"},{"name":"springboot","slug":"springboot","permalink":"https://huangxingx.github.io/tags/springboot/"},{"name":"äº‹åŠ¡","slug":"äº‹åŠ¡","permalink":"https://huangxingx.github.io/tags/%E4%BA%8B%E5%8A%A1/"}]},{"title":"uvicorn åˆè¯†","slug":"python/uvicorn-åˆè¯†","date":"2021-09-09T09:10:23.000Z","updated":"2022-10-31T09:40:57.113Z","comments":true,"path":"2021/09/09/python/uvicorn-åˆè¯†/","link":"","permalink":"https://huangxingx.github.io/2021/09/09/python/uvicorn-%E5%88%9D%E8%AF%86/","excerpt":"","text":"uvicornç®€ä»‹uvicornæ˜¯ä¸€ä¸ªåŸºäºasyncioå¼€å‘çš„ä¸€ä¸ªè½»é‡çº§é«˜æ•ˆçš„webæœåŠ¡å™¨æ¡†æ¶ã€‚ å®˜æ–¹åœ°å€ï¼š http://www.uvicorn.org/ uvicorn è®¾è®¡çš„åˆè¡·æ˜¯æƒ³è¦å®ç°ä¸¤ä¸ªç›®æ ‡ï¼š ä½¿ç”¨uvloopå’Œhttptoolså®ç°ä¸€ä¸ªæé€Ÿçš„asyncioæœåŠ¡å™¨ã€‚ å®ç°ä¸€ä¸ªåŸºäºASGI(å¼‚æ­¥æœåŠ¡å™¨ç½‘å…³æ¥å£)çš„æœ€å°çš„åº”ç”¨ç¨‹åºæ¥å£ã€‚ å®ƒç›®å‰æ”¯æŒhttpï¼Œwebsocketsï¼ŒPub/Sub å¹¿æ’­ï¼Œå¹¶ä¸”å¯ä»¥æ‰©å±•åˆ°å…¶ä»–åè®®å’Œæ¶ˆæ¯ç±»å‹ã€‚","categories":[{"name":"python","slug":"python","permalink":"https://huangxingx.github.io/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://huangxingx.github.io/tags/python/"},{"name":"web","slug":"web","permalink":"https://huangxingx.github.io/tags/web/"}]},{"title":"golang helloworld docker å¯åŠ¨","slug":"golang/golang-helloworld-docker-å¯åŠ¨","date":"2021-09-08T09:15:43.000Z","updated":"2022-11-01T02:42:56.887Z","comments":true,"path":"2021/09/08/golang/golang-helloworld-docker-å¯åŠ¨/","link":"","permalink":"https://huangxingx.github.io/2021/09/08/golang/golang-helloworld-docker-%E5%90%AF%E5%8A%A8/","excerpt":"","text":"golangçš„helloworldç¨‹åºï¼Œåˆ©ç”¨docker-composeå¯åŠ¨ åˆ›å»ºé¡¹ç›®ç›®å½•å¹¶åˆå§‹åŒ–go mod é¡¹ç›® mkdir hellogo cd hellogo # åˆå§‹åŒ– go mod é¡¹ç›® go mod init hellogo é¡¹ç›®ç»“æ„ âœ hellogo tree . â”œâ”€â”€ docker-compose.yaml â”œâ”€â”€ dockerfile â”œâ”€â”€ go.mod â””â”€â”€ main.go vim main.go package main import ( &quot;fmt&quot; &quot;time&quot; ) func main() &#123; fmt.Println(&quot;hello world&quot;) i := 1 for &#123; time.Sleep(1 * time.Second) fmt.Printf(&quot;wait %d second\\n&quot;, i) i++ &#125; &#125; vim dockerfile # build stage FROM golang:alpine AS builder RUN apk add --no-cache git gcc libc-dev RUN mkdir /app COPY go.mod /app/go.mod COPY main.go /app/main.go WORKDIR /app RUN go mod tidy RUN go build -o hellogo main.go # final stage FROM alpine:latest LABEL Name=hellogo Version=0.0.1 RUN apk --no-cache add ca-certificates COPY --from=builder /app/hellogo /app ENTRYPOINT ./app # EXPOSE 80 vim docker-compose.yaml version: &quot;3&quot; services: hellogo: build: . image: hellogo network_mode: bridge container_name: hellogo è¿è¡Œ docker-compose docker-compose -f docker-compose.yaml up --build çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºè¡¨ç¤ºæˆåŠŸ ... Successfully built 50cb8339209e Successfully tagged hellogo:latest Starting hellogo ... done Attaching to hellogo hellogo | hello world hellogo | wait 1 second hellogo | wait 2 second hellogo | wait 3 second","categories":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/categories/golang/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://huangxingx.github.io/tags/docker/"},{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/tags/golang/"},{"name":"docker-compose","slug":"docker-compose","permalink":"https://huangxingx.github.io/tags/docker-compose/"},{"name":"helloworld","slug":"helloworld","permalink":"https://huangxingx.github.io/tags/helloworld/"}]},{"title":"git å¸¸ç”¨å‘½ä»¤","slug":"git/git-å¸¸ç”¨å‘½ä»¤","date":"2021-09-08T07:43:04.000Z","updated":"2022-10-31T09:40:57.105Z","comments":true,"path":"2021/09/08/git/git-å¸¸ç”¨å‘½ä»¤/","link":"","permalink":"https://huangxingx.github.io/2021/09/08/git/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","excerpt":"","text":"git pull git push git checkout # åˆ‡æ¢åˆ†æ”¯åˆ°æœ¬åœ° develop åˆ†æ”¯ git checkout develop # ä»å½“å‰åˆ†æ”¯æ–°å»ºä¸€ä¸ªåˆ†æ”¯ developï¼Œå¹¶åˆ‡æ¢åˆ° develop åˆ†æ”¯ git checkout -b develop git status git log git stash git branch git rebase # å˜åŸºåˆ°ä¸¤ä¸ªæäº¤ä¹‹å‰ git rebase -i HEAD~2 git submodule # æ‰€æœ‰å­æ¨¡å—æ‰§è¡Œ git reset --hard git submodule foreach --recursive git reset --hard # æ›´æ–°å­æ¨¡å— git submodule update --init git submodule update --remote","categories":[{"name":"git","slug":"git","permalink":"https://huangxingx.github.io/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://huangxingx.github.io/tags/git/"}]},{"title":"redis è¯¦è§£","slug":"redis/redis-è¯¦è§£","date":"2021-09-08T07:22:26.000Z","updated":"2022-11-01T02:43:46.905Z","comments":true,"path":"2021/09/08/redis/redis-è¯¦è§£/","link":"","permalink":"https://huangxingx.github.io/2021/09/08/redis/redis-%E8%AF%A6%E8%A7%A3/","excerpt":"","text":"[toc] redis ä»‹ç»å®˜ç½‘åœ°å€ï¼šhttps://redis.io/ Redisçš„å…¨ç§°æ˜¯ REmote DIctionary Serverï¼Œæ˜¯ä¸€ä¸ªé«˜æ•ˆçš„å†…å­˜é”®å€¼æ•°æ®åº“ï¼Œå¸¸è¢«ç”¨æ¥åšåˆ†å¸ƒå¼çš„é«˜é€Ÿç¼“å­˜ï¼Œç›¸æ¯”è¾ƒæˆ‘ä»¬å¸¸è§„ä½¿ç”¨çš„Mysqlã€MongoDBç­‰æ•°æ®åº“ï¼ŒRedisçš„æœ€å¤§ç‰¹ç‚¹åœ¨äºæ•°æ®è¯»å†™å…¨éƒ¨åœ¨å†…å­˜ä¸­è¿›è¡Œï¼Œè¿›è€Œå¸¦æ¥æå¤§çš„æ•ˆç‡ä¼˜åŠ¿ã€‚ redis ä½¿ç”¨åœºæ™¯ ä½œä¸ºç¼“å­˜æœåŠ¡å™¨ï¼ˆString, Hashï¼‰ ä½œä¸ºæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆListï¼‰ æ•°æ®æ’è¡Œæ¦œï¼ˆSorted Setï¼‰ çƒ­ç‚¹æ•°æ® è®¡æ•°å™¨ï¼› æ¯”å¦‚ç»Ÿè®¡ç‚¹å‡»ç‡ã€ç‚¹èµç‡ï¼ŒRediså…·æœ‰åŸå­æ€§ï¼Œå¯ä»¥é¿å…å¹¶å‘é—®é¢˜ã€‚ ä»¥å‰åªåˆ—å‡ºç®€å•ä¸”å¸¸è§çš„ç”¨é€” redis æ•°æ®ç±»å‹Stringã€Listã€Hashã€Setã€Sorted Set äº”ç§æ•°æ®ç±»å‹ StringStringå’Œæˆ‘ä»¬å¸¸è§„ç†è§£çš„å­—ç¬¦ä¸²åŸºæœ¬ä¸€è‡´ï¼Œä¸»è¦å­˜å‚¨åºåˆ—åŒ–åçš„å­—ç¬¦ä¸²ï¼Œæ”¯æŒå†™å…¥åŸç”Ÿå­—ç¬¦ä¸²ä¹Ÿæ”¯æŒå†™å…¥æ•°å­—ç±»å‹ã€‚ ListListå³ä¸ºåˆ—è¡¨ï¼ŒListåœ¨Redisåº•å±‚é‡‡ç”¨çš„æ˜¯åŒå‘é“¾è¡¨å®ç°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šå‘ç°Redisçš„Listæ“ä½œå‘½ä»¤æœ‰å·¦å³ä¹‹åˆ†ï¼Œæ¯”å¦‚LPUSHã€RPUSHï¼Œå®é™…ä¸Šå°±æ˜¯åŒç«¯åˆ—è¡¨å·¦å³ä¸¤ç«¯çš„å­˜å–ã€‚ HashHashå¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬å¸¸è§„ä½¿ç”¨çš„å­—å…¸æ•°æ®ç»“æ„ï¼ŒRedisé‡‡ç”¨æ•£åˆ—è¡¨æ¥å®ç°Hashï¼Œ ä¸€ä¸ªHashç»“æ„é‡Œé¢å¯ä»¥å­˜åœ¨å¾ˆå¤šçš„keyå’Œvalueï¼ŒHashæ˜¯Redisæ¯”è¾ƒæ¨èä½¿ç”¨çš„ä¸€ç§æ•°æ®ç»“æ„ SetSetæ˜¯é›†åˆï¼Œæ»¡è¶³é›†åˆç¡®å®šæ€§ã€æ— åºæ€§ã€å”¯ä¸€æ€§ä¸‰ä¸ªæ€§è´¨ï¼Œå¯ä»¥ç”¨æ¥è¿›è¡Œå…ƒç´ çš„å»é‡æ“ä½œ Sorted SetSorted Setæ˜¯æœ‰åºé›†åˆï¼Œæ»¡è¶³é›†åˆå”¯ä¸€æ€§çš„è¦æ±‚ï¼ŒåŒæ—¶ä¹Ÿæ»¡è¶³æœ‰åºçš„æ€§è´¨ã€‚å‘Sorted Setä¸­æ’å…¥å…ƒç´ çš„æ—¶å€™éœ€è¦åŒæ—¶æŒ‡å®šä¸€ä¸ªScoreï¼Œç”¨äºä½œä¸ºæ’åºçš„æ ‡å‡†ï¼Œ Sorted Setçš„åº•å±‚å®ç°é‡‡ç”¨çš„æ˜¯Skip List redis å‘½ä»¤ å‚è€ƒï¼š Redisè¯¦è§£ï¼ˆ1ï¼‰â€”â€”ä¸ºä»€ä¹ˆæˆ‘ä»¬éƒ½éœ€è¦äº†è§£Redis","categories":[{"name":"redis","slug":"redis","permalink":"https://huangxingx.github.io/categories/redis/"}],"tags":[]},{"title":"golang å¯åŠ¨ä¸€ä¸ªç®€å• http ä»£ç†","slug":"golang/golang å¯åŠ¨ä¸€ä¸ªç®€å• http ä»£ç†","date":"2020-05-08T03:30:57.000Z","updated":"2022-10-31T09:40:57.106Z","comments":true,"path":"2020/05/08/golang/golang å¯åŠ¨ä¸€ä¸ªç®€å• http ä»£ç†/","link":"","permalink":"https://huangxingx.github.io/2020/05/08/golang/golang%20%E5%90%AF%E5%8A%A8%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%20http%20%E4%BB%A3%E7%90%86/","excerpt":"","text":"golang è½¬å‘ http è¯·æ±‚package main import ( &quot;log&quot; &quot;net/http&quot; &quot;net/http/httputil&quot; &quot;net/url&quot; ) //å°†requestè½¬å‘ç»™ http://127.0.0.1:2003 func proxyHandler(w http.ResponseWriter, r *http.Request) &#123; trueServer := &quot;http://127.0.0.1:15672&quot; url, err := url.Parse(trueServer) if err != nil &#123; log.Println(err) return &#125; proxy := httputil.NewSingleHostReverseProxy(url) proxy.ServeHTTP(w, r) &#125; func main() &#123; http.HandleFunc(&quot;/&quot;, proxyHandler) log.Fatal(http.ListenAndServe(&quot;:2002&quot;, nil)) &#125;","categories":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/categories/golang/"}],"tags":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/tags/golang/"},{"name":"http","slug":"http","permalink":"https://huangxingx.github.io/tags/http/"}]},{"title":"go-micro ä½¿ç”¨é—®é¢˜è®°å½•","slug":"golang/go-micro ä½¿ç”¨é—®é¢˜è®°å½•","date":"2019-11-05T10:30:57.000Z","updated":"2022-11-01T02:42:47.276Z","comments":true,"path":"2019/11/05/golang/go-micro ä½¿ç”¨é—®é¢˜è®°å½•/","link":"","permalink":"https://huangxingx.github.io/2019/11/05/golang/go-micro%20%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/","excerpt":"","text":"1. &#109;&#x69;&#99;&#x72;&#x6f;&#64;&#118;&#49;&#x2e;&#49;&#52; ä¹‹åä½¿ç”¨ consul ä½œä¸ºæ³¨å†Œä¸­å¿ƒé—®é¢˜&#x6d;&#x69;&#99;&#x72;&#111;&#x40;&#x76;&#x31;&#46;&#49;&#x34; ä¹‹åæ›´æ¢äº†é»˜è®¤çš„æ³¨å†Œä¸­å¿ƒï¼ŒæŠŠ consul æ¢æˆäº† etcd ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ consul ä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼Œéœ€è¦é‡æ–°ç¼–è¯‘ microã€‚ clone æºç ï¼š git clone https://github.com/micro/micro.git åˆ‡åˆ°æºç ç›®å½•å¹¶æ–°å¢ plugins.go : cd microæºç ç›®å½• vi plugins.go package main import ( _ &quot;github.com/micro/go-plugins/registry/consul&quot; ) ç¼–è¯‘ go build -o mainWithConsul main.go plugins.go è¿è¡Œ ./mainWithConsul --registry=consul api 2. micro ç”¨ gin ä½œä¸º api é—®é¢˜ç”¨ gin åšä¸º gin-api æœåŠ¡æ—¶ï¼Œ é€šè¿‡ micro new â€“type web åˆ›å»ºä¸€ä¸ªæœåŠ¡å‡ºæ¥ï¼Œæ³¨æ„ä¿®æ”¹æœåŠ¡çš„ nameï¼Œæ”¹ä¸º com.example.api.ServiceName,ä¸”åœ¨ gin router ä¸­åˆ›å»ºï¼š router := gin.Default() r := router.Group(&quot;/ServiceName&quot;) micro api --namespace=com.example.api å¯åŠ¨ è¿™é‡Œå¿…é¡»è¦åŠ  api ä¸ç„¶è½¬å‘ä¸äº† 3. ä½¿ç”¨ micro new ç”Ÿæˆæ¨¡æ¿ä½¿ç”¨ micro new ç”Ÿæˆæ¨¡æ¿ï¼Œ RegisterSubscriber çš„ topic åç§°å’Œ service name ä¸€æ ·ï¼Œå¯¼è‡´å¤§æ¦‚50%çš„æ¦‚ç‡å‡ºç°è¯·æ±‚å¤±è´¥é—®é¢˜. è§£å†³æ–¹æ³•: æ³¨é‡Š RegisterSubscriber éƒ¨åˆ†ä»£ç ï¼Œæˆ–è€…æ¢ä¸€ä¸ª topic åç§°ã€‚","categories":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/categories/golang/"}],"tags":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/tags/golang/"},{"name":"go-micro","slug":"go-micro","permalink":"https://huangxingx.github.io/tags/go-micro/"},{"name":"å¾®æœåŠ¡","slug":"å¾®æœåŠ¡","permalink":"https://huangxingx.github.io/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"},{"name":"æ³¨æ„äº‹é¡¹","slug":"æ³¨æ„äº‹é¡¹","permalink":"https://huangxingx.github.io/tags/%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/"}]},{"title":"golang ç”Ÿæˆéšæœºå­—ç¬¦ä¸²","slug":"golang/golang ç”Ÿæˆéšæœºå­—ç¬¦ä¸²","date":"2019-06-13T07:41:22.000Z","updated":"2022-10-31T09:00:20.493Z","comments":true,"path":"2019/06/13/golang/golang ç”Ÿæˆéšæœºå­—ç¬¦ä¸²/","link":"","permalink":"https://huangxingx.github.io/2019/06/13/golang/golang%20%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E5%AD%97%E7%AC%A6%E4%B8%B2/","excerpt":"","text":"éšæœºå­—ç¬¦ä¸² //RandomStr éšæœºç”Ÿæˆå­—ç¬¦ä¸² func RandomStr(length int) string &#123; str := &quot;0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot; bytes := []byte(str) result := []byte&#123;&#125; r := rand.New(rand.NewSource(time.Now().UnixNano())) for i := 0; i &lt; length; i++ &#123; result = append(result, bytes[r.Intn(len(bytes))]) &#125; return string(result) &#125; ç”Ÿæˆå®šé•¿å­—ç¬¦ä¸²//è·å¾—å®šé•¿å­—ç¬¦ä¸² //str å¡«å……å­—ç¬¦ä¸² //length è·å¾—å®šé•¿çš„é•¿åº¦ //char ä¸å¤Ÿé•¿æ—¶å¡«å……çš„å­—ç¬¦ func GetFixedLenString(str string, length int, char byte) string &#123; if len(str) == 0 &#123; return &quot;&quot; &#125; if len(str) == length &#123; return str &#125; //è¶…å‡ºåˆ‡åé¢ if len(str) &gt; length &#123; return string(str[:length]) &#125; //ç¼ºå°‘æ·»åŠ char if len(str) &lt; length &#123; slice := make([]byte, length-len(str)) for k := range slice &#123; slice[k] = char &#125; return string(append(slice, []byte(str)...)) &#125; return &quot;&quot; &#125; è·å¾—å®šé•¿byte slice//è·å¾—å®šé•¿byte slice //str å¡«å……å­—ç¬¦ä¸² //length è·å¾—å®šé•¿çš„é•¿åº¦ //char ä¸å¤Ÿé•¿æ—¶å¡«å……çš„å­—ç¬¦ func GetFixedLenByte(b []byte, length int, char byte) (tb []byte) &#123; if len(b) == 0 &#123; return &#125; if len(b) == length &#123; return b &#125; //è¶…å‡ºåˆ‡åé¢ if len(b) &gt; length &#123; return b[:length] &#125; //ç¼ºå°‘æ·»åŠ char if len(b) &lt; length &#123; slice := make([]byte, length-len(b)) for k := range slice &#123; slice[k] = char &#125; return append(slice, []byte(b)...) &#125; return &#125; ç”ŸæˆéšæœºéªŒè¯ç package main import ( &quot;fmt&quot; &quot;math/rand&quot; &quot;strings&quot; &quot;time&quot; ) func GenValidateCode(width int) string &#123; numeric := [10]byte&#123;0,1,2,3,4,5,6,7,8,9&#125; r := len(numeric) rand.Seed(time.Now().UnixNano()) var sb strings.Builder for i := 0; i &lt; width; i++ &#123; fmt.Fprintf(&amp;sb, &quot;%d&quot;, numeric[ rand.Intn(r) ]) &#125; return sb.String() &#125; func main() &#123; fmt.Println( GenValidateCode(6) ) &#125;","categories":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/categories/golang/"}],"tags":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/tags/golang/"}]},{"title":"mysql è·ç¦»å‡½æ•° st_distance ä½¿ç”¨","slug":"mysql/mysql è·ç¦»å‡½æ•° st_distance ä½¿ç”¨","date":"2019-06-12T07:58:59.000Z","updated":"2022-11-01T02:43:25.286Z","comments":true,"path":"2019/06/12/mysql/mysql è·ç¦»å‡½æ•° st_distance ä½¿ç”¨/","link":"","permalink":"https://huangxingx.github.io/2019/06/12/mysql/mysql%20%E8%B7%9D%E7%A6%BB%E5%87%BD%E6%95%B0%20st_distance%20%E4%BD%BF%E7%94%A8/","excerpt":"","text":"éšç€è¿‘å‡ å¹´å„ç±»ç§»åŠ¨ç»ˆç«¯çš„è¿…é€Ÿæ™®åŠï¼Œåœ¨æ‰‹æœºç§»åŠ¨å®šä½appä¸­ï¼Œé™„è¿‘çš„äººï¼Œé™„è¿‘çš„åœ°ç‚¹åŠŸèƒ½ååˆ†å¸¸è§,åŸºäºåœ°ç†ä½ç½®çš„æœåŠ¡ï¼ˆLBSï¼‰å’Œç›¸å…³åº”ç”¨ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œè€Œæ”¯æ’‘è¿™äº›åº”ç”¨çš„æœ€åŸºç¡€æŠ€æœ¯ä¹‹ä¸€ï¼Œå°±æ˜¯åŸºäºåœ°ç†ä½ç½®ä¿¡æ¯çš„å¤„ç†ã€‚ st_distance å‡½æ•°st_distance å‡½æ•°æ˜¯ä»mysql5.6.1æ‰åŠ å…¥çš„ã€‚SET @g1 = POINT(1,1), @g2 = POINT(2,2);select st_distance (@g1, @g2);è¾“å‡ºç»“æœï¼š1.4142135623730951 SELECT st_distance (point (1, 1),point(2,2) ) * 111195 // è¾“å‡ºç»“æœï¼š157253.47706807632 å•ä½ï¼šç±³st_distance è®¡ç®—çš„ç»“æœå•ä½æ˜¯åº¦ï¼Œéœ€è¦ä¹˜111195ï¼ˆåœ°çƒåŠå¾„6371000*PI/180ï¼‰æ˜¯å°†å€¼è½¬åŒ–ä¸ºç±³ã€‚ å½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è·ç¦»å‡½æ•°ï¼š CREATE FUNCTION slc ( lat1 DOUBLE, lon1 DOUBLE, lat2 DOUBLE, lon2 DOUBLE ) RETURNS DOUBLE RETURN 6371 * acos( cos(radians(lat1)) * cos(radians(lat2)) * cos( radians(lon2) - radians(lon1) ) + sin(radians(lat1)) * sin(radians(lat2)) ); SELECT slc(1,1,2,2) from DUAL // è¾“å‡ºç»“æœï¼š157.22543203804852 km åº”ç”¨åœºæ™¯:å‡è®¾æˆ‘å½“æ—¶çš„åæ ‡ 117.069,35.86 éœ€è¦æŸ¥è¯¢æˆ‘é™„è¿‘50KMå†…æœåŠ¡åŒºï¼Œå¹¶æŒ‰ç…§è·ç¦»ç”±è¿‘åŠè¿œæ’åˆ— SELECT s.id,s.name,s.lng,s.lat, (st_distance (point (lng, lat),point(117.069,35.86) ) *111195) AS distance FROM road_servicearea s HAVING distance&lt;50 ORDER BY distance çŸ¥è¯†ç§‘æ™®ï¼šåœ°çƒæ˜¯åœ¨ä¸åœåœ°ç»•åœ°è½´æ—‹è½¬ï¼Œåœ¨åœ°çƒä¸­è…°ç”»ä¸€ä¸ªä¸åœ°è½´å‚ç›´çš„å¤§åœ†åœˆï¼Œä½¿åœˆä¸Šçš„æ¯ä¸€ç‚¹éƒ½å’Œå—åŒ—ä¸¤æçš„è·ç¦»ç›¸ç­‰ï¼Œè¿™ä¸ªåœ†åœˆå°±å«ä½œâ€œèµ¤é“â€ã€‚åœ¨èµ¤é“çš„å—åŒ—ä¸¤è¾¹ï¼Œç”»å‡ºè®¸å¤šå’Œèµ¤é“å¹³è¡Œçš„åœ†åœˆï¼Œå°±æ˜¯â€œçº¬åœˆâ€ï¼›æ„æˆè¿™äº›åœ†åœˆçš„çº¿æ®µï¼Œå«åšçº¬çº¿ã€‚æˆ‘ä»¬æŠŠèµ¤é“å®šä¸ºçº¬åº¦é›¶åº¦ï¼Œå‘å—å‘åŒ—å„ä¸º90åº¦ï¼Œåœ¨èµ¤é“ä»¥å—çš„å«å—çº¬ï¼Œåœ¨èµ¤é“ä»¥åŒ—çš„å«åŒ—çº¬ã€‚åŒ—æå°±æ˜¯åŒ—çº¬90åº¦ï¼Œå—æå°±æ˜¯å—çº¬90åº¦ã€‚çº¬åº¦çš„é«˜ä½ä¹Ÿæ ‡å¿—ç€æ°”å€™çš„å†·çƒ­ï¼Œå¦‚èµ¤é“å’Œä½çº¬åº¦åœ°åœ°åŒºæ— å†¬ï¼Œä¸¤æå’Œé«˜çº¬åº¦åœ°åŒºæ— å¤ï¼Œä¸­çº¬åº¦åœ°åŒºå››å­£åˆ†æ˜ã€‚ ä»åŒ—æç‚¹åˆ°å—æç‚¹ï¼Œå¯ä»¥ç”»å‡ºè®¸å¤šå—åŒ—æ–¹å‘çš„ä¸åœ°çƒèµ¤é“å‚ç›´çš„å¤§åœ†åœˆï¼Œè¿™å«ä½œâ€œç»åœˆâ€ï¼›æ„æˆè¿™äº›åœ†åœˆçš„çº¿æ®µï¼Œå°±å«ç»çº¿ã€‚å…¬å…ƒ1884å¹³é¢åæ ‡å›¾å¹´ï¼Œå›½é™…ä¸Šè§„å®šä»¥é€šè¿‡è‹±å›½ä¼¦æ•¦è¿‘éƒŠçš„æ ¼æ—å°¼æ²»å¤©æ–‡å°çš„ç»çº¿ä½œä¸ºè®¡ç®—ç»åº¦çš„èµ·ç‚¹ï¼Œå³ç»åº¦é›¶åº¦é›¶åˆ†é›¶ç§’ï¼Œä¹Ÿç§°â€œæœ¬åˆå­åˆçº¿â€ã€‚åœ¨å®ƒä¸œé¢çš„ä¸ºä¸œç»ï¼Œå…±180åº¦ï¼› åœ¨å®ƒè¥¿é¢çš„ä¸ºè¥¿ç»ï¼Œå…±180åº¦ã€‚å› ä¸ºåœ°çƒæ˜¯åœ†çš„ï¼Œæ‰€ä»¥ä¸œç»180åº¦å’Œè¥¿ç»180åº¦çš„ç»çº¿æ˜¯åŒä¸€æ¡ç»çº¿ã€‚å„å›½å…¬å®š180åº¦ç»çº¿ä¸ºâ€œå›½é™…æ—¥æœŸå˜æ›´çº¿â€ã€‚ä¸ºäº†é¿å…åŒä¸€åœ°åŒºä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„æ—¥æœŸï¼Œå›½é™…æ—¥æœŸå˜çº¿åœ¨é‡é™†åœ°æ—¶ç•¥æœ‰åç¦»ã€‚æ¯ä¸€ç»åº¦å’Œçº¬åº¦è¿˜å¯ä»¥å†ç»†åˆ†ä¸º60åˆ†ï¼Œæ¯ä¸€åˆ†å†åˆ†ä¸º60ç§’ä»¥åŠç§’çš„å°æ•°ã€‚åˆ©ç”¨ç»çº¬çº¿ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¡®å®šåœ°çƒä¸Šæ¯ä¸€ä¸ªåœ°æ–¹çš„å…·ä½“ä½ç½®ï¼Œå¹¶ä¸”æŠŠå®ƒåœ¨åœ°å›¾æˆ–åœ°çƒä»ªä¸Šè¡¨ç¤ºå‡ºæ¥ã€‚","categories":[{"name":"mysql","slug":"mysql","permalink":"https://huangxingx.github.io/categories/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://huangxingx.github.io/tags/mysql/"},{"name":"function","slug":"function","permalink":"https://huangxingx.github.io/tags/function/"}]},{"title":"gorm ä¸­ä½¿ç”¨ json","slug":"golang/gorm ä¸­ä½¿ç”¨ json","date":"2019-06-11T08:55:56.000Z","updated":"2022-11-01T02:43:01.772Z","comments":true,"path":"2019/06/11/golang/gorm ä¸­ä½¿ç”¨ json/","link":"","permalink":"https://huangxingx.github.io/2019/06/11/golang/gorm%20%E4%B8%AD%E4%BD%BF%E7%94%A8%20json/","excerpt":"","text":"Json ç±»çš„å®ç°package models import ( &quot;bytes&quot; &quot;database/sql/driver&quot; &quot;errors&quot; ) type JSON []byte func (j JSON) Value() (driver.Value, error) &#123; if j.IsNull() &#123; return nil, nil &#125; return string(j), nil &#125; func (j *JSON) Scan(value interface&#123;&#125;) error &#123; if value == nil &#123; *j = nil return nil &#125; s, ok := value.([]byte) if !ok &#123; errors.New(&quot;Invalid Scan Source&quot;) &#125; *j = append((*j)[0:0], s...) return nil &#125; func (m JSON) MarshalJSON() ([]byte, error) &#123; if m == nil &#123; return []byte(&quot;null&quot;), nil &#125; return m, nil &#125; func (m *JSON) UnmarshalJSON(data []byte) error &#123; if m == nil &#123; return errors.New(&quot;null point exception&quot;) &#125; *m = append((*m)[0:0], data...) return nil &#125; func (j JSON) IsNull() bool &#123; return len(j) == 0 || string(j) == &quot;null&quot; &#125; func (j JSON) Equals(j1 JSON) bool &#123; return bytes.Equal([]byte(j), []byte(j1)) &#125; åœ¨è‡ªå®šä¹‰ Model ä¸­ä½¿ç”¨ Json Typepackage models type Model struct &#123; ID int `gorm:&quot;primary_key&quot; json:&quot;id&quot;` CreatedAt int64 `json:&quot;createdAt&quot;` UpdatedAt int64 `json:&quot;updatedAt&quot;` Object JSON `sql:&quot;type:json&quot; json:&quot;object,omitempty&quot;` &#125;","categories":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/categories/golang/"}],"tags":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/tags/golang/"},{"name":"gorm","slug":"gorm","permalink":"https://huangxingx.github.io/tags/gorm/"}]},{"title":"golang future å®ç°","slug":"golang/golang future å®ç°","date":"2019-06-06T07:16:40.000Z","updated":"2022-10-31T09:40:57.106Z","comments":true,"path":"2019/06/06/golang/golang future å®ç°/","link":"","permalink":"https://huangxingx.github.io/2019/06/06/golang/golang%20future%20%E5%AE%9E%E7%8E%B0/","excerpt":"","text":"å®ç°å¦‚ä¸‹ package utils import ( &quot;sync&quot; &quot;time&quot; ) // Future type Future struct &#123; isfinished bool result interface&#123;&#125; resultchan chan interface&#123;&#125; l sync.Mutex &#125; // GetResult get return value func (f *Future) GetResult() interface&#123;&#125; &#123; f.l.Lock() defer f.l.Unlock() if f.isfinished &#123; return f.result &#125; select &#123; // timeout case &lt;-time.Tick(time.Second * 6): f.isfinished = true f.result = nil return nil case f.result = &lt;-f.resultchan: f.isfinished = true return f.result &#125; &#125; // SetResult set return value func (f *Future) SetResult(result interface&#123;&#125;) &#123; if f.isfinished == true &#123; return &#125; f.resultchan &lt;- result close(f.resultchan) &#125; // NewFuture init Future func NewFuture() *Future &#123; return &amp;Future&#123; isfinished: false, result: nil, resultchan: make(chan interface&#123;&#125;, 1), &#125; &#125; è°ƒç”¨ /* Future æ˜¯ä¸€ä¸ªæœªæ¥çš„ä»»åŠ¡çš„æŠ½è±¡ã€‚å’Œpythoné‡Œçš„é‚£ä¸ªæœ‰ç‚¹ç±»ä¼¼ã€‚ åœ¨å¼‚æ­¥ä»»åŠ¡ä¸­SetResultï¼Œåœ¨GetResultçš„æ—¶å€™ä¼šç­‰å¾…resultç”Ÿæˆï¼Œæˆ–è€…è¶…æ—¶ã€‚ */ tasks := make([]*utils.Future, 0) for i := 0; i &lt; 10; i++ &#123; future := utils.NewFuture() tasks = append(tasks, future) go func(result int) &#123; time.Sleep(time.Second * time.Duration(rand.Int63n(10))) future.SetResult(result) &#125;(i) &#125; for _, item := range tasks &#123; ret, ok := item.GetResult().(int) if ok &#123; fmt.Println(ret) &#125; else &#123; fmt.Println(&quot;failed&quot;) &#125; &#125;","categories":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/categories/golang/"}],"tags":[{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/tags/golang/"},{"name":"future","slug":"future","permalink":"https://huangxingx.github.io/tags/future/"}]},{"title":"markdown è¯­æ³•ç®€ä»‹","slug":"å…¶ä»–/markdown è¯­æ³•ç®€ä»‹","date":"2019-06-05T03:13:18.000Z","updated":"2022-11-01T02:41:19.882Z","comments":true,"path":"2019/06/05/å…¶ä»–/markdown è¯­æ³•ç®€ä»‹/","link":"","permalink":"https://huangxingx.github.io/2019/06/05/%E5%85%B6%E4%BB%96/markdown%20%E8%AF%AD%E6%B3%95%E7%AE%80%E4%BB%8B/","excerpt":"","text":"#ä¸€ã€æ ‡é¢˜å†™æ³•ï¼š ç¬¬ä¸€ç§æ–¹æ³•ï¼š 1ã€åœ¨æ–‡æœ¬ä¸‹é¢åŠ ä¸Š ç­‰äºå· = ï¼Œé‚£ä¹ˆä¸Šæ–¹çš„æ–‡æœ¬å°±å˜æˆäº†å¤§æ ‡é¢˜ã€‚ç­‰äºå·çš„ä¸ªæ•°æ— é™åˆ¶ï¼Œä½†ä¸€å®šè¦å¤§äº0ä¸ªå“¦ã€‚ã€‚ 2ã€åœ¨æ–‡æœ¬ä¸‹é¢åŠ ä¸Š ä¸‹åˆ’çº¿ - ï¼Œé‚£ä¹ˆä¸Šæ–¹çš„æ–‡æœ¬å°±å˜æˆäº†ä¸­æ ‡é¢˜ï¼ŒåŒæ ·çš„ ä¸‹åˆ’çº¿ä¸ªæ•°æ— é™åˆ¶ã€‚ 3ã€è¦æƒ³è¾“å…¥=å·ï¼Œä¸Šé¢æœ‰æ–‡æœ¬è€Œä¸è®©å…¶è½¬åŒ–ä¸ºå¤§æ ‡é¢˜ï¼Œåˆ™éœ€è¦åœ¨ä¸¤è€…ä¹‹é—´åŠ ä¸€ä¸ªç©ºè¡Œã€‚ å¦ä¸€ç§æ–¹æ³•ï¼šï¼ˆæ¨èè¿™ç§æ–¹æ³•ï¼›æ³¨æ„âš ï¸ä¸­é—´éœ€è¦æœ‰ä¸€ä¸ªç©ºæ ¼ï¼‰ å…³äºæ ‡é¢˜è¿˜æœ‰ç­‰çº§è¡¨ç¤ºæ³•ï¼Œåˆ†ä¸ºå…­ä¸ªç­‰çº§ï¼Œæ˜¾ç¤ºçš„æ–‡æœ¬å¤§å°ä¾æ¬¡å‡å°ã€‚ä¸åŒç­‰çº§ä¹‹é—´æ˜¯ä»¥äº•å· # çš„ä¸ªæ•°æ¥æ ‡è¯†çš„ã€‚ä¸€çº§æ ‡é¢˜æœ‰ä¸€ä¸ª #ï¼ŒäºŒçº§æ ‡é¢˜æœ‰ä¸¤ä¸ª# ï¼Œä»¥æ­¤ç±»æ¨ã€‚ ä¾‹å¦‚ï¼š # ä¸€çº§æ ‡é¢˜ ## äºŒçº§æ ‡é¢˜ ### ä¸‰çº§æ ‡é¢˜ #### å››çº§æ ‡é¢˜ ##### äº”çº§æ ‡é¢˜ ###### å…­çº§æ ‡é¢˜ äºŒã€ç¼–è¾‘åŸºæœ¬è¯­æ³• 1ã€å­—ä½“æ ¼å¼å¼ºè°ƒ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼ç»™æˆ‘ä»¬çš„æ–‡æœ¬æ·»åŠ å¼ºè°ƒçš„æ•ˆæœ *å¼ºè°ƒ* (ç¤ºä¾‹ï¼šæ–œä½“) _å¼ºè°ƒ_ (ç¤ºä¾‹ï¼šæ–œä½“) **åŠ é‡å¼ºè°ƒ** (ç¤ºä¾‹ï¼šç²—ä½“) __åŠ é‡å¼ºè°ƒ__ (ç¤ºä¾‹ï¼šç²—ä½“) ***ç‰¹åˆ«å¼ºè°ƒ*** (ç¤ºä¾‹ï¼šç²—æ–œä½“) ___ç‰¹åˆ«å¼ºè°ƒ___ (ç¤ºä¾‹ï¼šç²—æ–œä½“) 2ã€ä»£ç  `&lt;hello world&gt;` 3ã€ä»£ç å—é«˜äº® (```) @Override protected void onDestroy() &#123; EventBus.getDefault().unregister(this); super.onDestroy(); &#125; (```) 4ã€è¡¨æ ¼ ï¼ˆå»ºè®®åœ¨è¡¨æ ¼å‰ç©ºä¸€è¡Œï¼Œå¦åˆ™å¯èƒ½å½±å“è¡¨æ ¼æ— æ³•æ˜¾ç¤ºï¼‰ è¡¨å¤´ | è¡¨å¤´ | è¡¨å¤´ ---- | ----- | ------ å•å…ƒæ ¼å†…å®¹ | å•å…ƒæ ¼å†…å®¹ | å•å…ƒæ ¼å†…å®¹ å•å…ƒæ ¼å†…å®¹ | å•å…ƒæ ¼å†…å®¹ | å•å…ƒæ ¼å†…å®¹ 5ã€å…¶ä»–å¼•ç”¨ å›¾ç‰‡ ![å›¾ç‰‡åç§°](https://www.baidu.com/img/bd_logo1.png) é“¾æ¥ [é“¾æ¥åç§°](https://www.baidu.com/) 6ã€åˆ—è¡¨ 1. é¡¹ç›®1 2. é¡¹ç›®2 3. é¡¹ç›®3 * é¡¹ç›®1 ï¼ˆä¸€ä¸ª*å·ä¼šæ˜¾ç¤ºä¸ºä¸€ä¸ªé»‘ç‚¹ï¼Œæ³¨æ„âš ï¸æœ‰ç©ºæ ¼ï¼Œå¦åˆ™ç›´æ¥æ˜¾ç¤ºä¸º*é¡¹ç›®1ï¼‰ * é¡¹ç›®2 7ã€æ¢è¡Œï¼ˆå»ºè®®ç›´æ¥åœ¨å‰ä¸€è¡Œåé¢è¡¥ä¸¤ä¸ªç©ºæ ¼ï¼‰ ç›´æ¥å›è½¦ä¸èƒ½æ¢è¡Œï¼Œ å¯ä»¥åœ¨ä¸Šä¸€è¡Œæ–‡æœ¬åé¢è¡¥ä¸¤ä¸ªç©ºæ ¼ï¼Œ è¿™æ ·ä¸‹ä¸€è¡Œçš„æ–‡æœ¬å°±æ¢è¡Œäº†ã€‚ æˆ–è€…å°±æ˜¯åœ¨ä¸¤è¡Œæ–‡æœ¬ç›´æ¥åŠ ä¸€ä¸ªç©ºè¡Œã€‚ ä¹Ÿèƒ½å®ç°æ¢è¡Œæ•ˆæœï¼Œä¸è¿‡è¿™ä¸ªè¡Œé—´è·æœ‰ç‚¹å¤§ã€‚ 8ã€å¼•ç”¨ &gt; ç¬¬ä¸€è¡Œå¼•ç”¨æ–‡å­— &gt; ç¬¬äºŒè¡Œå¼•ç”¨æ–‡å­—","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://huangxingx.github.io/categories/%E5%85%B6%E4%BB%96/"}],"tags":[{"name":"markdown","slug":"markdown","permalink":"https://huangxingx.github.io/tags/markdown/"},{"name":"api","slug":"api","permalink":"https://huangxingx.github.io/tags/api/"}]},{"title":"ç½‘ç«™æ”¶è—","slug":"å…¶ä»–/ç½‘ç«™æ”¶è—","date":"2019-06-04T08:20:14.000Z","updated":"2022-11-01T02:40:51.532Z","comments":true,"path":"2019/06/04/å…¶ä»–/ç½‘ç«™æ”¶è—/","link":"","permalink":"https://huangxingx.github.io/2019/06/04/%E5%85%B6%E4%BB%96/%E7%BD%91%E7%AB%99%E6%94%B6%E8%97%8F/","excerpt":"","text":"[toc] å®˜ç½‘hexo [https://hexo.io redis https://redis.io/ git https://git-scm.com/book/zh/v2 golang https://golang.google.cn/ uvicorn Python ASGI æ¡†æ¶ http://www.uvicorn.org/ API ç½‘ç«™hexo https://hexo.io/api/ redis https://redis.io markdown https://markdown.com.cn/ golang ç¬¬ä¸‰æ–¹åº“ants åç¨‹æ±  https://github.com/panjf2000/ants/ gorm orm https://gorm.io/zh_CN/ å·¥å…·ç½‘ç«™excalidraw åœ¨çº¿ä½œå›¾ https://excalidraw.com/ oktools https://oktools.net/ json2go https://oktools.net/json2go processon åœ¨çº¿ä½œå›¾ https://www.processon.com/ å…¶ä»–macwk Mac è½¯ä»¶ä¸‹è½½ https://macwk.com/","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://huangxingx.github.io/categories/%E5%85%B6%E4%BB%96/"}],"tags":[{"name":"api","slug":"api","permalink":"https://huangxingx.github.io/tags/api/"},{"name":"site","slug":"site","permalink":"https://huangxingx.github.io/tags/site/"}]},{"title":"http çŠ¶æ€ç ","slug":"å…¶ä»–/http çŠ¶æ€ç ","date":"2018-04-18T09:21:05.000Z","updated":"2018-04-18T09:21:05.000Z","comments":true,"path":"2018/04/18/å…¶ä»–/http çŠ¶æ€ç /","link":"","permalink":"https://huangxingx.github.io/2018/04/18/%E5%85%B6%E4%BB%96/http%20%E7%8A%B6%E6%80%81%E7%A0%81/","excerpt":"","text":"HTTPåè®®çŠ¶æ€ç è¡¨ç¤ºçš„æ„æ€ä¸»è¦åˆ†ä¸ºäº”ç±» ,å¤§ä½“æ˜¯ : 1Ã—Ã— ä¿ç•™ 2Ã—Ã— è¡¨ç¤ºè¯·æ±‚æˆåŠŸåœ°æ¥æ”¶ 3Ã—Ã— ä¸ºå®Œæˆè¯·æ±‚å®¢æˆ·éœ€è¿›ä¸€æ­¥ç»†åŒ–è¯·æ±‚ 4Ã—Ã— å®¢æˆ·é”™è¯¯ 5Ã—Ã— æœåŠ¡å™¨é”™è¯¯ 100 ContinueæŒ‡ç¤ºå®¢æˆ·ç«¯åº”è¯¥ç»§ç»­è¯·æ±‚ã€‚å›é€ç”¨äºé€šçŸ¥å®¢æˆ·ç«¯æ­¤æ¬¡è¯·æ±‚å·²ç»æ”¶åˆ°ï¼Œå¹¶ä¸”æ²¡æœ‰è¢«æœåŠ¡å™¨æ‹’ç»ã€‚å®¢æˆ·ç«¯åº”è¯¥ç»§ç»­å‘é€å‰©ä¸‹çš„è¯·æ±‚æ•°æ®æˆ–è€…è¯·æ±‚å·²ç»å®Œæˆï¼Œæˆ–è€…å¿½ç•¥å›é€æ•°æ®ã€‚æœåŠ¡å™¨å¿…é¡»å‘é€æœ€åçš„å›é€åœ¨è¯·æ±‚ä¹‹åã€‚ 101 Switching ProtocolsæœåŠ¡å™¨ä¾ç…§å®¢æœç«¯è¯·æ±‚ï¼Œé€šè¿‡Upgradeå¤´ä¿¡æ¯ï¼Œæ”¹å˜å½“å‰è¿æ¥çš„åº”ç”¨åè®®ã€‚æœåŠ¡å™¨å°†æ ¹æ®Upgradeå¤´ç«‹åˆ»æ”¹å˜åè®® åœ¨101å›é€ä»¥ç©ºè¡Œç»“æŸçš„æ—¶å€™ã€‚ Successful200 OKæŒ‡ç¤ºå®¢æœç«¯çš„è¯·æ±‚å·²ç»æˆåŠŸæ”¶åˆ°ï¼Œè§£æï¼Œæ¥å—ã€‚ 201 Createdè¯·æ±‚å·²ç»å®Œæˆå¹¶ä¸€ä¸ªæ–°çš„è¿”å›èµ„æºè¢«åˆ›å»ºã€‚è¢«åˆ›å»ºçš„èµ„æºå¯èƒ½æ˜¯ä¸€ä¸ªURIèµ„æºï¼Œé€šå¸¸URIèµ„æºåœ¨Locationå¤´æŒ‡å®šã€‚å›é€åº”è¯¥åŒ…å«ä¸€ä¸ªå®ä½“æ•°æ®å¹¶ä¸”åŒ…å«èµ„æºç‰¹æ€§ä»¥åŠlocationé€šè¿‡ç”¨æˆ·æˆ–è€…ç”¨æˆ·ä»£ç†æ¥é€‰æ‹©åˆé€‚çš„æ–¹æ³•ã€‚å®ä½“æ•°æ®æ ¼å¼é€šè¿‡ç…¤ä½“ç±»å‹æ¥æŒ‡å®šå³content-typeå¤´ã€‚æœ€å¼€å§‹æœåŠ¡ å™¨å¿…é¡»åˆ›å»ºæŒ‡å®šçš„èµ„æºåœ¨è¿”å›201çŠ¶æ€ç ä¹‹å‰ã€‚å¦‚æœè¡Œä¸ºæ²¡æœ‰è¢«ç«‹åˆ»æ‰§è¡Œï¼ŒæœåŠ¡å™¨åº”è¯¥è¿”å›202ã€‚ 202 Acceptedè¯·æ±‚å·²ç»è¢«æ¥å—ç”¨æ¥å¤„ç†ã€‚ä½†æ˜¯å¤„ç†å¹¶æ²¡æœ‰å®Œæˆã€‚è¯·æ±‚å¯èƒ½æˆ–è€…æ ¹æœ¬æ²¡æœ‰éµç…§æ‰§è¡Œï¼Œå› ä¸ºå¤„ç†å®é™…æ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½è¢«æ‹’ç»ã€‚ 203 Non-Authoritative Informationä¸æ˜¯æƒå¨æ€§ä¿¡æ¯ã€‚ 204 No ContentæœåŠ¡å™¨å·²ç»æ¥å—è¯·æ±‚å¹¶ä¸”æ²¡å¿…è¦è¿”å›å®ä½“æ•°æ®ï¼Œå¯èƒ½éœ€è¦è¿”å›æ›´æ–°ä¿¡æ¯ã€‚å›é€å¯èƒ½åŒ…å«æ–°çš„æˆ–æ›´æ–°ä¿¡æ¯ç”±entity-headerså‘ˆç°ã€‚ 205 Reset ContentæœåŠ¡å™¨å·²ç»æ¥å—è¯·æ±‚å¹¶ä¸”ç”¨æˆ·ä»£ç†åº”è¯¥é‡æ–°è®¾ç½®æ–‡æ¡£è§†å›¾ã€‚ 206 Partial ContentæœåŠ¡å™¨å·²ç»æ¥å—è¯·æ±‚GETè¯·æ±‚èµ„æºçš„éƒ¨åˆ†ã€‚è¯·æ±‚å¿…é¡»åŒ…å«ä¸€ä¸ªRangeå¤´ä¿¡æ¯ä»¥æŒ‡ç¤ºè·å–èŒƒå›´å¯èƒ½å¿…é¡»åŒ…å«If-Rangeå¤´ä¿¡æ¯ä»¥æˆç«‹è¯·æ±‚æ¡ä»¶ã€‚ Redirection300 Multiple Choicesè¯·æ±‚èµ„æºç¬¦åˆä»»ä½•ä¸€ä¸ªå‘ˆç°æ–¹å¼ã€‚ 301 Moved Permanentlyè¯·æ±‚çš„èµ„æºå·²ç»è¢«èµ‹äºˆä¸€ä¸ªæ–°çš„URIã€‚ 302 Foundé€šè¿‡ä¸åŒçš„URIè¯·æ±‚èµ„æºçš„ä¸´æ—¶æ–‡ä»¶ã€‚ 303 See Other304 Not Modifiedå¦‚æœå®¢æœç«¯å·²ç»å®Œæˆä¸€ä¸ªæœ‰æ¡ä»¶çš„è¯·æ±‚å¹¶ä¸”è¯·æ±‚æ˜¯å…è®¸çš„ï¼Œä½†æ˜¯è¿™ä¸ªæ–‡æ¡£å¹¶æ²¡æœ‰æ”¹å˜ï¼ŒæœåŠ¡å™¨åº”è¯¥è¿”å›304çŠ¶æ€ç ã€‚304çŠ¶æ€ç ä¸€å®šä¸èƒ½åŒ…å«ä¿¡æ¯ä¸»ä½“ï¼Œä»è€Œé€šå¸¸é€šè¿‡ä¸€ä¸ªå¤´å­—æ®µåçš„ç¬¬ä¸€ä¸ªç©ºè¡Œç»“æŸã€‚ 305 Use Proxyè¯·æ±‚çš„èµ„æºå¿…é¡»é€šè¿‡ä»£ç†ï¼ˆç”±Locationå­—æ®µæŒ‡å®šï¼‰æ¥è®¿é—®ã€‚Locationèµ„æºç»™å‡ºäº†ä»£ç†çš„URIã€‚ 306 Unused307 Temporary Redirectä¸´æ—¶é‡å®šå‘ã€‚ Client Error400 Bad Requestå› ä¸ºé”™è¯¯çš„è¯­æ³•å¯¼è‡´æœåŠ¡å™¨æ— æ³•ç†è§£è¯·æ±‚ä¿¡æ¯ã€‚ 401 Unauthorizedå¦‚æœè¯·æ±‚éœ€è¦ç”¨æˆ·éªŒè¯ã€‚å›é€åº”è¯¥åŒ…å«ä¸€ä¸ªWWW-Authenticateå¤´å­—æ®µç”¨æ¥æŒ‡æ˜è¯·æ±‚èµ„æºçš„æƒé™ã€‚ 402 Payment Requiredä¿ç•™çŠ¶æ€ç ã€‚ 403 ForbiddenæœåŠ¡å™¨æ¥å—è¯·æ±‚ï¼Œä½†æ˜¯è¢«æ‹’ç»å¤„ç†ã€‚ 404 Not FoundæœåŠ¡å™¨å·²ç»æ‰¾åˆ°ä»»ä½•åŒ¹é…Request-URIçš„èµ„æºã€‚ 405 Menthod Not AllowedRequest-Line è¯·æ±‚çš„æ–¹æ³•ä¸è¢«å…è®¸é€šè¿‡æŒ‡å®šçš„URIã€‚ 406 Not Acceptableå®¢æˆ·ç«¯æµè§ˆå™¨ä¸æ¥å—æ‰€è¯·æ±‚é¡µé¢çš„ MIME ç±»å‹ã€‚ 407 Proxy Authentication Requiredè¦æ±‚è¿›è¡Œä»£ç†èº«ä»½éªŒè¯ã€‚ 408 Reqeust Timeoutå®¢æœç«¯æ²¡æœ‰æäº¤ä»»ä½•è¯·æ±‚åœ¨æœåŠ¡å™¨ç­‰å¾…å¤„ç†æ—¶é—´å†…ã€‚ 409 Conflict410 Gone411 Length RequiredæœåŠ¡å™¨æ‹’ç»æ¥å—è¯·æ±‚åœ¨æ²¡æœ‰å®šä¹‰Content-Lengthå­—æ®µçš„æƒ…å†µä¸‹ã€‚ 412 Precondition Failedå‰ææ¡ä»¶å¤±è´¥ã€‚ 413 Request Entity Too LargeæœåŠ¡å™¨æ‹’ç»å¤„ç†è¯·æ±‚å› ä¸ºè¯·æ±‚æ•°æ®è¶…è¿‡æœåŠ¡å™¨èƒ½å¤Ÿå¤„ç†çš„èŒƒå›´ã€‚æœåŠ¡å™¨å¯èƒ½å…³é—­å½“å‰è¿æ¥æ¥é˜»æ­¢å®¢æœç«¯ç»§ç»­è¯·æ±‚ã€‚ 414 Request-URI Too LongæœåŠ¡å™¨æ‹’ç»æœåŠ¡å½“å‰è¯·æ±‚å› ä¸ºURIçš„é•¿åº¦è¶…è¿‡äº†æœåŠ¡å™¨çš„è§£æèŒƒå›´ã€‚ 415 Unsupported Media TypeæœåŠ¡å™¨æ‹’ç»æœåŠ¡å½“å‰è¯·æ±‚å› ä¸ºè¯·æ±‚æ•°æ®æ ¼å¼å¹¶ä¸è¢«è¯·æ±‚çš„èµ„æºæ”¯æŒã€‚ 416 Request Range Not Satisfialbeæ‰€è¯·æ±‚çš„èŒƒå›´æ— æ³•æ»¡è¶³ã€‚ 417 Expectation Failedæ‰§è¡Œå¤±è´¥ã€‚ Server Error500 Internal Server ErroræœåŠ¡å™¨é­é‡å¼‚å¸¸é˜»æ­¢äº†å½“å‰è¯·æ±‚çš„æ‰§è¡Œ 501 Not ImplementedæœåŠ¡å™¨æ²¡æœ‰ç›¸åº”çš„æ‰§è¡ŒåŠ¨ä½œæ¥å®Œæˆå½“å‰è¯·æ±‚ã€‚ 502 Bad GatewayWeb æœåŠ¡å™¨ç”¨ä½œç½‘å…³æˆ–ä»£ç†æœåŠ¡å™¨æ—¶æ”¶åˆ°äº†æ— æ•ˆå“åº”ã€‚ 503 Service Unavailableå› ä¸ºä¸´æ—¶æ–‡ä»¶è¶…è½½å¯¼è‡´æœåŠ¡å™¨ä¸èƒ½å¤„ç†å½“å‰è¯·æ±‚ã€‚ 504 Gateway Timeoutç½‘å…³è®¿é—®è¶…æ—¶ã€‚ 505 Http Version Not SupportedHTTP ç‰ˆæœ¬ä¸å—æ”¯æŒã€‚ &quot;100&quot; : Continue &quot;101&quot; : witching Protocols &quot;200&quot; : OK &quot;201&quot; : Created &quot;202&quot; : Accepted &quot;203&quot; : Non-Authoritative Information &quot;204&quot; : No Content &quot;205&quot; : Reset Content &quot;206&quot; : Partial Content &quot;300&quot; : Multiple Choices &quot;301&quot; : Moved Permanently &quot;302&quot; : Found &quot;303&quot; : See Other &quot;304&quot; : Not Modified &quot;305&quot; : Use Proxy &quot;307&quot; : Temporary Redirect &quot;400&quot; : Bad Request &quot;401&quot; : Unauthorized &quot;402&quot; : Payment Required &quot;403&quot; : Forbidden &quot;404&quot; : Not Found &quot;405&quot; : Method Not Allowed &quot;406&quot; : Not Acceptable &quot;407&quot; : Proxy Authentication Required &quot;408&quot; : Request Time-out &quot;409&quot; : Conflict &quot;410&quot; : Gone &quot;411&quot; : Length Required &quot;412&quot; : Precondition Failed &quot;413&quot; : Request Entity Too Large &quot;414&quot; : Request-URI Too Large &quot;415&quot; : Unsupported Media Type &quot;416&quot; : Requested range not satisfiable &quot;417&quot; : Expectation Failed &quot;500&quot; : Internal Server Error &quot;501&quot; : Not Implemented &quot;502&quot; : Bad Gateway &quot;503&quot; : Service Unavailable &quot;504&quot; : Gateway Time-out &quot;505&quot; : HTTP Version not supported","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://huangxingx.github.io/categories/%E5%85%B6%E4%BB%96/"}],"tags":[{"name":"http","slug":"http","permalink":"https://huangxingx.github.io/tags/http/"},{"name":"web","slug":"web","permalink":"https://huangxingx.github.io/tags/web/"}]},{"title":"python æ­£åˆ™è¡¨è¾¾å¼ç®€ä»‹","slug":"python/python æ­£åˆ™è¡¨è¾¾å¼ç®€ä»‹","date":"2017-11-13T09:21:05.000Z","updated":"2022-11-01T02:43:38.057Z","comments":true,"path":"2017/11/13/python/python æ­£åˆ™è¡¨è¾¾å¼ç®€ä»‹/","link":"","permalink":"https://huangxingx.github.io/2017/11/13/python/python%20%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%AE%80%E4%BB%8B/","excerpt":"","text":"1. æ¦‚å¿µï¼šæ­£åˆ™è¡¨è¾¾å¼ï¼ˆæˆ– REï¼‰æ˜¯ä¸€ç§å°å‹çš„ã€é«˜åº¦ä¸“ä¸šåŒ–çš„ç¼–ç¨‹è¯­è¨€ï¼Œï¼ˆåœ¨Pythonä¸­ï¼‰å®ƒå†…åµŒåœ¨Pythonä¸­ï¼Œå¹¶é€šè¿‡ re æ¨¡å—å®ç°ã€‚ä½¿ç”¨è¿™ä¸ªå°å‹è¯­è¨€ï¼Œ ä½ å¯ä»¥ä¸ºæƒ³è¦åŒ¹é…çš„ç›¸åº”å­—ç¬¦ä¸²é›†æŒ‡å®šè§„åˆ™ï¼›è¯¥å­—ç¬¦ä¸²é›†å¯èƒ½åŒ…å«è‹±æ–‡è¯­å¥ã€email åœ°å€ã€TeXå‘½ä»¤æˆ–ä»»ä½•ä½ æƒ³æå®šçš„ä¸œè¥¿ã€‚ç„¶åä½ å¯ä»¥é—®è¯¸å¦‚â€œè¿™ä¸ªå­—ç¬¦ä¸²åŒ¹é…è¯¥æ¨¡å¼å—ï¼Ÿâ€æˆ–â€œåœ¨è¿™ä¸ªå­—ç¬¦ä¸²ä¸­æ˜¯å¦æœ‰éƒ¨åˆ†åŒ¹é…è¯¥æ¨¡å¼å‘¢ï¼Ÿâ€ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ RE ä»¥å„ç§æ–¹å¼æ¥ä¿®æ”¹æˆ–åˆ†å‰²å­—ç¬¦ä¸²ã€‚ 2. åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œ å¦‚ä¸‹çš„å­—ç¬¦æ˜¯å…·æœ‰ç‰¹æ®Šå«ä¹‰çš„. (æ‰€æœ‰å­—ç¬¦) ^ $ *(0-Næ¬¡) +(1-Næ¬¡) ? (0-1æ¬¡) &#123; &#125; [ ] \\ | ( ) 1).&quot;[&quot; å’Œ &quot;]&quot;ã€‚å®ƒä»¬å¸¸ç”¨æ¥æŒ‡å®šä¸€ä¸ªå­—ç¬¦ç±»åˆ«ï¼Œæ‰€è°“å­—ç¬¦ç±»åˆ«å°±æ˜¯ä½ æƒ³åŒ¹é…çš„ä¸€ä¸ªå­—ç¬¦é›† 2).å…¶å®ƒåœ°æ–¹çš„&quot;^&quot;åªä¼šç®€å•åŒ¹é… &quot;^&quot;å­—ç¬¦æœ¬èº«ã€‚ä¾‹[^5] å°†åŒ¹é…é™¤ &quot;5&quot; ä¹‹å¤–çš„ä»»æ„å­—ç¬¦ã€‚ 3).åæ–œæ åé¢å¯ä»¥åŠ ä¸åŒçš„å­—ç¬¦ä»¥è¡¨ç¤ºä¸åŒç‰¹æ®Šæ„ä¹‰ã€‚å®ƒä¹Ÿå¯ä»¥ç”¨äºå–æ¶ˆæ‰€æœ‰çš„å…ƒå­—ç¬¦ 3. RE å‡½æ•°ç”¨æ³•: findall(rule , target [,flag] ) åœ¨ç›®æ ‡å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾ç¬¦åˆè§„åˆ™çš„å­—ç¬¦ä¸²ã€‚ match() å†³å®š RE æ˜¯å¦åœ¨å­—ç¬¦ä¸²åˆšå¼€å§‹çš„ä½ç½®åŒ¹é… search() æ‰«æå­—ç¬¦ä¸²ï¼Œæ‰¾åˆ°è¿™ä¸ª RE åŒ¹é…çš„ä½ç½® findall() æ‰¾åˆ° RE åŒ¹é…çš„æ‰€æœ‰å­ä¸²ï¼Œå¹¶æŠŠå®ƒä»¬ä½œä¸ºä¸€ä¸ªåˆ—è¡¨è¿”å› finditer() æ‰¾åˆ° RE åŒ¹é…çš„æ‰€æœ‰å­ä¸²ï¼Œå¹¶æŠŠå®ƒä»¬ä½œä¸ºä¸€ä¸ªè¿­ä»£å™¨è¿”å› group() è¿”å›è¢« RE åŒ¹é…çš„å­—ç¬¦ä¸² start() è¿”å›åŒ¹é…å¼€å§‹çš„ä½ç½® end() è¿”å›åŒ¹é…ç»“æŸçš„ä½ç½® span() è¿”å›ä¸€ä¸ªå…ƒç»„åŒ…å«åŒ¹é… (å¼€å§‹,ç»“æŸ) çš„ä½ç½® compile( rule [,flag] )å°†æ­£åˆ™è§„åˆ™ç¼–è¯‘æˆä¸€ä¸ªPatternå¯¹è±¡ï¼Œä»¥ä¾›æ¥ä¸‹æ¥ä½¿ç”¨ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è§„åˆ™å¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è§„åˆ™é€‰é¡¹ã€‚(ä½¿ç”¨compileåŠ é€Ÿ) 4. å«ä¹‰:é¢„å®šä¹‰è½¬ä¹‰å­—ç¬¦é›†ï¼š â€œ\\dâ€ â€œ\\wâ€ â€œ\\sâ€ ç­‰ç­‰ï¼Œå®ƒä»¬æ˜¯ä»¥å­—ç¬¦â€™\\â€™å¼€å¤´ï¼Œåé¢æ¥ä¸€ä¸ªç‰¹å®š å­—ç¬¦çš„å½¢å¼,ç”¨æ¥æŒ‡ç¤ºä¸€ä¸ªé¢„å®šä¹‰å¥½çš„å«ä¹‰ â€˜^â€™ å’Œâ€™$â€™ åŒ¹é…å­—ç¬¦ä¸²å¼€å¤´å’Œç»“å°¾ â€˜.â€™ åŒ¹é…æ‰€æœ‰å­—ç¬¦ é™¤\\nä»¥å¤– â€˜\\dâ€™ åŒ¹é…æ•°å­— â€˜\\Dâ€™ åŒ¹é…éæ•°å­— â€˜\\wâ€™ åŒ¹é…å­—æ¯å’Œæ•°å­— â€˜\\Wâ€™ åŒ¹é…éè‹±æ–‡å­—æ¯å’Œæ•°å­— â€˜\\sâ€™ åŒ¹é…é—´éš”ç¬¦ â€˜\\Sâ€™ åŒ¹é…éé—´éš”ç¬¦ â€˜\\Aâ€™ åŒ¹é…å­—ç¬¦ä¸²å¼€å¤´ â€˜\\Zâ€™ åŒ¹é…å­—ç¬¦ä¸²ç»“å°¾ â€˜\\bâ€™ åªç”¨ä»¥åŒ¹é…å•è¯çš„è¯é¦–å’Œè¯å°¾ã€‚å•è¯è¢«å®šä¹‰ä¸ºä¸€ä¸ªå­—æ¯æ•°å­—åºåˆ—ï¼Œå› æ­¤è¯å°¾å°±æ˜¯ç”¨ç©ºç™½ç¬¦æˆ–éå­—æ¯æ•°å­—ç¬¦æ¥æ ‡ç¤ºçš„ã€‚(é€€æ ¼) â€˜\\Bâ€™ï¼Œå®ƒæ­£å¥½åŒ \\b ç›¸åï¼Œåªåœ¨å½“å‰ä½ç½®ä¸åœ¨å•è¯è¾¹ç•Œæ—¶åŒ¹é…ã€‚ 5. å‰å‘ç•Œå®šä¸åå‘ç•Œå®š: â€˜(?&lt;=â€¦)â€™ å‰å‘ç•Œå®š:æ‹¬å·ä¸­â€™â€¦â€™ä»£è¡¨ä½ å¸Œæœ›åŒ¹é…çš„å­—ç¬¦ä¸²çš„å‰é¢åº”è¯¥å‡ºç°çš„å­—ç¬¦ä¸²ã€‚ â€˜(?=â€¦)â€™åå‘ç•Œå®š :æ‹¬å·ä¸­çš„â€™â€¦â€™ä»£è¡¨ä½ å¸Œæœ›åŒ¹é…çš„å­—ç¬¦ä¸²åé¢åº”è¯¥å‡ºç°çš„å­—ç¬¦ä¸² â€˜(?&lt;!..)â€™å‰å‘éç•Œå®š :åªæœ‰å½“ä½ å¸Œæœ›çš„å­—ç¬¦ä¸²å‰é¢ä¸æ˜¯â€™â€¦â€™çš„å†…å®¹æ—¶æ‰åŒ¹é… â€˜(?!...)â€™åå‘éç•Œå®š :åªæœ‰å½“ä½ å¸Œæœ›çš„å­—ç¬¦ä¸²åé¢ä¸è·Ÿç€â€™â€¦â€™å†…å®¹æ—¶æ‰åŒ¹é…ã€‚ 6. ç»„çš„åŸºæœ¬çŸ¥è¯†: â€˜(â€˜â€™)â€™ æ— å‘½åç»„ [a-z]+(\\d+)[a-z]+ â€˜(?P&lt;name&gt;â€¦)â€™ å‘½åç»„ (?P&lt;g1&gt;[a-z]+)\\d+(?P=g1) â€˜(?P=name)â€™ è°ƒç”¨å·²åŒ¹é…çš„å‘½åç»„ â€˜\\numberâ€™ é€šè¿‡åºå·è°ƒç”¨å·²åŒ¹é…çš„ç»„æ­£åˆ™å¼ä¸­çš„æ¯ä¸ªç»„éƒ½æœ‰ä¸€ä¸ªåºå·ï¼Œåºå·æ˜¯æŒ‰ç»„ä»å·¦åˆ°å³ï¼Œä»1å¼€å§‹çš„æ•°å­—ï¼Œä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„å½¢å¼æ¥è°ƒç”¨å·²åŒ¹é…çš„ç»„ ( r&quot;(\\d+)([a-z]+)(\\d+)(\\2)(\\1)&quot; )","categories":[{"name":"python","slug":"python","permalink":"https://huangxingx.github.io/categories/python/"}],"tags":[{"name":"regex","slug":"regex","permalink":"https://huangxingx.github.io/tags/regex/"},{"name":"python","slug":"python","permalink":"https://huangxingx.github.io/tags/python/"}]}],"categories":[{"name":"java","slug":"java","permalink":"https://huangxingx.github.io/categories/java/"},{"name":"git","slug":"git","permalink":"https://huangxingx.github.io/categories/git/"},{"name":"docker","slug":"docker","permalink":"https://huangxingx.github.io/categories/docker/"},{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/categories/golang/"},{"name":"mac","slug":"mac","permalink":"https://huangxingx.github.io/categories/mac/"},{"name":"linux","slug":"linux","permalink":"https://huangxingx.github.io/categories/linux/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://huangxingx.github.io/categories/%E7%AE%97%E6%B3%95/"},{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://huangxingx.github.io/categories/%E5%85%B6%E4%BB%96/"},{"name":"mysql","slug":"mysql","permalink":"https://huangxingx.github.io/categories/mysql/"},{"name":"python","slug":"python","permalink":"https://huangxingx.github.io/categories/python/"},{"name":"redis","slug":"redis","permalink":"https://huangxingx.github.io/categories/redis/"}],"tags":[{"name":"java","slug":"java","permalink":"https://huangxingx.github.io/tags/java/"},{"name":"git","slug":"git","permalink":"https://huangxingx.github.io/tags/git/"},{"name":"docker","slug":"docker","permalink":"https://huangxingx.github.io/tags/docker/"},{"name":"golang","slug":"golang","permalink":"https://huangxingx.github.io/tags/golang/"},{"name":"gin","slug":"gin","permalink":"https://huangxingx.github.io/tags/gin/"},{"name":"regex","slug":"regex","permalink":"https://huangxingx.github.io/tags/regex/"},{"name":"mac","slug":"mac","permalink":"https://huangxingx.github.io/tags/mac/"},{"name":"ssh","slug":"ssh","permalink":"https://huangxingx.github.io/tags/ssh/"},{"name":"linux","slug":"linux","permalink":"https://huangxingx.github.io/tags/linux/"},{"name":"maven","slug":"maven","permalink":"https://huangxingx.github.io/tags/maven/"},{"name":"mapstruct","slug":"mapstruct","permalink":"https://huangxingx.github.io/tags/mapstruct/"},{"name":"plugins","slug":"plugins","permalink":"https://huangxingx.github.io/tags/plugins/"},{"name":"concurrent","slug":"concurrent","permalink":"https://huangxingx.github.io/tags/concurrent/"},{"name":"sync.Pool","slug":"sync-Pool","permalink":"https://huangxingx.github.io/tags/sync-Pool/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://huangxingx.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"timewheels","slug":"timewheels","permalink":"https://huangxingx.github.io/tags/timewheels/"},{"name":"ants","slug":"ants","permalink":"https://huangxingx.github.io/tags/ants/"},{"name":"goroutine","slug":"goroutine","permalink":"https://huangxingx.github.io/tags/goroutine/"},{"name":"jetbrains","slug":"jetbrains","permalink":"https://huangxingx.github.io/tags/jetbrains/"},{"name":"mysql","slug":"mysql","permalink":"https://huangxingx.github.io/tags/mysql/"},{"name":"æ…¢æ—¥å¿—","slug":"æ…¢æ—¥å¿—","permalink":"https://huangxingx.github.io/tags/%E6%85%A2%E6%97%A5%E5%BF%97/"},{"name":"sql","slug":"sql","permalink":"https://huangxingx.github.io/tags/sql/"},{"name":"æ€§èƒ½","slug":"æ€§èƒ½","permalink":"https://huangxingx.github.io/tags/%E6%80%A7%E8%83%BD/"},{"name":"springboot","slug":"springboot","permalink":"https://huangxingx.github.io/tags/springboot/"},{"name":"äº‹åŠ¡","slug":"äº‹åŠ¡","permalink":"https://huangxingx.github.io/tags/%E4%BA%8B%E5%8A%A1/"},{"name":"python","slug":"python","permalink":"https://huangxingx.github.io/tags/python/"},{"name":"web","slug":"web","permalink":"https://huangxingx.github.io/tags/web/"},{"name":"docker-compose","slug":"docker-compose","permalink":"https://huangxingx.github.io/tags/docker-compose/"},{"name":"helloworld","slug":"helloworld","permalink":"https://huangxingx.github.io/tags/helloworld/"},{"name":"http","slug":"http","permalink":"https://huangxingx.github.io/tags/http/"},{"name":"go-micro","slug":"go-micro","permalink":"https://huangxingx.github.io/tags/go-micro/"},{"name":"å¾®æœåŠ¡","slug":"å¾®æœåŠ¡","permalink":"https://huangxingx.github.io/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"},{"name":"æ³¨æ„äº‹é¡¹","slug":"æ³¨æ„äº‹é¡¹","permalink":"https://huangxingx.github.io/tags/%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/"},{"name":"function","slug":"function","permalink":"https://huangxingx.github.io/tags/function/"},{"name":"gorm","slug":"gorm","permalink":"https://huangxingx.github.io/tags/gorm/"},{"name":"future","slug":"future","permalink":"https://huangxingx.github.io/tags/future/"},{"name":"markdown","slug":"markdown","permalink":"https://huangxingx.github.io/tags/markdown/"},{"name":"api","slug":"api","permalink":"https://huangxingx.github.io/tags/api/"},{"name":"site","slug":"site","permalink":"https://huangxingx.github.io/tags/site/"}]}