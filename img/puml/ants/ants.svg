<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="440px" preserveAspectRatio="none" style="width:480px;height:440px;background:#FFFFFF;" version="1.1" viewBox="0 0 480 440" width="480px" zoomAndPan="magnify"><defs><filter height="300%" id="f1vqyo2w27k6hl" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[6a238c3ff9e730477301de7c2bfcc723]
class Pool--><rect codeLine="1" fill="#FEFECE" filter="url(#f1vqyo2w27k6hl)" height="151.6406" id="Pool" style="stroke:#A80036;stroke-width:1.5;" width="125" x="7" y="7"/><ellipse cx="53.25" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M55.7231,29.1431 Q55.1421,29.4419 54.5029,29.5913 Q53.8638,29.7407 53.1582,29.7407 Q50.6514,29.7407 49.3315,28.0889 Q48.0117,26.437 48.0117,23.3159 Q48.0117,20.1865 49.3315,18.5347 Q50.6514,16.8828 53.1582,16.8828 Q53.8638,16.8828 54.5112,17.0322 Q55.1587,17.1816 55.7231,17.4805 L55.7231,20.2031 Q55.0923,19.6221 54.4988,19.3523 Q53.9053,19.0825 53.2744,19.0825 Q51.9297,19.0825 51.2449,20.1492 Q50.5601,21.2158 50.5601,23.3159 Q50.5601,25.4077 51.2449,26.4744 Q51.9297,27.541 53.2744,27.541 Q53.9053,27.541 54.4988,27.2712 Q55.0923,27.0015 55.7231,26.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="24" x="73.75" y="27.5352">Pool</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="131" y1="39" y2="39"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="113" x="13" y="53.6348">workerArray workers</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="13" y="66.5898">state</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="131" y1="72.9102" y2="72.9102"/><ellipse cx="18" cy="83.9102" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="53" x="27" y="87.5449">NewPool()</text><ellipse cx="18" cy="96.8652" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="45" x="27" y="100.5">Submit()</text><ellipse cx="18" cy="109.8203" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="31" x="27" y="113.4551">Free()</text><ellipse cx="18" cy="122.7754" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="29" x="27" y="126.4102">Cap()</text><ellipse cx="18" cy="135.7305" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="48" x="27" y="139.3652">Release()</text><ellipse cx="18" cy="148.6855" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="46" x="27" y="152.3203">Reboot()</text><!--MD5=[67606b51d10375cd3d26065e6ca896ca]
class goWorker--><rect codeLine="12" fill="#FEFECE" filter="url(#f1vqyo2w27k6hl)" height="86.8652" id="goWorker" style="stroke:#A80036;stroke-width:1.5;" width="87" x="143" y="340"/><ellipse cx="158" cy="356" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M160.4731,362.1431 Q159.8921,362.4419 159.2529,362.5913 Q158.6138,362.7407 157.9082,362.7407 Q155.4014,362.7407 154.0815,361.0889 Q152.7617,359.437 152.7617,356.3159 Q152.7617,353.1865 154.0815,351.5347 Q155.4014,349.8828 157.9082,349.8828 Q158.6138,349.8828 159.2612,350.0322 Q159.9087,350.1816 160.4731,350.4805 L160.4731,353.2031 Q159.8423,352.6221 159.2488,352.3523 Q158.6553,352.0825 158.0244,352.0825 Q156.6797,352.0825 155.9949,353.1492 Q155.3101,354.2158 155.3101,356.3159 Q155.3101,358.4077 155.9949,359.4744 Q156.6797,360.541 158.0244,360.541 Q158.6553,360.541 159.2488,360.2712 Q159.8423,360.0015 160.4731,359.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="55" x="172" y="360.5352">goWorker</text><line style="stroke:#A80036;stroke-width:1.5;" x1="144" x2="229" y1="372" y2="372"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="50" x="149" y="386.6348">Pool pool</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="22" x="149" y="399.5898">task</text><line style="stroke:#A80036;stroke-width:1.5;" x1="144" x2="229" y1="405.9102" y2="405.9102"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="151" y="413.9102"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="27" x="163" y="420.5449">run()</text><!--MD5=[944fe3261d51a470e6127b86721a75f8]
class workerArray--><rect codeLine="18" fill="#FEFECE" filter="url(#f1vqyo2w27k6hl)" height="125.7305" id="workerArray" style="stroke:#A80036;stroke-width:1.5;" width="299" x="167" y="20"/><ellipse cx="276.75" cy="36" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M273.1777,32.2651 L273.1777,30.1069 L280.5571,30.1069 L280.5571,32.2651 L278.0918,32.2651 L278.0918,40.3418 L280.5571,40.3418 L280.5571,42.5 L273.1777,42.5 L273.1777,40.3418 L275.6431,40.3418 L275.6431,32.2651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="71" x="297.25" y="40.5352">workerArray</text><line style="stroke:#A80036;stroke-width:1.5;" x1="168" x2="465" y1="52" y2="52"/><line style="stroke:#A80036;stroke-width:1.5;" x1="168" x2="465" y1="60" y2="60"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="175" y="68"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="41" x="187" y="74.6348">len() int</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="175" y="80.9551"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="77" x="187" y="87.5898">isEmpty() bool</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="175" y="93.9102"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="167" x="187" y="100.5449">insert(worker *goWorker) error</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="175" y="106.8652"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="104" x="187" y="113.5">detach() *goWorker</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="175" y="119.8203"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="273" x="187" y="126.4551">retrieveExpiry(duration time.Duration) []*goWorker</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="175" y="132.7754"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="187" y="139.4102">reset()</text><!--MD5=[bfc71cc72bccc0740e6f09e85580fc7e]
class loopQueue--><rect codeLine="27" fill="#FEFECE" filter="url(#f1vqyo2w27k6hl)" height="60.9551" id="loopQueue" style="stroke:#A80036;stroke-width:1.5;" width="127" x="123" y="219"/><ellipse cx="152.85" cy="235" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M155.3231,241.1431 Q154.7421,241.4419 154.1029,241.5913 Q153.4638,241.7407 152.7582,241.7407 Q150.2514,241.7407 148.9315,240.0889 Q147.6117,238.437 147.6117,235.3159 Q147.6117,232.1865 148.9315,230.5347 Q150.2514,228.8828 152.7582,228.8828 Q153.4638,228.8828 154.1112,229.0322 Q154.7587,229.1816 155.3231,229.4805 L155.3231,232.2031 Q154.6923,231.6221 154.0988,231.3523 Q153.5053,231.0825 152.8744,231.0825 Q151.5297,231.0825 150.8449,232.1492 Q150.1601,233.2158 150.1601,235.3159 Q150.1601,237.4077 150.8449,238.4744 Q151.5297,239.541 152.8744,239.541 Q153.5053,239.541 154.0988,239.2712 Q154.6923,239.0015 155.3231,238.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="62" x="170.15" y="239.5352">loopQueue</text><line style="stroke:#A80036;stroke-width:1.5;" x1="124" x2="249" y1="251" y2="251"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="115" x="129" y="265.6348">goWorker[] goWorker</text><line style="stroke:#A80036;stroke-width:1.5;" x1="124" x2="249" y1="271.9551" y2="271.9551"/><!--MD5=[b8b9ad7c3d2d0428482eb1aca5abeffd]
class workerStack--><rect codeLine="30" fill="#FEFECE" filter="url(#f1vqyo2w27k6hl)" height="60.9551" id="workerStack" style="stroke:#A80036;stroke-width:1.5;" width="127" x="285" y="219"/><ellipse cx="311.25" cy="235" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M313.7231,241.1431 Q313.1421,241.4419 312.5029,241.5913 Q311.8638,241.7407 311.1582,241.7407 Q308.6514,241.7407 307.3315,240.0889 Q306.0117,238.437 306.0117,235.3159 Q306.0117,232.1865 307.3315,230.5347 Q308.6514,228.8828 311.1582,228.8828 Q311.8638,228.8828 312.5112,229.0322 Q313.1587,229.1816 313.7231,229.4805 L313.7231,232.2031 Q313.0923,231.6221 312.4988,231.3523 Q311.9053,231.0825 311.2744,231.0825 Q309.9297,231.0825 309.2449,232.1492 Q308.5601,233.2158 308.5601,235.3159 Q308.5601,237.4077 309.2449,238.4744 Q309.9297,239.541 311.2744,239.541 Q311.9053,239.541 312.4988,239.2712 Q313.0923,239.0015 313.7231,238.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="70" x="327.75" y="239.5352">workerStack</text><line style="stroke:#A80036;stroke-width:1.5;" x1="286" x2="411" y1="251" y2="251"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="115" x="291" y="265.6348">goWorker[] goWorker</text><line style="stroke:#A80036;stroke-width:1.5;" x1="286" x2="411" y1="271.9551" y2="271.9551"/><!--MD5=[523325edf9cafe4b5c418a1214072b15]
reverse link Pool to goWorker--><path codeLine="34" d="M75.38,164.49 C80.25,200.99 89.18,243.95 105.5,280 C115.23,301.49 130.42,322.43 145.03,339.73 " fill="none" id="Pool-backto-goWorker" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="74.69,159.15,71.8807,168.5897,75.333,164.1085,79.8142,167.5608,74.69,159.15" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f6dc5f912f7b6e08a611d12a37691f1a]
link Pool to workerArray--><path codeLine="35" d="M132.21,83 C142.02,83 151.83,83 161.64,83 " fill="none" id="Pool-to-workerArray" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="166.77,83,157.77,79,161.77,83,157.77,87,166.77,83" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[6068b1adf33a94d95431494da74cf59c]
reverse link workerArray to loopQueue--><path codeLine="37" d="M254.92,161.92 C238.89,182.21 222.57,202.85 209.9,218.89 " fill="none" id="workerArray-backto-loopQueue" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="249.46,157.54,267.35,146.19,260.44,166.22,249.46,157.54" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[558fe25e72c4883eac3fdcf67a3a5efc]
reverse link workerArray to workerStack--><path codeLine="38" d="M332.42,165.82 C336.12,184.84 339.82,203.88 342.74,218.89 " fill="none" id="workerArray-backto-workerStack" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="325.55,167.16,328.6,146.19,339.29,164.49,325.55,167.16" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[baa88b63d5f98a77a41fe36ccfa320c7]
reverse link loopQueue to goWorker--><path codeLine="40" d="M186.5,293.25 C186.5,308.21 186.5,325.01 186.5,339.96 " fill="none" id="loopQueue-backto-goWorker" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="186.5,280.12,182.5,286.12,186.5,292.12,190.5,286.12,186.5,280.12" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[e53454c276b6bd80fc69ec63be1fd836]
reverse link workerStack to goWorker--><path codeLine="41" d="M301.8,288.55 C279.25,306.92 252.36,328.83 230.22,346.87 " fill="none" id="workerStack-backto-goWorker" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="312.14,280.12,304.9622,280.8125,302.8408,287.7045,310.0185,287.012,312.14,280.12" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[a8f355fb51fb15315aaf797d28071c3b]
@startuml ants
class Pool {
    workerArray workers
    state
    + NewPool()
    + Submit()
    + Free()
    + Cap()
    + Release()
    + Reboot()
}

class goWorker {
    Pool pool
    task
    -run()
}

interface workerArray{
    -len() int
	-isEmpty() bool
	-insert(worker *goWorker) error
	-detach() *goWorker
	-retrieveExpiry(duration time.Duration) []*goWorker
	-reset()
}

class loopQueue{
    goWorker[] goWorker
}
class workerStack{
    goWorker[] goWorker
}

Pool <- - goWorker
Pool -> workerArray

workerArray <|- - loopQueue
workerArray <|- - workerStack

loopQueue o- - goWorker
workerStack o- - goWorker

@enduml

PlantUML version 1.2021.7(Sun May 23 20:40:07 CST 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: zh
Country: CN
--></g></svg>